<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
<title>Master programming. <br> Лекция №10 (Паттерны проектирования)</title>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="copyright" content="Copyright &#169; Игорь Шаронов" />
<meta name="generator" content="AsciiDoc 9.1.0" />
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
/* slidy.css

   Copyright (c) 2005-2010 W3C (MIT, ERCIM, Keio), All Rights Reserved.
   W3C liability, trademark, document use and software licensing
   rules apply, see:

   http://www.w3.org/Consortium/Legal/copyright-documents
   http://www.w3.org/Consortium/Legal/copyright-software
*/

/*
   SJR: 2010-09-29: Modified for AsciiDoc slidy backend.
   Mostly just commented out stuff that is handled by AsciiDoc's CSS files.
*/

body
{
  margin: 0 0 0 0;
  padding: 0 0 0 0;
  width: 100%;
  height: 100%;
  color: black;
  background-color: white;
/*
  font-family: "Gill Sans MT", "Gill Sans", GillSans, sans-serif;
*/
  font-size: 14pt;
}

div.toolbar {
  position: fixed; z-index: 200;
  top: auto; bottom: 0; left: 0; right: 0;
  height: 1.2em; text-align: right;
  padding-left: 1em;
  padding-right: 1em;
  font-size: 60%;
  color: red;
  background-color: rgb(240,240,240);
  border-top: solid 1px rgb(180,180,180);
}

div.toolbar span.copyright {
  color: black;
  margin-left: 0.5em;
}

div.initial_prompt {
  position: absolute;
  z-index: 1000;
  bottom: 1.2em;
  width: 90%;
  background-color: rgb(200,200,200);
  opacity: 0.35;
  background-color: rgb(200,200,200, 0.35);
  cursor: pointer;
}

div.initial_prompt p.help {
  text-align: center;
}

div.initial_prompt p.close {
  text-align: right;
  font-style: italic;
}

div.slidy_toc {
  position: absolute;
  z-index: 300;
  width: 60%;
  max-width: 30em;
  height: 30em;
  overflow: auto;
  top: auto;
  right: auto;
  left: 4em;
  bottom: 4em;
  padding: 1em;
  background: rgb(240,240,240);
  border-style: solid;
  border-width: 2px;
  font-size: 60%;
}

div.slidy_toc .toc_heading {
  text-align: center;
  width: 100%;
  margin: 0;
  margin-bottom: 1em;
  border-bottom-style: solid;
  border-bottom-color: rgb(180,180,180);
  border-bottom-width: 1px;
}

div.slide {
  z-index: 20;
  margin: 0 0 0 0;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 20px;
  padding-right: 20px;
  border-width: 0;
  clear: both;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  line-height: 120%;
  background-color: transparent;
}

div.background {
  display: none;
}

div.handout {
  margin-left: 20px;
  margin-right: 20px;
}

div.slide.titlepage {
  text-align: center;
}

div.slide.titlepage.h1 {
  padding-top: 10%;
}

div.slide h1 {
  padding-left: 0;
  padding-right: 20pt;
  padding-top: 4pt;
  padding-bottom: 4pt;
  margin-top: 0;
  margin-left: 0;
  margin-right: 60pt;
  margin-bottom: 0.5em;
  display: block;
  font-size: 160%;
  line-height: 1.2em;
  background: transparent;
}

div.toc {
  position: absolute;
  top: auto;
  bottom: 4em;
  left: 4em;
  right: auto;
  width: 60%;
  max-width: 30em;
  height: 30em;
  border: solid thin black;
  padding: 1em;
  background: rgb(240,240,240);
  color: black;
  z-index: 300;
  overflow: auto;
  display: block;
  visibility: visible;
}

div.toc-heading {
  width: 100%;
  border-bottom: solid 1px rgb(180,180,180);
  margin-bottom: 1em;
  text-align: center;
}

/*
pre {
 font-size: 80%;
 font-weight: bold;
 line-height: 120%;
 padding-top: 0.2em;
 padding-bottom: 0.2em;
 padding-left: 1em;
 padding-right: 1em;
 border-style: solid;
 border-left-width: 1em;
 border-top-width: thin;
 border-right-width: thin;
 border-bottom-width: thin;
 border-color: #95ABD0;
 color: #00428C;
 background-color: #E4E5E7;
}
*/

/*
li pre { margin-left: 0; }

blockquote { font-style: italic }

img { background-color: transparent }

p.copyright { font-size: smaller }
*/

.center { text-align: center }
.footnote { font-size: smaller; margin-left: 2em; }

/*
a img { border-width: 0; border-style: none }
*/

a:visited { color: navy }
a:link { color: navy }
a:hover { color: red; text-decoration: underline }
a:active { color: red; text-decoration: underline }

a {text-decoration: none}
.navbar a:link {color: white}
.navbar a:visited {color: yellow}
.navbar a:active {color: red}
.navbar a:hover {color: red}

/*
ul { list-style-type: square; }
ul ul { list-style-type: disc; }
ul ul ul { list-style-type: circle; }
ul ul ul ul { list-style-type: disc; }
li { margin-left: 0.5em; margin-top: 0.5em; }
li li { font-size: 85%; font-style: italic }
li li li { font-size: 85%; font-style: normal }
*/

div dt
{
  margin-left: 0;
  margin-top: 1em;
  margin-bottom: 0.5em;
  font-weight: bold;
}
div dd
{
  margin-left: 2em;
  margin-bottom: 0.5em;
}


/*
p,pre,ul,ol,blockquote,h2,h3,h4,h5,h6,dl,table {
  margin-left: 1em;
  margin-right: 1em;
}
*/

p.subhead { font-weight: bold; margin-top: 2em; }

.smaller { font-size: smaller }
.bigger { font-size: 130% }

/*
td,th { padding: 0.2em }
*/

ul {
  margin: 0.5em 1.5em 0.5em 1.5em;
  padding: 0;
}

ol {
  margin: 0.5em 1.5em 0.5em 1.5em;
  padding: 0;
}

ul { list-style-type: square; }
ul ul { list-style-type: disc; }
ul ul ul { list-style-type: circle; }
ul ul ul ul { list-style-type: disc; }

/*
ul li {
  list-style: square;
  margin: 0.1em 0em 0.6em 0;
  padding: 0 0 0 0;
  line-height: 140%;
}

ol li {
  margin: 0.1em 0em 0.6em 1.5em;
  padding: 0 0 0 0px;
  line-height: 140%;
  list-style-type: decimal;
}

li ul li {
  font-size: 85%;
  font-style: italic;
  list-style-type: disc;
  background: transparent;
  padding: 0 0 0 0;
}
li li ul li {
  font-size: 85%;
  font-style: normal;
  list-style-type: circle;
  background: transparent;
  padding: 0 0 0 0;
}
li li li ul li {
  list-style-type: disc;
  background: transparent;
  padding: 0 0 0 0;
}

li ol li {
  list-style-type: decimal;
}


li li ol li {
  list-style-type: decimal;
}
*/

/*
 setting class="outline" on ol or ul makes it behave as an
 ouline list where blocklevel content in li elements is
 hidden by default and can be expanded or collapsed with
 mouse click. Set class="expand" on li to override default
*/

ol.outline li:hover { cursor: pointer }
ol.outline li.nofold:hover { cursor: default }

ul.outline li:hover { cursor: pointer }
ul.outline li.nofold:hover { cursor: default }

ol.outline { list-style:decimal; }
ol.outline ol { list-style-type:lower-alpha }

ol.outline li.nofold {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/nofold-dim.gif) no-repeat 0px 0.5em;
}
ol.outline li.unfolded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold-dim.gif) no-repeat 0px 0.5em;
}
ol.outline li.folded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold-dim.gif) no-repeat 0px 0.5em;
}
ol.outline li.unfolded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold.gif) no-repeat 0px 0.5em;
}
ol.outline li.folded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold.gif) no-repeat 0px 0.5em;
}

ul.outline li.nofold {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/nofold-dim.gif) no-repeat 0px 0.5em;
}
ul.outline li.unfolded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold-dim.gif) no-repeat 0px 0.5em;
}
ul.outline li.folded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold-dim.gif) no-repeat 0px 0.5em;
}
ul.outline li.unfolded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold.gif) no-repeat 0px 0.5em;
}
ul.outline li.folded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold.gif) no-repeat 0px 0.5em;
}

/* for slides with class "title" in table of contents */
a.titleslide { font-weight: bold; font-style: italic }

/*
 hide images for work around for save as bug
 where browsers fail to save images used by CSS
*/
img.hidden { display: none; visibility: hidden }
div.initial_prompt { display: none; visibility: hidden }

  div.slide {
     visibility: visible;
     position: inherit;
  }
  div.handout {
     border-top-style: solid;
     border-top-width: thin;
     border-top-color: black;
  }

@media screen {
  .hidden { display: none; visibility: visible }

  div.slide.hidden { display: block; visibility: visible }
  div.handout.hidden { display: block; visibility: visible }
  div.background { display: none; visibility: hidden }
  body.single_slide div.initial_prompt { display: block; visibility: visible }
  body.single_slide div.background { display: block; visibility: visible }
  body.single_slide div.background.hidden { display: none; visibility: hidden }
  body.single_slide .invisible { visibility: hidden }
  body.single_slide .hidden { display: none; visibility: hidden }
  body.single_slide div.slide { position: absolute }
  body.single_slide div.handout { display: none; visibility: hidden }
}

@media print {
  .hidden { display: block; visibility: visible }

/*
  div.slide pre { font-size: 60%; padding-left: 0.5em; }
*/
  div.toolbar { display: none; visibility: hidden; }
  div.slidy_toc { display: none; visibility: hidden; }
  div.background { display: none; visibility: hidden; }
  div.slide { page-break-before: always }
  /* :first-child isn't reliable for print media */
  div.slide.first-slide { page-break-before: avoid }
}


/* SJR: AsciiDoc slidy backend tweaks */

ol, ul {
  margin: 0.8em 1.5em 0.8em 1.8em;
}
li > ul, li > ol {
  margin-top: 0.5em;
}

.outline > li.folded,
.outline > li.unfolded {
  color: #527bbd;
}
ul > li{ color: #aaa; }
ul > li > *, ol > li > * { color: black; }

li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}


/* Slidy custom CSS */

a:link { color: navy; text-decoration: underline }
</style>
<script type="text/javascript">
/*<![CDATA[*/
/* slidy.js

   Copyright (c) 2005-2010 W3C (MIT, ERCIM, Keio), All Rights Reserved.
   W3C liability, trademark, document use and software licensing
   rules apply, see:

   http://www.w3.org/Consortium/Legal/copyright-documents
   http://www.w3.org/Consortium/Legal/copyright-software
*/

// the slidy object implementation
var w3c_slidy = {
  // classify which kind of browser we're running under
  ns_pos: (typeof window.pageYOffset!='undefined'),
  khtml: ((navigator.userAgent).indexOf("KHTML") >= 0 ? true : false),
  opera: ((navigator.userAgent).indexOf("Opera") >= 0 ? true : false),
  ipad: ((navigator.userAgent).indexOf("iPad") >= 0 ? true : false),
  iphone: ((navigator.userAgent).indexOf("iPhone") >= 0 ? true : false),
  ie: (typeof document.all != "undefined" && !this.opera),
  ie6: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 6") != -1),
  ie7: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 7") != -1),
  ie8: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 8") != -1),
  ie9: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 9") != -1),
  keyboardless: (this.ipad || this.iphone),

  // are we running as XHTML? (doesn't work on Opera)
  is_xhtml: /xml/.test(document.contentType),

  slide_number: 0, // integer slide count: 0, 1, 2, ...
  slide_number_element: null, // element containing slide number
  slides: [], // set to array of slide div's
  notes: [], // set to array of handout div's
  backgrounds: [], // set to array of background div's
  toolbar: null, // element containing toolbar
  title: null, // document title
  last_shown: null, // last incrementally shown item
  eos: null,  // span element for end of slide indicator
  toc: null, // table of contents
  outline: null, // outline element with the focus
  selected_text_len: 0, // length of drag selection on document
  view_all: 0,  // 1 to view all slides + handouts
  want_toolbar: true,  // user preference to show/hide toolbar
  mouse_click_enabled: true, // enables left click for next slide
  scroll_hack: 0, // IE work around for position: fixed
  disable_slide_click: false,  // used by clicked anchors

  lang: "en", // updated to language specified by html file

  help_anchor: null, // used for keyboard focus hack in showToolbar()
  help_page: "http://www.w3.org/Talks/Tools/Slidy2/help/help.html",
  help_text: "Navigate with mouse click, space bar, Cursor Left/Right, " +
             "or Pg Up and Pg Dn. Use S and B to change font size.",

  size_index: 0,
  size_adjustment: 0,
  sizes:  new Array("10pt", "12pt", "14pt", "16pt", "18pt", "20pt",
                    "22pt", "24pt", "26pt", "28pt", "30pt", "32pt"),

  // needed for efficient resizing
  last_width: 0,
  last_height: 0,


  // Needed for cross browser support for relative width/height on
  // object elements. The work around is to save width/height attributes
  // and then to recompute absolute width/height dimensions on resizing
   objects: [],

  // attach initialiation event handlers
  set_up: function () {
    var init = function() { w3c_slidy.init(); };
    if (typeof window.addEventListener != "undefined")
      window.addEventListener("load", init, false);
    else
      window.attachEvent("onload", init);
  },

  hide_slides: function () {
    if (document.body && !w3c_slidy.initialized)
      document.body.style.visibility = "hidden";
    else
      setTimeout(w3c_slidy.hide_slides, 50);
  },

  // hack to persuade IE to compute correct document height
  // as needed for simulating fixed positioning of toolbar
  ie_hack: function () {
    window.resizeBy(0,-1);
    window.resizeBy(0, 1);
  },

  init: function () {
    //alert("slidy starting test 10");
    document.body.style.visibility = "visible";
    w3c_slidy_i18n.init();
    this.add_toolbar();
    this.wrap_implicit_slides();
    this.collect_slides();
    this.collect_notes();
    this.collect_backgrounds();
    this.objects = document.body.getElementsByTagName("object");
    this.patch_anchors();
    this.slide_number = this.find_slide_number(location.href);
    window.offscreenbuffering = true;
    this.size_adjustment = this.find_size_adjust();
    this.time_left = this.find_duration();
    this.hide_image_toolbar();  // suppress IE image toolbar popup
    this.init_outliner();  // activate fold/unfold support
    this.title = document.title;

    // work around for opera bug
    this.is_xhtml = (document.body.tagName == "BODY" ? false : true);

    if (this.slides.length > 0)
    {
      var slide = this.slides[this.slide_number];

      if (this.slide_number > 0)
      {
        this.set_visibility_all_incremental("visible");
        this.last_shown = this.previous_incremental_item(null);
        this.set_eos_status(true);
      }
      else
      {
        this.last_shown = null;
        this.set_visibility_all_incremental("hidden");
        this.set_eos_status(!this.next_incremental_item(this.last_shown));
      }

      this.set_location();
      this.add_class(this.slides[0], "first-slide");
      w3c_slidy.show_slide(slide);
    }

    this.toc = this.table_of_contents();

    this.add_initial_prompt();

    // bind event handlers without interfering with custom page scripts
    // Tap events behave too weirdly to support clicks reliably on
    // iPhone and iPad, so exclude these from click handler

    if (!this.keyboardless)
      this.add_listener(document.body, "click", this.mouse_button_click);

    this.add_listener(document, "keydown", this.key_down);
    this.add_listener(document, "keypress", this.key_press);
    this.add_listener(window, "resize", this.resized);
    this.add_listener(window, "scroll", this.scrolled);
    this.add_listener(window, "unload", this.unloaded);

    if (!document.body.onclick)
      document.body.onclick = function () { };

    this.single_slide_view();

    //this.set_location();

    this.resized();

    if (this.ie7)
      setTimeout(w3c_slidy.ie_hack, 100);

    this.show_toolbar();

    // for back button detection
    setInterval(function () { w3c_slidy.check_location(); }, 200);
    w3c_slidy.initialized = true;
  },

  // create div element with links to each slide
  table_of_contents: function () {
    var toc = this.create_element("div");
    this.add_class(toc, "slidy_toc hidden");
    //toc.setAttribute("tabindex", "0");

    var heading = this.create_element("div");
    this.add_class(heading, "toc-heading");
    heading.innerHTML = "Table of Contents".localize();

    toc.appendChild(heading);
    var previous = null;

    for (var i = 0; i < this.slides.length; ++i)
    {
      var title = this.has_class(this.slides[i], "title");
      var num = document.createTextNode((i + 1) + ". ");

      toc.appendChild(num);

      var a = this.create_element("a");
      a.setAttribute("href", "#(" + (i+1) + ")");

      if (title)
        this.add_class(a, "titleslide");

      var name = document.createTextNode(this.slide_name(i));
      a.appendChild(name);
      a.onclick = w3c_slidy.toc_click;
      a.onkeydown = w3c_slidy.toc_keydown;
      a.previous = previous;

      if (previous)
        previous.next = a;

      toc.appendChild(a);

      if (i == 0)
        toc.first = a;

      if (i < this.slides.length - 1)
      {
        var br = this.create_element("br");
        toc.appendChild(br);
      }

      previous = a;
    }

    toc.focus = function () {
      if (this.first)
        this.first.focus();
    }

    toc.onmouseup = w3c_slidy.mouse_button_up;

    toc.onclick = function (e) {
      e||(e=window.event);

      if (w3c_slidy.selected_text_len <= 0)
         w3c_slidy.hide_table_of_contents();

      w3c_slidy.stop_propagation(e);

      if (e.cancel != undefined)
        e.cancel = true;

      if (e.returnValue != undefined)
        e.returnValue = false;

      return false;
    };

    document.body.insertBefore(toc, document.body.firstChild);
    return toc;
  },

  is_shown_toc: function () {
    return !w3c_slidy.has_class(w3c_slidy.toc, "hidden");
  },

  show_table_of_contents: function () {
    w3c_slidy.remove_class(w3c_slidy.toc, "hidden");
    var toc = w3c_slidy.toc;
    toc.focus();

    if (w3c_slidy.ie7 && w3c_slidy.slide_number == 0)
      setTimeout(w3c_slidy.ie_hack, 100);
  },

  hide_table_of_contents: function () {
    w3c_slidy.add_class(w3c_slidy.toc, "hidden");

    if (!w3c_slidy.opera)
      w3c_slidy.help_anchor.focus();
  },

  toggle_table_of_contents: function () {
    if (w3c_slidy.is_shown_toc())
      w3c_slidy.hide_table_of_contents();
    else
      w3c_slidy.show_table_of_contents();
  },

  // called on clicking toc entry
  toc_click: function (e) {
    if (!e)
      e = window.event;

    var target = w3c_slidy.get_target(e);

    if (target && target.nodeType == 1)
    {
      var uri = target.getAttribute("href");

      if (uri)
      {
        //alert("going to " + uri);
        var slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.hide_slide(slide);
        w3c_slidy.slide_number = w3c_slidy.find_slide_number(uri);
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.last_shown = null;
        w3c_slidy.set_location();
        w3c_slidy.set_visibility_all_incremental("hidden");
        w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
        w3c_slidy.show_slide(slide);
        //target.focus();

        try
        {
          if (!w3c_slidy.opera)
            w3c_slidy.help_anchor.focus();
        }
        catch (e)
        {
        }
      }
    }

    w3c_slidy.hide_table_of_contents(e);
    if (w3c_slidy.ie7) w3c_slidy.ie_hack();
    w3c_slidy.stop_propagation(e);
    return w3c_slidy.cancel(e);
  },

  // called onkeydown for toc entry
  toc_keydown: function (event) {
    var key;

    if (!event)
      var event = window.event;

    // kludge around NS/IE differences
    if (window.event)
      key = window.event.keyCode;
    else if (event.which)
      key = event.which;
    else
      return true; // Yikes! unknown browser

    // ignore event if key value is zero
    // as for alt on Opera and Konqueror
    if (!key)
      return true;

    // check for concurrent control/command/alt key
    // but are these only present on mouse events?

    if (event.ctrlKey || event.altKey)
      return true;

    if (key == 13)
    {
      var uri = this.getAttribute("href");

      if (uri)
      {
        //alert("going to " + uri);
       var slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.hide_slide(slide);
        w3c_slidy.slide_number = w3c_slidy.find_slide_number(uri);
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.last_shown = null;
        w3c_slidy.set_location();
        w3c_slidy.set_visibility_all_incremental("hidden");
        w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
        w3c_slidy.show_slide(slide);
        //target.focus();

        try
        {
          if (!w3c_slidy.opera)
            w3c_slidy.help_anchor.focus();
        }
        catch (e)
        {
        }
      }

      w3c_slidy.hide_table_of_contents();

      if (self.ie7)
       w3c_slidy.ie_hack();

      return w3c_slidy.cancel(event);
    }

    if (key == 40 && this.next)
    {
      this.next.focus();
      return w3c_slidy.cancel(event);
    }

    if (key == 38 && this.previous)
    {
      this.previous.focus();
      return w3c_slidy.cancel(event);
    }

    return true;
  },


  // ### OBSOLETE ###
  before_print: function () {
    this.show_all_slides();
    this.hide_toolbar();
    alert("before print");
  },

  // ### OBSOLETE ###
  after_print: function () {
    if (!this.view_all)
    {
      this.single_slide_view();
      this.show_toolbar();
    }
    alert("after print");
  },

  // ### OBSOLETE ###
  print_slides: function () {
    this.before_print();
    window.print();
    this.after_print();
  },

  // ### OBSOLETE ?? ###
  toggle_view: function () {
    if (this.view_all)
    {
      this.single_slide_view();
      this.show_toolbar();
      this.view_all = 0;
    }
    else
    {
      this.show_all_slides();
      this.hide_toolbar();
      this.view_all = 1;
    }
  },

  // prepare for printing  ### OBSOLETE ###
  show_all_slides: function () {
    this.remove_class(document.body, "single_slide");
    this.set_visibility_all_incremental("visible");
  },

  // restore after printing  ### OBSOLETE ###
  single_slide_view: function () {
    this.add_class(document.body, "single_slide");
    this.set_visibility_all_incremental("visible");
    this.last_shown = this.previous_incremental_item(null);
  },

  // suppress IE's image toolbar pop up
  hide_image_toolbar: function () {
    if (!this.ns_pos)
    {
      var images = document.getElementsByTagName("IMG");

      for (var i = 0; i < images.length; ++i)
        images[i].setAttribute("galleryimg", "no");
    }
  },

  unloaded: function (e) {
    //alert("unloaded");
  },

  // Safari and Konqueror don't yet support getComputedStyle()
  // and they always reload page when location.href is updated
  is_KHTML: function () {
    var agent = navigator.userAgent;
    return (agent.indexOf("KHTML") >= 0 ? true : false);
  },

  // find slide name from first h1 element
  // default to document title + slide number
  slide_name: function (index) {
    var name = null;
    var slide = this.slides[index];

    var heading = this.find_heading(slide);

    if (heading)
      name = this.extract_text(heading);

    if (!name)
      name = this.title + "(" + (index + 1) + ")";

    name.replace(/\&/g, "&amp;");
    name.replace(/\</g, "&lt;");
    name.replace(/\>/g, "&gt;");

    return name;
  },

  // find first h1 element in DOM tree
  find_heading: function (node) {
    if (!node || node.nodeType != 1)
      return null;

    if (node.nodeName == "H1" || node.nodeName == "h1")
      return node;

    var child = node.firstChild;

    while (child)
    {
      node = this.find_heading(child);

      if (node)
        return node;

      child = child.nextSibling;
    }

    return null;
  },

  // recursively extract text from DOM tree
  extract_text: function (node) {
    if (!node)
      return "";

    // text nodes
    if (node.nodeType == 3)
      return node.nodeValue;

    // elements
    if (node.nodeType == 1)
    {
      node = node.firstChild;
      var text = "";

      while (node)
      {
        text = text + this.extract_text(node);
        node = node.nextSibling;
      }

      return text;
    }

    return "";
  },

  // find copyright text from meta element
  find_copyright: function () {
    var name, content;
    var meta = document.getElementsByTagName("meta");

    for (var i = 0; i < meta.length; ++i)
    {
      name = meta[i].getAttribute("name");
      content = meta[i].getAttribute("content");

      if (name == "copyright")
        return content;
    }

    return null;
  },

  find_size_adjust: function () {
    var name, content, offset;
    var meta = document.getElementsByTagName("meta");

    for (var i = 0; i < meta.length; ++i)
    {
      name = meta[i].getAttribute("name");
      content = meta[i].getAttribute("content");

      if (name == "font-size-adjustment")
        return 1 * content;
    }

    return 1;
  },

  // <meta name="duration" content="20" />  for 20 minutes
  find_duration: function () {
    var name, content, offset;
    var meta = document.getElementsByTagName("meta");

    for (var i = 0; i < meta.length; ++i)
    {
      name = meta[i].getAttribute("name");
      content = meta[i].getAttribute("content");

      if (name == "duration")
        return 60000 * content;
    }

    return null;
  },

  replace_by_non_breaking_space: function (str) {
    for (var i = 0; i < str.length; ++i)
      str[i] = 160;
  },

  // ### CHECK ME ### is use of "li" okay for text/html?
  // for XHTML do we also need to specify namespace?
  init_outliner: function () {
    var items = document.getElementsByTagName("li");

    for (var i = 0; i < items.length; ++i)
    {
      var target = items[i];

      if (!this.has_class(target.parentNode, "outline"))
        continue;

      target.onclick = this.outline_click;
/* ### more work needed for IE6
      if (!this.ns_pos)
      {
        target.onmouseover = this.hover_outline;
        target.onmouseout = this.unhover_outline;
      }
*/
      if (this.foldable(target))
      {
        target.foldable = true;
        target.onfocus = function () {w3c_slidy.outline = this;};
        target.onblur = function () {w3c_slidy.outline = null;};

        if (!target.getAttribute("tabindex"))
          target.setAttribute("tabindex", "0");

        if (this.has_class(target, "expand"))
          this.unfold(target);
        else
          this.fold(target);
      }
      else
      {
        this.add_class(target, "nofold");
        target.visible = true;
        target.foldable = false;
      }
    }
  },

  foldable: function (item) {
    if (!item || item.nodeType != 1)
      return false;

    var node = item.firstChild;

    while (node)
    {
      if (node.nodeType == 1 && this.is_block(node))
        return true;

      node = node.nextSibling;
    }

    return false;
  },

  // ### CHECK ME ### switch to add/remove "hidden" class
  fold: function (item) {
    if (item)
    {
      this.remove_class(item, "unfolded");
      this.add_class(item, "folded");
    }

    var node = item ? item.firstChild : null;

    while (node)
    {
      if (node.nodeType == 1 && this.is_block(node)) // element
      {
         w3c_slidy.add_class(node, "hidden");
      }

      node = node.nextSibling;
    }

    item.visible = false;
  },

  // ### CHECK ME ### switch to add/remove "hidden" class
  unfold: function (item) {
    if (item)
    {
      this.add_class(item, "unfolded");
      this.remove_class(item, "folded");
    }

    var node = item ? item.firstChild : null;

    while (node)
    {
      if (node.nodeType == 1 && this.is_block(node)) // element
      {
        w3c_slidy.remove_class(node, "hidden");
      }

      node = node.nextSibling;
    }

    item.visible = true;
  },

  outline_click: function (e) {
    if (!e)
      e = window.event;

    var rightclick = false;
    var target = w3c_slidy.get_target(e);

    while (target && target.visible == undefined)
      target = target.parentNode;

    if (!target)
      return true;

    if (e.which)
      rightclick = (e.which == 3);
    else if (e.button)
      rightclick = (e.button == 2);

    if (!rightclick && target.visible != undefined)
    {
      if (target.foldable)
      {
        if (target.visible)
          w3c_slidy.fold(target);
        else
          w3c_slidy.unfold(target);
      }

      w3c_slidy.stop_propagation(e);
      e.cancel = true;
      e.returnValue = false;
    }

    return false;
  },

  add_initial_prompt: function () {
    var prompt = this.create_element("div");
    prompt.setAttribute("class", "initial_prompt");

    var p1 = this.create_element("p");
    prompt.appendChild(p1);
    p1.setAttribute("class", "help");

    if (this.keyboardless)
      p1.innerHTML = "Tap footer to move to next slide";
    else
      p1.innerHTML = "Space or Right Arrow to move to next " +
                     "slide, click help below for more details";

    this.add_listener(prompt, "click", function (e) {
      document.body.removeChild(prompt);
      w3c_slidy.stop_propagation(e);

      if (e.cancel != undefined)
        e.cancel = true;

      if (e.returnValue != undefined)
        e.returnValue = false;

      return false;
    });

    document.body.appendChild(prompt);
    this.initial_prompt = prompt;
    setTimeout(function() {document.body.removeChild(prompt);}, 5000);
  },

  add_toolbar: function () {
    var counter, page;

     this.toolbar = this.create_element("div");
     this.toolbar.setAttribute("class", "toolbar");

     // a reasonably behaved browser
     if (this.ns_pos || !this.ie6)
     {
       var right = this.create_element("div");
       right.setAttribute("style", "float: right; text-align: right");

       counter = this.create_element("span")
       counter.innerHTML = "slide".localize() + " n/m";
       right.appendChild(counter);
       this.toolbar.appendChild(right);

       var left = this.create_element("div");
       left.setAttribute("style", "text-align: left");

       // global end of slide indicator
       this.eos = this.create_element("span");
       this.eos.innerHTML = "* ";
       left.appendChild(this.eos);

       var help = this.create_element("a");
       help.setAttribute("href", this.help_page);
       help.setAttribute("title", this.help_text.localize());
       help.innerHTML = "help?".localize();
       left.appendChild(help);
       this.help_anchor = help;  // save for focus hack

       var gap1 = document.createTextNode(" ");
       left.appendChild(gap1);

       var contents = this.create_element("a");
       contents.setAttribute("href", "javascript:w3c_slidy.toggle_table_of_contents()");
       contents.setAttribute("title", "table of contents".localize());
       contents.innerHTML = "contents?".localize();
       left.appendChild(contents);

       var gap2 = document.createTextNode(" ");
       left.appendChild(gap2);

       var copyright = this.find_copyright();

       if (copyright)
       {
         var span = this.create_element("span");
         span.className = "copyright";
         span.innerHTML = copyright;
         left.appendChild(span);
       }

       this.toolbar.setAttribute("tabindex", "0");
       this.toolbar.appendChild(left);
     }
     else // IE6 so need to work around its poor CSS support
     {
       this.toolbar.style.position = (this.ie7 ? "fixed" : "absolute");
       this.toolbar.style.zIndex = "200";
       this.toolbar.style.width = "99.9%";
       this.toolbar.style.height = "1.2em";
       this.toolbar.style.top = "auto";
       this.toolbar.style.bottom = "0";
       this.toolbar.style.left = "0";
       this.toolbar.style.right = "0";
       this.toolbar.style.textAlign = "left";
       this.toolbar.style.fontSize = "60%";
       this.toolbar.style.color = "red";
       this.toolbar.borderWidth = 0;
       this.toolbar.className = "toolbar";
       this.toolbar.style.background = "rgb(240,240,240)";

       // would like to have help text left aligned
       // and page counter right aligned, floating
       // div's don't work, so instead use nested
       // absolutely positioned div's.

       var sp = this.create_element("span");
       sp.innerHTML = "&nbsp;&nbsp;*&nbsp;";
       this.toolbar.appendChild(sp);
       this.eos = sp;  // end of slide indicator

       var help = this.create_element("a");
       help.setAttribute("href", this.help_page);
       help.setAttribute("title", this.help_text.localize());
       help.innerHTML = "help?".localize();
       this.toolbar.appendChild(help);
       this.help_anchor = help;  // save for focus hack

       var gap1 = document.createTextNode(" ");
       this.toolbar.appendChild(gap1);

       var contents = this.create_element("a");
       contents.setAttribute("href", "javascript:toggleTableOfContents()");
       contents.setAttribute("title", "table of contents".localize());
       contents.innerHTML = "contents?".localize();
       this.toolbar.appendChild(contents);

       var gap2 = document.createTextNode(" ");
       this.toolbar.appendChild(gap2);

       var copyright = this.find_copyright();

       if (copyright)
       {
         var span = this.create_element("span");
         span.innerHTML = copyright;
         span.style.color = "black";
         span.style.marginLeft = "0.5em";
         this.toolbar.appendChild(span);
       }

       counter = this.create_element("div")
       counter.style.position = "absolute";
       counter.style.width = "auto"; //"20%";
       counter.style.height = "1.2em";
       counter.style.top = "auto";
       counter.style.bottom = 0;
       counter.style.right = "0";
       counter.style.textAlign = "right";
       counter.style.color = "red";
       counter.style.background = "rgb(240,240,240)";

       counter.innerHTML = "slide".localize() + " n/m";
       this.toolbar.appendChild(counter);
     }

     // ensure that click isn't passed through to the page
     this.toolbar.onclick =
         function (e) {
           if (!e)
             e = window.event;

           var target = e.target;

           if (!target && e.srcElement)
             target = e.srcElement;

           // work around Safari bug
           if (target && target.nodeType == 3)
             target = target.parentNode;

           w3c_slidy.stop_propagation(e);

           if (target && target.nodeName.toLowerCase() != "a")
             w3c_slidy.mouse_button_click(e);
         };

     this.slide_number_element = counter;
     this.set_eos_status(false);
     document.body.appendChild(this.toolbar);
  },

  // wysiwyg editors make it hard to use div elements
  // e.g. amaya loses the div when you copy and paste
  // this function wraps div elements around implicit
  // slides which start with an h1 element and continue
  // up to the next heading or div element
  wrap_implicit_slides: function () {
    var i, heading, node, next, div;
    var headings = document.getElementsByTagName("h1");

    if (!headings)
      return;

    for (i = 0; i < headings.length; ++i)
    {
      heading = headings[i];

      if (heading.parentNode != document.body)
        continue;

      node = heading.nextSibling;

      div = document.createElement("div");
      this.add_class(div, "slide");
      document.body.replaceChild(div, heading);
      div.appendChild(heading);

      while (node)
      {
        if (node.nodeType == 1 &&    // an element
             (node.nodeName == "H1" ||
              node.nodeName == "h1" ||
              node.nodeName == "DIV" ||
              node.nodeName == "div"))
          break;

        next = node.nextSibling;
        node = document.body.removeChild(node);
        div.appendChild(node);
        node = next;
      }
    }
  },

// return new array of all slides
  collect_slides: function () {
    var slides = new Array();
    var divs = document.body.getElementsByTagName("div");

    for (var i = 0; i < divs.length; ++i)
    {
      div = divs.item(i);

      if (this.has_class(div, "slide"))
      {
        // add slide to collection
        slides[slides.length] = div;

        // hide each slide as it is found
        this.add_class(div, "hidden");

        // add dummy <br/> at end for scrolling hack
        var node1 = document.createElement("br");
        div.appendChild(node1);
        var node2 = document.createElement("br");
        div.appendChild(node2);
      }
      else if (this.has_class(div, "background"))
      {  // work around for Firefox SVG reload bug
        // which otherwise replaces 1st SVG graphic with 2nd
        div.style.display = "block";
      }
    }

    this.slides = slides;
  },

  // return new array of all <div class="handout">
  collect_notes: function () {
    var notes = new Array();
    var divs = document.body.getElementsByTagName("div");

    for (var i = 0; i < divs.length; ++i)
    {
      div = divs.item(i);

      if (this.has_class(div, "handout"))
      {
        // add note to collection
        notes[notes.length] = div;

        // and hide it
        this.add_class(div, "hidden");
      }
    }

    this.notes = notes;
  },

  // return new array of all <div class="background">
  // including named backgrounds e.g. class="background titlepage"
  collect_backgrounds: function () {
    var backgrounds = new Array();
    var divs = document.body.getElementsByTagName("div");

    for (var i = 0; i < divs.length; ++i)
    {
      div = divs.item(i);

      if (this.has_class(div, "background"))
      {
        // add background to collection
        backgrounds[backgrounds.length] = div;

        // and hide it
        this.add_class(div, "hidden");
      }
    }

    this.backgrounds = backgrounds;
  },

  // set click handlers on all anchors
  patch_anchors: function () {
    var self = w3c_slidy;
    var handler = function (event) {
      // compare this.href with location.href
      // for link to another slide in this doc

      if (self.page_address(this.href) == self.page_address(location.href))
      {
        // yes, so find new slide number
        var newslidenum = self.find_slide_number(this.href);

        if (newslidenum != self.slide_number)
        {
          var slide = self.slides[self.slide_number];
          self.hide_slide(slide);
          self.slide_number = newslidenum;
          slide = self.slides[self.slide_number];
          self.show_slide(slide);
          self.set_location();
        }
      }
      else if (this.target == null)
        location.href = this.href;

      this.blur();
      self.disable_slide_click = true;
    };

    var anchors = document.body.getElementsByTagName("a");

    for (var i = 0; i < anchors.length; ++i)
    {
      if (window.addEventListener)
        anchors[i].addEventListener("click", handler, false);
      else
        anchors[i].attachEvent("onclick", handler);
    }
  },

  // ### CHECK ME ### see which functions are invoked via setTimeout
  // either directly or indirectly for use of w3c_slidy vs this
  show_slide_number: function () {
    var timer = w3c_slidy.get_timer();
    w3c_slidy.slide_number_element.innerHTML = timer + "slide".localize() + " " +
           (w3c_slidy.slide_number + 1) + "/" + w3c_slidy.slides.length;
  },

  // every 200mS check if the location has been changed as a
  // result of the user activating the Back button/menu item
  // doesn't work for Opera < 9.5
  check_location: function () {
    var hash = location.hash;

    if (w3c_slidy.slide_number > 0 && (hash == "" || hash == "#"))
      w3c_slidy.goto_slide(0);
    else if (hash.length > 2 && hash != "#("+(w3c_slidy.slide_number+1)+")")
    {
      var num = parseInt(location.hash.substr(2));

      if (!isNaN(num))
        w3c_slidy.goto_slide(num-1);
    }

    if (w3c_slidy.time_left && w3c_slidy.slide_number > 0)
    {
      w3c_slidy.show_slide_number();

      if (w3c_slidy.time_left > 0)
        w3c_slidy.time_left -= 200;
    }
  },

  get_timer: function () {
    var timer = "";
    if (w3c_slidy.time_left)
    {
      var mins, secs;
      secs = Math.floor(w3c_slidy.time_left/1000);
      mins = Math.floor(secs / 60);
      secs = secs % 60;
      timer = (mins ? mins+"m" : "") + secs + "s ";
    }

    return timer;
  },

  // this doesn't push location onto history stack for IE
  // for which a hidden iframe hack is needed: load page into
  // the iframe with script that set's parent's location.hash
  // but that won't work for standalone use unless we can
  // create the page dynamically via a javascript: URL
  set_location: function () {
     var uri = w3c_slidy.page_address(location.href);
     var hash = "#(" + (w3c_slidy.slide_number+1) + ")";

     if (w3c_slidy.slide_number >= 0)
       uri = uri + hash;

     if (w3c_slidy.ie && !w3c_slidy.ie8)
       w3c_slidy.push_hash(hash);

     if (uri != location.href) // && !khtml
        location.href = uri;

     if (this.khtml)
        hash = "(" + (w3c_slidy.slide_number+1) + ")";

     if (!this.ie && location.hash != hash && location.hash != "")
       location.hash = hash;

     document.title = w3c_slidy.title + " (" + (w3c_slidy.slide_number+1) + ")";
     w3c_slidy.show_slide_number();
  },

  page_address: function (uri) {
    var i = uri.indexOf("#");

    if (i < 0)
      i = uri.indexOf("%23");

    // check if anchor is entire page

    if (i < 0)
      return uri;  // yes

    return uri.substr(0, i);
  },

  // only used for IE6 and IE7
  on_frame_loaded: function (hash) {
    location.hash = hash;
    var uri = w3c_slidy.page_address(location.href);
    location.href = uri + hash;
  },

  // history hack with thanks to Bertrand Le Roy
  push_hash: function (hash) {
    if (hash == "") hash = "#(1)";
      window.location.hash = hash;

    var doc = document.getElementById("historyFrame").contentWindow.document;
    doc.open("javascript:'<html></html>'");
    // PWL modified this string literal to break the close script tag
    // which otherwise gets parsed when incorporated
    doc.write("<html><head><script type=\"text/javascript\">window.parent.w3c_slidy.on_frame_loaded('"+
      (hash) + "');</" + "script></head><body>hello mum</body></html>");
    doc.close();
    },

  // find current slide based upon location
  // first find target anchor and then look
  // for associated div element enclosing it
  // finally map that to slide number
  find_slide_number: function (uri) {
    // first get anchor from page location

    var i = uri.indexOf("#");

    // check if anchor is entire page
    if (i < 0)
      return 0;  // yes

    var anchor = unescape(uri.substr(i+1));

    // now use anchor as XML ID to find target
    var target = document.getElementById(anchor);

    if (!target)
    {
      // does anchor look like "(2)" for slide 2 ??
      // where first slide is (1)
      var re = /\((\d)+\)/;

      if (anchor.match(re))
      {
        var num = parseInt(anchor.substring(1, anchor.length-1));

        if (num > this.slides.length)
          num = 1;

        if (--num < 0)
          num = 0;

        return num;
      }

      // accept [2] for backwards compatibility
      re = /\[(\d)+\]/;

      if (anchor.match(re))
      {
         var num = parseInt(anchor.substring(1, anchor.length-1));

         if (num > this.slides.length)
            num = 1;

         if (--num < 0)
            num = 0;

         return num;
      }

      // oh dear unknown anchor
      return 0;
    }

    // search for enclosing slide

    while (true)
    {
      // browser coerces html elements to uppercase!
      if (target.nodeName.toLowerCase() == "div" &&
            this.has_class(target, "slide"))
      {
        // found the slide element
        break;
      }

      // otherwise try parent element if any

      target = target.parentNode;

      if (!target)
      {
        return 0;   // no luck!
      }
    };

    for (i = 0; i < slides.length; ++i)
    {
      if (slides[i] == target)
        return i;  // success
    }

    // oh dear still no luck
    return 0;
  },

  previous_slide: function (incremental) {
    if (!w3c_slidy.view_all)
    {
      var slide;

      if ((incremental || w3c_slidy.slide_number == 0) && w3c_slidy.last_shown != null)
      {
        w3c_slidy.last_shown = w3c_slidy.hide_previous_item(w3c_slidy.last_shown);
        w3c_slidy.set_eos_status(false);
      }
      else if (w3c_slidy.slide_number > 0)
      {
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.hide_slide(slide);

        w3c_slidy.slide_number = w3c_slidy.slide_number - 1;
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.set_visibility_all_incremental("visible");
        w3c_slidy.last_shown = w3c_slidy.previous_incremental_item(null);
        w3c_slidy.set_eos_status(true);
        w3c_slidy.show_slide(slide);
      }

      w3c_slidy.set_location();

      if (!w3c_slidy.ns_pos)
        w3c_slidy.refresh_toolbar(200);
    }
  },

  next_slide: function (incremental) {
    if (!w3c_slidy.view_all)
    {
      var slide, last = w3c_slidy.last_shown;

      if (incremental || w3c_slidy.slide_number == w3c_slidy.slides.length - 1)
         w3c_slidy.last_shown = w3c_slidy.reveal_next_item(w3c_slidy.last_shown);

      if ((!incremental || w3c_slidy.last_shown == null) &&
             w3c_slidy.slide_number < w3c_slidy.slides.length - 1)
      {
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);

         w3c_slidy.slide_number = w3c_slidy.slide_number + 1;
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.last_shown = null;
         w3c_slidy.set_visibility_all_incremental("hidden");
         w3c_slidy.show_slide(slide);
      }
      else if (!w3c_slidy.last_shown)
      {
         if (last && incremental)
           w3c_slidy.last_shown = last;
      }

      w3c_slidy.set_location();

      w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));

      if (!w3c_slidy.ns_pos)
         w3c_slidy.refresh_toolbar(200);
     }
  },

  // to first slide with nothing revealed
  // i.e. state at start of presentation
  first_slide: function () {
     if (!w3c_slidy.view_all)
     {
       var slide;

       if (w3c_slidy.slide_number != 0)
       {
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);

         w3c_slidy.slide_number = 0;
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.last_shown = null;
         w3c_slidy.set_visibility_all_incremental("hidden");
         w3c_slidy.show_slide(slide);
       }

       w3c_slidy.set_eos_status(
         !w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
       w3c_slidy.set_location();
     }
  },

  // goto last slide with everything revealed
  // i.e. state at end of presentation
  last_slide: function () {
    if (!w3c_slidy.view_all)
    {
      var slide;

      w3c_slidy.last_shown = null; //revealNextItem(lastShown);

      if (w3c_slidy.last_shown == null &&
          w3c_slidy.slide_number < w3c_slidy.slides.length - 1)
      {
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);
         w3c_slidy.slide_number = w3c_slidy.slides.length - 1;
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.set_visibility_all_incremental("visible");
         w3c_slidy.last_shown = w3c_slidy.previous_incremental_item(null);

         w3c_slidy.show_slide(slide);
      }
      else
      {
         w3c_slidy.set_visibility_all_incremental("visible");
         w3c_slidy.last_shown = w3c_slidy.previous_incremental_item(null);
      }

      w3c_slidy.set_eos_status(true);
      w3c_slidy.set_location();
    }
  },


  // ### check this and consider add/remove class
  set_eos_status: function (state) {
    if (this.eos)
      this.eos.style.color = (state ? "rgb(240,240,240)" : "red");
  },

  // first slide is 0
  goto_slide: function (num) {
    //alert("going to slide " + (num+1));
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.hide_slide(slide);
    w3c_slidy.slide_number = num;
    slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.last_shown = null;
    w3c_slidy.set_visibility_all_incremental("hidden");
    w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
    document.title = w3c_slidy.title + " (" + (w3c_slidy.slide_number+1) + ")";
    w3c_slidy.show_slide(slide);
    w3c_slidy.show_slide_number();
  },


  show_slide: function (slide) {
    this.sync_background(slide);
    window.scrollTo(0,0);
    this.remove_class(slide, "hidden");
  },

  hide_slide: function (slide) {
    this.add_class(slide, "hidden");
  },

  // show just the backgrounds pertinent to this slide
  // when slide background-color is transparent
  // this should now work with rgba color values
  sync_background: function (slide) {
    var background;
    var bgColor;

    if (slide.currentStyle)
      bgColor = slide.currentStyle["backgroundColor"];
    else if (document.defaultView)
    {
      var styles = document.defaultView.getComputedStyle(slide,null);

      if (styles)
        bgColor = styles.getPropertyValue("background-color");
      else // broken implementation probably due Safari or Konqueror
      {
        //alert("defective implementation of getComputedStyle()");
        bgColor = "transparent";
      }
    }
    else
      bgColor == "transparent";

    if (bgColor == "transparent" ||
        bgColor.indexOf("rgba") >= 0 ||
        bgColor.indexOf("opacity") >= 0)
    {
      var slideClass = this.get_class_list(slide);

      for (var i = 0; i < this.backgrounds.length; i++)
      {
        background = this.backgrounds[i];

        var bgClass = this.get_class_list(background);

        if (this.matching_background(slideClass, bgClass))
          this.remove_class(background, "hidden");
        else
          this.add_class(background, "hidden");
      }
    }
    else // forcibly hide all backgrounds
      this.hide_backgrounds();
  },

  hide_backgrounds: function () {
    for (var i = 0; i < this.backgrounds.length; i++)
    {
      background = this.backgrounds[i];
      this.add_class(background, "hidden");
    }
  },

  // compare classes for slide and background
  matching_background: function (slideClass, bgClass) {
    var i, count, pattern, result;

    // define pattern as regular expression
    pattern = /\w+/g;

    // check background class names
    result = bgClass.match(pattern);

    for (i = count = 0; i < result.length; i++)
    {
      if (result[i] == "hidden")
        continue;

      if (result[i] == "background")
	continue;

      ++count;
    }

    if (count == 0)  // default match
      return true;

    // check for matches and place result in array
    result = slideClass.match(pattern);

    // now check if desired name is present for background
    for (i = count = 0; i < result.length; i++)
    {
      if (result[i] == "hidden")
        continue;

      if (this.has_token(bgClass, result[i]))
        return true;
    }

    return false;
  },

  resized: function () {
     var width = 0;

     if ( typeof( window.innerWidth ) == 'number' )
       width = window.innerWidth;  // Non IE browser
     else if (document.documentElement && document.documentElement.clientWidth)
       width = document.documentElement.clientWidth;  // IE6
     else if (document.body && document.body.clientWidth)
       width = document.body.clientWidth; // IE4

     var height = 0;

     if ( typeof( window.innerHeight ) == 'number' )
       height = window.innerHeight;  // Non IE browser
     else if (document.documentElement && document.documentElement.clientHeight)
       height = document.documentElement.clientHeight;  // IE6
     else if (document.body && document.body.clientHeight)
       height = document.body.clientHeight; // IE4

     if (height && (width/height > 1.05*1024/768))
     {
       width = height * 1024.0/768;
     }

     // IE fires onresize even when only font size is changed!
     // so we do a check to avoid blocking < and > actions
     if (width != w3c_slidy.last_width || height != w3c_slidy.last_height)
     {
       if (width >= 1100)
         w3c_slidy.size_index = 5;    // 4
       else if (width >= 1000)
         w3c_slidy.size_index = 4;    // 3
       else if (width >= 800)
         w3c_slidy.size_index = 3;    // 2
       else if (width >= 600)
         w3c_slidy.size_index = 2;    // 1
       else if (width)
         w3c_slidy.size_index = 0;

       // add in font size adjustment from meta element e.g.
       // <meta name="font-size-adjustment" content="-2" />
       // useful when slides have too much content ;-)

       if (0 <= w3c_slidy.size_index + w3c_slidy.size_adjustment &&
             w3c_slidy.size_index + w3c_slidy.size_adjustment < w3c_slidy.sizes.length)
         w3c_slidy.size_index = w3c_slidy.size_index + w3c_slidy.size_adjustment;

       // enables cross browser use of relative width/height
       // on object elements for use with SVG and Flash media
       w3c_slidy.adjust_object_dimensions(width, height);

       if (document.body.style.fontSize != w3c_slidy.sizes[w3c_slidy.size_index])
       {
         document.body.style.fontSize = w3c_slidy.sizes[w3c_slidy.size_index];
       }

       w3c_slidy.last_width = width;
       w3c_slidy.last_height = height;

       // force reflow to work around Mozilla bug
       if (w3c_slidy.ns_pos)
       {
         var slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);
         w3c_slidy.show_slide(slide);
       }

       // force correct positioning of toolbar
       w3c_slidy.refresh_toolbar(200);
     }
  },

  scrolled: function () {
    if (w3c_slidy.toolbar && !w3c_slidy.ns_pos && !w3c_slidy.ie7)
    {
      w3c_slidy.hack_offset = w3c_slidy.scroll_x_offset();
      // hide toolbar
      w3c_slidy.toolbar.style.display = "none";

      // make it reappear later
      if (w3c_slidy.scrollhack == 0 && !w3c_slidy.view_all)
      {
        setTimeout(function () {w3c_slidy.show_toolbar(); }, 1000);
        w3c_slidy.scrollhack = 1;
      }
    }
  },

  hide_toolbar: function () {
    w3c_slidy.add_class(w3c_slidy.toolbar, "hidden");
    window.focus();
  },

  // used to ensure IE refreshes toolbar in correct position
  refresh_toolbar: function (interval) {
    if (!w3c_slidy.ns_pos && !w3c_slidy.ie7)
    {
      w3c_slidy.hide_toolbar();
      setTimeout(function () {w3c_slidy.show_toolbar(); }, interval);
    }
  },

  // restores toolbar after short delay
  show_toolbar: function () {
    if (w3c_slidy.want_toolbar)
    {
      w3c_slidy.toolbar.style.display = "block";

      if (!w3c_slidy.ns_pos)
      {
        // adjust position to allow for scrolling
        var xoffset = w3c_slidy.scroll_x_offset();
        w3c_slidy.toolbar.style.left = xoffset;
        w3c_slidy.toolbar.style.right = xoffset;

        // determine vertical scroll offset
        //var yoffset = scrollYOffset();

        // bottom is doc height - window height - scroll offset
        //var bottom = documentHeight() - lastHeight - yoffset

        //if (yoffset > 0 || documentHeight() > lastHeight)
        //   bottom += 16;  // allow for height of scrollbar

        w3c_slidy.toolbar.style.bottom = 0; //bottom;
      }

      w3c_slidy.remove_class(w3c_slidy.toolbar, "hidden");
    }

    w3c_slidy.scrollhack = 0;


    // set the keyboard focus to the help link on the
    // toolbar to ensure that document has the focus
    // IE doesn't always work with window.focus()
    // and this hack has benefit of Enter for help

    try
    {
      if (!w3c_slidy.opera)
        w3c_slidy.help_anchor.focus();
    }
    catch (e)
    {
    }
  },

// invoked via F key
  toggle_toolbar: function () {
    if (!w3c_slidy.view_all)
    {
      if (w3c_slidy.has_class(w3c_slidy.toolbar, "hidden"))
      {
        w3c_slidy.remove_class(w3c_slidy.toolbar, "hidden")
        w3c_slidy.want_toolbar = 1;
      }
      else
      {
        w3c_slidy.add_class(w3c_slidy.toolbar, "hidden")
        w3c_slidy.want_toolbar = 0;
      }
    }
  },

  scroll_x_offset: function () {
    if (window.pageXOffset)
      return self.pageXOffset;

    if (document.documentElement &&
             document.documentElement.scrollLeft)
      return document.documentElement.scrollLeft;

    if (document.body)
      return document.body.scrollLeft;

    return 0;
  },

  scroll_y_offset: function () {
    if (window.pageYOffset)
      return self.pageYOffset;

    if (document.documentElement &&
             document.documentElement.scrollTop)
      return document.documentElement.scrollTop;

    if (document.body)
      return document.body.scrollTop;

    return 0;
  },

  // looking for a way to determine height of slide content
  // the slide itself is set to the height of the window
  optimize_font_size: function () {
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];

    //var dh = documentHeight(); //getDocHeight(document);
    var dh = slide.scrollHeight;
    var wh = getWindowHeight();
    var u = 100 * dh / wh;

    alert("window utilization = " + u + "% (doc "
      + dh + " win " + wh + ")");
  },

  // from document object
  get_doc_height: function (doc) {
    if (!doc)
      doc = document;

    if (doc && doc.body && doc.body.offsetHeight)
      return doc.body.offsetHeight;  // ns/gecko syntax

    if (doc && doc.body && doc.body.scrollHeight)
      return doc.body.scrollHeight;

    alert("couldn't determine document height");
  },

  get_window_height: function () {
    if ( typeof( window.innerHeight ) == 'number' )
      return window.innerHeight;  // Non IE browser

    if (document.documentElement && document.documentElement.clientHeight)
      return document.documentElement.clientHeight;  // IE6

    if (document.body && document.body.clientHeight)
      return document.body.clientHeight; // IE4
  },

  document_height: function () {
    var sh, oh;

    sh = document.body.scrollHeight;
    oh = document.body.offsetHeight;

    if (sh && oh)
    {
      return (sh > oh ? sh : oh);
    }

    // no idea!
    return 0;
  },

  smaller: function () {
    if (w3c_slidy.size_index > 0)
    {
      --w3c_slidy.size_index;
    }

    w3c_slidy.toolbar.style.display = "none";
    document.body.style.fontSize = w3c_slidy.sizes[w3c_slidy.size_index];
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.hide_slide(slide);
    w3c_slidy.show_slide(slide);
    setTimeout(function () {w3c_slidy.show_toolbar(); }, 50);
  },

  bigger: function () {
    if (w3c_slidy.size_index < w3c_slidy.sizes.length - 1)
    {
      ++w3c_slidy.size_index;
    }

    w3c_slidy.toolbar.style.display = "none";
    document.body.style.fontSize = w3c_slidy.sizes[w3c_slidy.size_index];
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.hide_slide(slide);
    w3c_slidy.show_slide(slide);
    setTimeout(function () {w3c_slidy.show_toolbar(); }, 50);
  },

  // enables cross browser use of relative width/height
  // on object elements for use with SVG and Flash media
  // with thanks to Ivan Herman for the suggestion
  adjust_object_dimensions: function (width, height) {
    for( var i = 0; i < w3c_slidy.objects.length; i++ )
    {
      var obj = this.objects[i];
      var mimeType = obj.getAttribute("type");

      if (mimeType == "image/svg+xml" || mimeType == "application/x-shockwave-flash")
      {
        if ( !obj.initialWidth )
          obj.initialWidth = obj.getAttribute("width");

        if ( !obj.initialHeight )
          obj.initialHeight = obj.getAttribute("height");

        if ( obj.initialWidth && obj.initialWidth.charAt(obj.initialWidth.length-1) == "%" )
        {
          var w = parseInt(obj.initialWidth.slice(0, obj.initialWidth.length-1));
          var newW = width * (w/100.0);
          obj.setAttribute("width",newW);
        }

        if ( obj.initialHeight &&
             obj.initialHeight.charAt(obj.initialHeight.length-1) == "%" )
        {
          var h = parseInt(obj.initialHeight.slice(0, obj.initialHeight.length-1));
          var newH = height * (h/100.0);
          obj.setAttribute("height", newH);
        }
      }
    }
  },

  // needed for Opera to inhibit default behavior
  // since Opera delivers keyPress even if keyDown
  // was cancelled
  key_press: function (event) {
    if (!event)
      event = window.event;

    if (!w3c_slidy.key_wanted)
      return w3c_slidy.cancel(event);

    return true;
  },

  //  See e.g. http://www.quirksmode.org/js/events/keys.html for keycodes
  key_down: function (event) {
    var key;

    w3c_slidy.key_wanted = true;

    if (!event)
      event = window.event;

    // kludge around NS/IE differences
    if (window.event)
      key = window.event.keyCode;
    else if (event.which)
      key = event.which;
    else
      return true; // Yikes! unknown browser

    // ignore event if key value is zero
    // as for alt on Opera and Konqueror
    if (!key)
       return true;

    // check for concurrent control/command/alt key
    // but are these only present on mouse events?

    if (event.ctrlKey || event.altKey || event.metaKey)
       return true;

    // dismiss table of contents if visible
    if (w3c_slidy.is_shown_toc() && key != 9 && key != 16 && key != 38 && key != 40)
    {
      w3c_slidy.hide_table_of_contents();

      if (key == 27 || key == 84 || key == 67)
        return w3c_slidy.cancel(event);
    }

    if (key == 34) // Page Down
    {
      if (w3c_slidy.view_all)
        return true;

      w3c_slidy.next_slide(false);
      return w3c_slidy.cancel(event);
    }
    else if (key == 33) // Page Up
    {
      if (w3c_slidy.view_all)
        return true;

      w3c_slidy.previous_slide(false);
      return w3c_slidy.cancel(event);
    }
    else if (key == 32) // space bar
    {
      w3c_slidy.next_slide(true);
      return w3c_slidy.cancel(event);
    }
    else if (key == 37) // Left arrow
    {
      w3c_slidy.previous_slide(!event.shiftKey);
      return w3c_slidy.cancel(event);
    }
    else if (key == 36) // Home
    {
      w3c_slidy.first_slide();
      return w3c_slidy.cancel(event);
    }
    else if (key == 35) // End
    {
      w3c_slidy.last_slide();
      return w3c_slidy.cancel(event);
    }
    else if (key == 39) // Right arrow
    {
      w3c_slidy.next_slide(!event.shiftKey);
      return w3c_slidy.cancel(event);
    }
    else if (key == 13) // Enter
    {
      if (w3c_slidy.outline)
      {
        if (w3c_slidy.outline.visible)
          w3c_slidy.fold(w3c_slidy.outline);
        else
          w3c_slidy.unfold(w3c_slidy.outline);

       return w3c_slidy.cancel(event);
      }
    }
    else if (key == 188)  // < for smaller fonts
    {
      w3c_slidy.smaller();
      return w3c_slidy.cancel(event);
    }
    else if (key == 190)  // > for larger fonts
    {
      w3c_slidy.bigger();
      return w3c_slidy.cancel(event);
    }
    else if (key == 189 || key == 109)  // - for smaller fonts
    {
      w3c_slidy.smaller();
      return w3c_slidy.cancel(event);
    }
    else if (key == 187 || key == 191 || key == 107)  // = +  for larger fonts
    {
      w3c_slidy.bigger();
      return w3c_slidy.cancel(event);
    }
    else if (key == 83)  // S for smaller fonts
    {
      w3c_slidy.smaller();
      return w3c_slidy.cancel(event);
    }
    else if (key == 66)  // B for larger fonts
    {
      w3c_slidy.bigger();
      return w3c_slidy.cancel(event);
    }
    else if (key == 90)  // Z for last slide
    {
      w3c_slidy.last_slide();
      return w3c_slidy.cancel(event);
    }
    else if (key == 70)  // F for toggle toolbar
    {
      w3c_slidy.toggle_toolbar();
      return w3c_slidy.cancel(event);
    }
    else if (key == 65)  // A for toggle view single/all slides
    {
      w3c_slidy.toggle_view();
      return w3c_slidy.cancel(event);
    }
    else if (key == 75)  // toggle action of left click for next page
    {
      w3c_slidy.mouse_click_enabled = !w3c_slidy.mouse_click_enabled;
      var alert_msg = (w3c_slidy.mouse_click_enabled ?
                "enabled" : "disabled") +  " mouse click advance";

      alert(alert_msg.localize());
      return w3c_slidy.cancel(event);
    }
    else if (key == 84 || key == 67)  // T or C for table of contents
    {
      if (w3c_slidy.toc)
        w3c_slidy.toggle_table_of_contents();

      return w3c_slidy.cancel(event);
    }
    else if (key == 72) // H for help
    {
      window.location = w3c_slidy.help_page;
      return w3c_slidy.cancel(event);
    }
    //else alert("key code is "+ key);

    return true;
  },

  // safe for both text/html and application/xhtml+xml
  create_element: function (name) {
    if (this.xhtml && (typeof document.createElementNS != 'undefined'))
      return document.createElementNS("http://www.w3.org/1999/xhtml", name)

    return document.createElement(name);
  },

  get_element_style: function (elem, IEStyleProp, CSSStyleProp) {
    if (elem.currentStyle)
    {
      return elem.currentStyle[IEStyleProp];
    }
    else if (window.getComputedStyle)
    {
      var compStyle = window.getComputedStyle(elem, "");
      return compStyle.getPropertyValue(CSSStyleProp);
    }
    return "";
  },

  // the string str is a whitespace separated list of tokens
  // test if str contains a particular token, e.g. "slide"
  has_token: function (str, token) {
    if (str)
    {
      // define pattern as regular expression
      var pattern = /\w+/g;

      // check for matches
      // place result in array
      var result = str.match(pattern);

      // now check if desired token is present
      for (var i = 0; i < result.length; i++)
      {
        if (result[i] == token)
          return true;
      }
    }

    return false;
  },

  get_class_list: function (element) {
    if (typeof element.className != 'undefined')
      return element.className;

    return element.getAttribute("class");
  },

  has_class: function (element, name) {
    if (element.nodeType != 1)
      return false;

    var regexp = new RegExp("(^| )" + name + "\W*");

    if (typeof element.className != 'undefined')
      return regexp.test(element.className);

    return regexp.test(element.getAttribute("class"));
  },

  remove_class: function (element, name) {
    var regexp = new RegExp("(^| )" + name + "\W*");
    var clsval = "";

    if (typeof element.className != 'undefined')
    {
      clsval = element.className;

      if (clsval)
      {
        clsval = clsval.replace(regexp, "");
        element.className = clsval;
      }
    }
    else
    {
      clsval = element.getAttribute("class");

      if (clsval)
      {
        clsval = clsval.replace(regexp, "");
        element.setAttribute("class", clsval);
      }
    }
  },

  add_class: function (element, name) {
    if (!this.has_class(element, name))
    {
      if (typeof element.className != 'undefined')
        element.className += " " + name;
      else
      {
        var clsval = element.getAttribute("class");
        clsval = clsval ? clsval + " " + name : name;
        element.setAttribute("class", clsval);
      }
    }
  },

  // HTML elements that can be used with class="incremental"
  // note that you can also put the class on containers like
  // up, ol, dl, and div to make their contents appear
  // incrementally. Upper case is used since this is what
  // browsers report for HTML node names (text/html).
  incremental_elements: null,
  okay_for_incremental: function (name) {
    if (!this.incremental_elements)
    {
      var inclist = new Array();
      inclist["p"] = true;
      inclist["pre"] = true;
      inclist["li"] = true;
      inclist["blockquote"] = true;
      inclist["dt"] = true;
      inclist["dd"] = true;
      inclist["h2"] = true;
      inclist["h3"] = true;
      inclist["h4"] = true;
      inclist["h5"] = true;
      inclist["h6"] = true;
      inclist["span"] = true;
      inclist["address"] = true;
      inclist["table"] = true;
      inclist["tr"] = true;
      inclist["th"] = true;
      inclist["td"] = true;
      inclist["img"] = true;
      inclist["object"] = true;
      this.incremental_elements = inclist;
    }
    return this.incremental_elements[name.toLowerCase()];
  },

  next_incremental_item: function (node) {
    var br = this.is_xhtml ? "br" : "BR";
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];

    for (;;)
    {
      node = w3c_slidy.next_node(slide, node);

      if (node == null || node.parentNode == null)
        break;

      if (node.nodeType == 1)  // ELEMENT
      {
        if (node.nodeName == br)
          continue;

        if (w3c_slidy.has_class(node, "incremental")
             && w3c_slidy.okay_for_incremental(node.nodeName))
          return node;

        if (w3c_slidy.has_class(node.parentNode, "incremental")
             && !w3c_slidy.has_class(node, "non-incremental"))
          return node;
      }
    }

    return node;
  },

  previous_incremental_item: function (node) {
    var br = this.is_xhtml ? "br" : "BR";
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];

    for (;;)
    {
      node = w3c_slidy.previous_node(slide, node);

      if (node == null || node.parentNode == null)
        break;

      if (node.nodeType == 1)
      {
        if (node.nodeName == br)
          continue;

        if (w3c_slidy.has_class(node, "incremental")
             && w3c_slidy.okay_for_incremental(node.nodeName))
          return node;

        if (w3c_slidy.has_class(node.parentNode, "incremental")
             && !w3c_slidy.has_class(node, "non-incremental"))
          return node;
      }
    }

    return node;
  },

  // set visibility for all elements on current slide with
  // a parent element with attribute class="incremental"
  set_visibility_all_incremental: function (value) {
    var node = this.next_incremental_item(null);

    if (value == "hidden")
    {
      while (node)
      {
        w3c_slidy.add_class(node, "invisible");
        node = w3c_slidy.next_incremental_item(node);
      }
    }
    else // value == "visible"
    {
      while (node)
      {
        w3c_slidy.remove_class(node, "invisible");
        node = w3c_slidy.next_incremental_item(node);
      }
    }
  },

  // reveal the next hidden item on the slide
  // node is null or the node that was last revealed
  reveal_next_item: function (node) {
    node = w3c_slidy.next_incremental_item(node);

    if (node && node.nodeType == 1)  // an element
      w3c_slidy.remove_class(node, "invisible");

    return node;
  },

  // exact inverse of revealNextItem(node)
  hide_previous_item: function (node) {
    if (node && node.nodeType == 1)  // an element
      w3c_slidy.add_class(node, "invisible");

    return this.previous_incremental_item(node);
  },

  // left to right traversal of root's content
  next_node: function (root, node) {
    if (node == null)
      return root.firstChild;

    if (node.firstChild)
      return node.firstChild;

    if (node.nextSibling)
      return node.nextSibling;

    for (;;)
    {
      node = node.parentNode;

      if (!node || node == root)
        break;

      if (node && node.nextSibling)
        return node.nextSibling;
    }

    return null;
  },

  // right to left traversal of root's content
  previous_node: function (root, node) {
    if (node == null)
    {
      node = root.lastChild;

      if (node)
      {
        while (node.lastChild)
          node = node.lastChild;
      }

      return node;
    }

    if (node.previousSibling)
    {
      node = node.previousSibling;

      while (node.lastChild)
        node = node.lastChild;

      return node;
    }

    if (node.parentNode != root)
      return node.parentNode;

    return null;
  },

  previous_sibling_element: function (el) {
    el = el.previousSibling;

    while (el && el.nodeType != 1)
      el = el.previousSibling;

    return el;
  },

  next_sibling_element: function (el) {
    el = el.nextSibling;

    while (el && el.nodeType != 1)
      el = el.nextSibling;

    return el;
  },

  first_child_element: function (el) {
    var node;

    for (node = el.firstChild; node; node = node.nextSibling)
    {
      if (node.nodeType == 1)
        break;
    }

    return node;
  },

  first_tag: function (element, tag) {
    var node;

    if (!this.is_xhtml)
      tag = tag.toUpperCase();

    for (node = element.firstChild; node; node = node.nextSibling)
    {
      if (node.nodeType == 1 && node.nodeName == tag)
        break;
    }

    return node;
  },

  hide_selection: function () {
    if (window.getSelection) // Firefox, Chromium, Safari, Opera
    {
      var selection = window.getSelection();

      if (selection.rangeCount > 0)
      {
        var range = selection.getRangeAt(0);
        range.collapse (false);
      }
    }
    else // Internet Explorer
    {
      var textRange = document.selection.createRange ();
      textRange.collapse (false);
    }
  },

  get_selected_text: function () {
    try
    {
      if (window.getSelection)
        return window.getSelection().toString();

      if (document.getSelection)
        return document.getSelection().toString();

      if (document.selection)
        return document.selection.createRange().text;
    }
    catch (e)
    {
    }

    return "";
  },

  // make note of length of selected text
  // as this evaluates to zero in click event
  mouse_button_up: function (e) {
    w3c_slidy.selected_text_len = w3c_slidy.get_selected_text().length;
  },

  // right mouse button click is reserved for context menus
  // it is more reliable to detect rightclick than leftclick
  mouse_button_click: function (e) {
    var rightclick = false;
    var leftclick = false;
    var middleclick = false;
    var target;

    if (!e)
      var e = window.event;

    if (e.target)
      target = e.target;
    else if (e.srcElement)
      target = e.srcElement;

    // work around Safari bug
    if (target.nodeType == 3)
      target = target.parentNode;

    if (e.which) // all browsers except IE
    {
      leftclick = (e.which == 1);
      middleclick = (e.which == 2);
      rightclick = (e.which == 3);
    }
    else if (e.button)
    {
      // Konqueror gives 1 for left, 4 for middle
      // IE6 gives 0 for left and not 1 as I expected

      if (e.button == 4)
        middleclick = true;

      // all browsers agree on 2 for right button
      rightclick = (e.button == 2);
    }
    else leftclick = true;
/*
    alert("you clicked over a " + target.nodeName + " element\n" +
    "w3c_slidy.mouse_click_enabled = " + w3c_slidy.mouse_click_enabled + "\n" +
    "leftclick = " + leftclick + "\n" +
    "selected text length = " + w3c_slidy.selected_text_len);
    //alert("selected text length = " + w3c_slidy.selected_text_len);
*/
    if (w3c_slidy.selected_text_len > 0)
    {
      w3c_slidy.stop_propagation(e);
      e.cancel = true;
      e.returnValue = false;
      return false;
    }

    // dismiss table of contents
    w3c_slidy.hide_table_of_contents();

    // check if target is something that probably want's clicks
    // e.g. a, embed, object, input, textarea, select, option
    var tag = target.nodeName.toLowerCase();

    if (w3c_slidy.mouse_click_enabled && leftclick &&
        tag != "a" &&
        tag != "embed" &&
        tag != "object" &&
        tag != "video" &&
        tag != "input" &&
        tag != "textarea" &&
        tag != "select" &&
        tag != "option" &&
        !target.onclick)
    {
      w3c_slidy.next_slide(true);
      w3c_slidy.stop_propagation(e);
      e.cancel = true;
      e.returnValue = false;
      return false;
    }
  },

  get_key: function (e)
  {
    var key;

    // kludge around NS/IE differences
    if (typeof window.event != "undefined")
      key = window.event.keyCode;
    else if (e.which)
      key = e.which;

    return key;
  },

  get_target: function (e) {
    var target;

    if (!e)
      e = window.event;

    if (e.target)
      target = e.target;
    else if (e.srcElement)
      target = e.srcElement;

    if (target.nodeType != 1)
      target = target.parentNode;

    return target;
  },

  // does display property provide correct defaults?
  is_block: function (elem) {
    var tag = elem.nodeName.toLowerCase();

    return tag == "ol" || tag == "ul" || tag == "p" ||
           tag == "li" || tag == "table" || tag == "pre" ||
           tag == "h1" || tag == "h2" || tag == "h3" ||
           tag == "h4" || tag == "h5" || tag == "h6" ||
           tag == "blockquote" || tag == "address";
  },

  add_listener: function (element, event, handler) {
    if (window.addEventListener)
      element.addEventListener(event, handler, false);
    else
      element.attachEvent("on"+event, handler);
  },

  // used to prevent event propagation from field controls
  stop_propagation: function (event) {
    event = event ? event : window.event;
    event.cancelBubble = true;  // for IE

    if (event.stopPropagation)
      event.stopPropagation();

    return true;
  },

  cancel: function (event) {
    if (event)
    {
       event.cancel = true;
       event.returnValue = false;

      if (event.preventDefault)
        event.preventDefault();
    }

    w3c_slidy.key_wanted = false;
    return false;
  }
};

// for each language define an associative array
// and also the help text which is longer

var w3c_slidy_i18n = {
  strings_es: {
    "slide":"pág.",
    "help?":"Ayuda",
    "contents?":"Índice",
    "table of contents":"tabla de contenidos",
    "Table of Contents":"Tabla de Contenidos",
    "restart presentation":"Reiniciar presentación",
    "restart?":"Inicio"
  },
  help_es:
    "Utilice el ratón, barra espaciadora, teclas Izda/Dcha, " +
    "o Re pág y Av pág. Use S y B para cambiar el tamaño de fuente.",

  strings_ca: {
    "slide":"pàg..",
    "help?":"Ajuda",
    "contents?":"Índex",
    "table of contents":"taula de continguts",
    "Table of Contents":"Taula de Continguts",
    "restart presentation":"Reiniciar presentació",
    "restart?":"Inici"
  },
  help_ca:
    "Utilitzi el ratolí, barra espaiadora, tecles Esq./Dta. " +
    "o Re pàg y Av pàg. Usi S i B per canviar grandària de font.",

  strings_cs: {
    "slide":"snímek",
    "help?":"nápověda",
    "contents?":"obsah",
    "table of contents":"obsah prezentace",
    "Table of Contents":"Obsah prezentace",
    "restart presentation":"znovu spustit prezentaci",
    "restart?":"restart"
  },
  help_cs:
    "Prezentaci můžete procházet pomocí kliknutí myši, mezerníku, " +
    "šipek vlevo a vpravo nebo kláves PageUp a PageDown. Písmo se " +
    "dá zvětšit a zmenšit pomocí kláves B a S.",

  strings_nl: {
    "slide":"pagina",
    "help?":"Help?",
    "contents?":"Inhoud?",
    "table of contents":"inhoudsopgave",
    "Table of Contents":"Inhoudsopgave",
    "restart presentation":"herstart presentatie",
    "restart?":"Herstart?"
  },
  help_nl:
     "Navigeer d.m.v. het muis, spatiebar, Links/Rechts toetsen, " +
     "of PgUp en PgDn. Gebruik S en B om de karaktergrootte te veranderen.",

  strings_de: {
    "slide":"Seite",
    "help?":"Hilfe",
    "contents?":"Übersicht",
    "table of contents":"Inhaltsverzeichnis",
    "Table of Contents":"Inhaltsverzeichnis",
    "restart presentation":"Präsentation neu starten",
    "restart?":"Neustart"
  },
  help_de:
    "Benutzen Sie die Maus, Leerschlag, die Cursortasten links/rechts oder " +
    "Page up/Page Down zum Wechseln der Seiten und S und B für die Schriftgrösse.",

  strings_pl: {
    "slide":"slajd",
    "help?":"pomoc?",
    "contents?":"spis treści?",
    "table of contents":"spis treści",
    "Table of Contents":"Spis Treści",
    "restart presentation":"Restartuj prezentację",
    "restart?":"restart?"
  },
  help_pl:
    "Zmieniaj slajdy klikając myszą, naciskając spację, strzałki lewo/prawo" +
    "lub PgUp / PgDn. Użyj klawiszy S i B, aby zmienić rozmiar czczionki.",

  strings_fr: {
    "slide":"page",
    "help?":"Aide",
    "contents?":"Index",
    "table of contents":"table des matières",
    "Table of Contents":"Table des matières",
    "restart presentation":"Recommencer l'exposé",
    "restart?":"Début"
  },
  help_fr:
    "Naviguez avec la souris, la barre d'espace, les flèches " +
    "gauche/droite ou les touches Pg Up, Pg Dn. Utilisez " +
    "les touches S et B pour modifier la taille de la police.",

  strings_hu: {
    "slide":"oldal",
    "help?":"segítség",
    "contents?":"tartalom",
    "table of contents":"tartalomjegyzék",
    "Table of Contents":"Tartalomjegyzék",
    "restart presentation":"bemutató újraindítása",
    "restart?":"újraindítás"
  },
  help_hu:
    "Az oldalak közti lépkedéshez kattintson az egérrel, vagy " +
    "használja a szóköz, a bal, vagy a jobb nyíl, illetve a Page Down, " +
    "Page Up billentyűket. Az S és a B billentyűkkel változtathatja " +
    "a szöveg méretét.",

  strings_it: {
    "slide":"pag.",
    "help?":"Aiuto",
    "contents?":"Indice",
    "table of contents":"indice",
    "Table of Contents":"Indice",
    "restart presentation":"Ricominciare la presentazione",
    "restart?":"Inizio"
  },
  help_it:
    "Navigare con mouse, barra spazio, frecce sinistra/destra o " +
    "PgUp e PgDn. Usare S e B per cambiare la dimensione dei caratteri.",

  strings_el: {
    "slide":"σελίδα",
    "help?":"βοήθεια;",
    "contents?":"περιεχόμενα;",
    "table of contents":"πίνακας περιεχομένων",
    "Table of Contents":"Πίνακας Περιεχομένων",
    "restart presentation":"επανεκκίνηση παρουσίασης",
    "restart?":"επανεκκίνηση;"
  },
  help_el:
    "Πλοηγηθείτε με το κλίκ του ποντικιού, το space, τα βέλη αριστερά/δεξιά, " +
    "ή Page Up και Page Down. Χρησιμοποιήστε τα πλήκτρα S και B για να αλλάξετε " +
    "το μέγεθος της γραμματοσειράς.",

  strings_ja: {
    "slide":"スライド",
    "help?":"ヘルプ",
    "contents?":"目次",
    "table of contents":"目次を表示",
    "Table of Contents":"目次",
    "restart presentation":"最初から再生",
    "restart?":"最初から"
  },
  help_ja:
     "マウス左クリック ・ スペース ・ 左右キー " +
     "または Page Up ・ Page Downで操作， S ・ Bでフォントサイズ変更",

  strings_zh: {
    "slide":"幻灯片",
    "help?":"帮助?",
    "contents?":"内容?",
    "table of contents":"目录",
    "Table of Contents":"目录",
    "restart presentation":"重新启动展示",
    "restart?":"重新启动?"
  },
  help_zh:
    "用鼠标点击, 空格条, 左右箭头, Pg Up 和 Pg Dn 导航. " +
    "用 S, B 改变字体大小.",

  strings_ru: {
    "slide":"слайд",
    "help?":"помощь?",
    "contents?":"содержание?",
    "table of contents":"оглавление",
    "Table of Contents":"Оглавление",
    "restart presentation":"перезапустить презентацию",
    "restart?":"перезапуск?"
  },
  help_ru:
    "Перемещайтесь кликая мышкой, используя клавишу пробел, стрелки" +
    "влево/вправо или Pg Up и Pg Dn. Клавиши S и B меняют размер шрифта.",

  strings_sv: {
    "slide":"sida",
    "help?":"hjälp",
    "contents?":"innehåll",
    "table of contents":"innehållsförteckning",
    "Table of Contents":"Innehållsförteckning",
    "restart presentation":"visa presentationen från början",
    "restart?":"börja om"
  },
  help_sv:
    "Bläddra med ett klick med vänstra musknappen, mellanslagstangenten, " +
    "vänster- och högerpiltangenterna eller tangenterna Pg Up, Pg Dn. " +
    "Använd tangenterna S och B för att ändra textens storlek.",

// each such language array is declared in the localize array
// which is set on string prototype and used as in "foo".localize();
  localize: {
    "es":this.strings_es,
    "ca":this.strings_ca,
    "cs":this.strings_cs,
    "nl":this.strings_nl,
    "de":this.strings_de,
    "pl":this.strings_pl,
    "fr":this.strings_fr,
    "hu":this.strings_hu,
    "it":this.strings_it,
    "el":this.strings_el,
    "jp":this.strings_ja,
    "zh":this.strings_zh,
    "ru":this.strings_ru,
    "sv":this.strings_sv
  },

  init: function () {
    var i18n = w3c_slidy_i18n;
    var help_text = w3c_slidy.help_text;
    i18n.strings_es[help_text] = i18n.help_es;
    i18n.strings_ca[help_text] = i18n.help_ca;
    i18n.strings_cs[help_text] = i18n.help_cs;
    i18n.strings_nl[help_text] = i18n.help_nl;
    i18n.strings_de[help_text] = i18n.help_de;
    i18n.strings_pl[help_text] = i18n.help_pl;
    i18n.strings_fr[help_text] = i18n.help_fr;
    i18n.strings_hu[help_text] = i18n.help_hu;
    i18n.strings_it[help_text] = i18n.help_it;
    i18n.strings_el[help_text] = i18n.help_el;
    i18n.strings_ja[help_text] = i18n.help_ja;
    i18n.strings_zh[help_text] = i18n.help_zh;
    i18n.strings_ru[help_text] = i18n.help_ru;
    i18n.strings_sv[help_text] = i18n.help_sv;

    w3c_slidy.lang = document.body.parentNode.getAttribute("lang");

    if (!w3c_slidy.lang)
      w3c_slidy.lang = document.body.parentNode.getAttribute("xml:lang");

    if (!w3c_slidy.lang)
      w3c_slidy.lang = "en";

    // add localize method to all strings
    // for use as in "contents".localize()
   String.prototype.localize = function() {
     if (this == "")
       return this;

     // try full language code, e.g. en-US
     var s, lookup = w3c_slidy_i18n.localize[w3c_slidy.lang];

     if (lookup)
     {
       s = lookup[this];

       if (s)
        return s;
     }

     // strip country code suffix, e.g.
     // try en if undefined for en-US
     var lg = w3c_slidy.lang.split("-");

     if (lg.length > 1)
     {
       lookup = w3c_slidy_i18n.localize[lg[0]];

       if (lookup)
       {
         s = lookup[this];

         if (s)
          return s;
       }
     }

     // otherwise string as is
     return this;
   };
  }
};

// hack for back button behavior
if (w3c_slidy.ie6 || w3c_slidy.ie7)
{
  document.write("<iframe id='historyFrame' " +
  "src='javascript:\"<html"+"></"+"html>\"' " +
  "height='1' width='1' " +
  "style='position:absolute;left:-800px'></iframe>");
}

// attach event listeners for initialization
w3c_slidy.set_up();

// hide the slides as soon as body element is available
// to reduce annoying screen mess before the onload event
setTimeout(w3c_slidy.hide_slides, 50);

/*]]>*/
</script>
</head>
<body class="article">
<div id="header" class="slide">
<h1>Master programming. <br> Лекция №10 (Паттерны проектирования)</h1>
<span id="author">Игорь Шаронов</span><br />
<span id="revdate">2021-11-02</span>
</div>
</div></div>
<div class="sect1 slide">
<h1 id="_история_и_классификация_паттернов_проектирования">1. История и классификация паттернов проектирования</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_что_такое_паттерн_проектирования">1.1. Что такое паттерн проектирования?</h1>

<div class="sectionbody">
<ul class="">
<li>
<span>
Часто встречающееся решение определённой проблемы при проектировании архитектуры программ
</span>
</li>
<li>
<span>
Способы организации взаимодействия данных (отличие от алгоритма)
</span>
</li>
<li>
<span>
Пример самого распространённого паттерна (идиома)&#8201;&#8212;&#8201;ООП
</span>
</li>
<li>
<span>
Идея пришла от дизайнера городов (1977г.)
</span>
</li>
<li>
<span>
1995г.&#8201;&#8212;&#8201;GOF book
</span>
</li>
<li>
<span>
Проверенные решения проектирования
</span>
</li>
<li>
<span>
Словарь для общения
</span>
</li>
</ul>
</div></div>
<div class="sect2 slide">
<h1 id="_классификация_паттернов">1.2. Классификация паттернов</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="33%" />
<col width="33%" />
<thead>
<tr>
<th align="left" valign="top"> Порождающие </th>
<th align="left" valign="top"> Структурные </th>
<th align="left" valign="top"> Поведенческие</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Factory method
</span>
</li>
<li>
<span>
Abstract factory
</span>
</li>
<li>
<span>
Builder
</span>
</li>
<li>
<span>
Prototype
</span>
</li>
<li>
<span>
Singleton
</span>
</li>
</ul></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Adapter
</span>
</li>
<li>
<span>
Bridge
</span>
</li>
<li>
<span>
Composite
</span>
</li>
<li>
<span>
Decorator
</span>
</li>
<li>
<span>
Facade
</span>
</li>
<li>
<span>
Flyweight
</span>
</li>
<li>
<span>
Proxy
</span>
</li>
</ul></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Chain of responsibility
</span>
</li>
<li>
<span>
Command
</span>
</li>
<li>
<span>
Iterator
</span>
</li>
<li>
<span>
Mediator
</span>
</li>
<li>
<span>
Memento
</span>
</li>
<li>
<span>
Observer
</span>
</li>
<li>
<span>
State
</span>
</li>
<li>
<span>
Strategy
</span>
</li>
<li>
<span>
Template method
</span>
</li>
<li>
<span>
Visitor
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Источник: <a href="https://refactoring.guru/ru">https://refactoring.guru/ru</a></p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_обозначения_uml">1.3. Обозначения UML</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.3 (0)
 -->
<!-- Pages: 1 -->
<svg width="763pt" height="560pt"
 viewBox="0.00 0.00 763.00 560.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 556)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-556 759,-556 759,4 -4,4"/>
<!-- Class -->
<g id="node1" class="node">
<title>Class</title>
<text text-anchor="start" x="37.5" y="-531" font-family="Times,serif" font-size="20.00">(C) Имя класса &lt;шаблонный_тип&gt;</text>
<text text-anchor="start" x="5.5" y="-503" font-family="Times,serif" font-size="20.00">+ открытая_переменная: тип</text>
<text text-anchor="start" x="5.5" y="-475" font-family="Times,serif" font-size="20.00">&#45; закрытая_переменная</text>
<text text-anchor="start" x="5.5" y="-447" font-family="Times,serif" font-size="20.00"># защищённая_переменная</text>
<text text-anchor="start" x="5.5" y="-419" font-family="Times,serif" font-size="20.00">$ статичная_переменная</text>
<text text-anchor="start" x="5.5" y="-391" font-family="Times,serif" font-size="20.00">+ открытый_метод(): возвращаемый_тип</text>
<text text-anchor="start" x="5.5" y="-363" font-family="Times,serif" font-size="20.00">&#45; закрытый_метод()</text>
<text text-anchor="start" x="5.5" y="-335" font-family="Times,serif" font-size="20.00"># защищённый_метод()</text>
<text text-anchor="start" x="5.5" y="-307" font-family="Times,serif" font-size="20.00">$ статичный_метод()</text>
<polygon fill="black" stroke="black" points="0.5,-522 0.5,-522 445.5,-522 445.5,-522 0.5,-522"/>
<polygon fill="black" stroke="black" points="0.5,-410 0.5,-410 445.5,-410 445.5,-410 0.5,-410"/>
<polygon fill="none" stroke="black" points="0,-296 0,-552 445,-552 445,-296 0,-296"/>
</g>
<!-- Interface -->
<g id="node2" class="node">
<title>Interface</title>
<text text-anchor="start" x="549.5" y="-475" font-family="Times,serif" font-size="20.00">(I) Интерфейс</text>
<text text-anchor="start" x="497.5" y="-447" font-family="Times,serif" font-size="20.00">+ метод1()</text>
<text text-anchor="start" x="497.5" y="-419" font-family="Times,serif" font-size="20.00">+ метод2()</text>
<text text-anchor="start" x="497.5" y="-391" font-family="Times,serif" font-size="20.00">метод3()</text>
<text text-anchor="start" x="497.5" y="-363" font-family="Times,serif" font-size="20.00">@ абстрактный_метод()</text>
<polygon fill="black" stroke="black" points="492.5,-466 492.5,-466 755.5,-466 755.5,-466 492.5,-466"/>
<polygon fill="none" stroke="black" points="492,-352 492,-496 755,-496 755,-352 492,-352"/>
</g>
<!-- Class&#45;&gt;Interface -->
<!-- A -->
<g id="node3" class="node">
<title>A</title>
<polygon fill="none" stroke="black" points="182.5,-259 128.5,-259 128.5,-223 182.5,-223 182.5,-259"/>
<text text-anchor="middle" x="155.5" y="-236" font-family="Times,serif" font-size="20.00">A</text>
</g>
<!-- Class&#45;&gt;A -->
<!-- B -->
<g id="node4" class="node">
<title>B</title>
<polygon fill="none" stroke="black" points="662.5,-259 608.5,-259 608.5,-223 662.5,-223 662.5,-259"/>
<text text-anchor="middle" x="635.5" y="-236" font-family="Times,serif" font-size="20.00">B</text>
</g>
<!-- Interface&#45;&gt;B -->
<!-- A&#45;&gt;B -->
<g id="edge1" class="edge">
<title>A&#45;&gt;B</title>
<path fill="none" stroke="black" d="M182.68,-241C263.94,-241 505.11,-241 598.23,-241"/>
<polygon fill="none" stroke="black" points="598.32,-244.5 608.32,-241 598.32,-237.5 598.32,-244.5"/>
<text text-anchor="middle" x="395.5" y="-272" font-family="Times,serif" font-size="20.00">Наследование A от B</text>
<text text-anchor="middle" x="395.5" y="-250" font-family="Times,serif" font-size="20.00">(стрелка указывает на базовый класс)</text>
</g>
<!-- A&#45;&gt;B -->
<!-- A&#45;&gt;B -->
<!-- C -->
<g id="node5" class="node">
<title>C</title>
<polygon fill="none" stroke="black" points="143.5,-186 89.5,-186 89.5,-150 143.5,-150 143.5,-186"/>
<text text-anchor="middle" x="116.5" y="-163" font-family="Times,serif" font-size="20.00">C</text>
</g>
<!-- A&#45;&gt;C -->
<!-- D -->
<g id="node6" class="node">
<title>D</title>
<polygon fill="none" stroke="black" points="675.5,-186 621.5,-186 621.5,-150 675.5,-150 675.5,-186"/>
<text text-anchor="middle" x="648.5" y="-163" font-family="Times,serif" font-size="20.00">D</text>
</g>
<!-- B&#45;&gt;D -->
<!-- C&#45;&gt;D -->
<g id="edge6" class="edge">
<title>C&#45;&gt;D</title>
<path fill="none" stroke="black" d="M143.61,-168C231.13,-168 506.37,-168 609.22,-168"/>
<polygon fill="none" stroke="black" points="609.44,-168 615.44,-164 621.44,-168 615.44,-172 609.44,-168"/>
<text text-anchor="middle" x="382.5" y="-199" font-family="Times,serif" font-size="20.00">Аггрегирование: C использует D</text>
<text text-anchor="middle" x="382.5" y="-177" font-family="Times,serif" font-size="20.00">(время жизни у обоих может быть разным)</text>
</g>
<!-- C&#45;&gt;D -->
<!-- C&#45;&gt;D -->
<!-- E -->
<g id="node7" class="node">
<title>E</title>
<polygon fill="none" stroke="black" points="210.5,-113 156.5,-113 156.5,-77 210.5,-77 210.5,-113"/>
<text text-anchor="middle" x="183.5" y="-90" font-family="Times,serif" font-size="20.00">E</text>
</g>
<!-- C&#45;&gt;E -->
<!-- F -->
<g id="node8" class="node">
<title>F</title>
<polygon fill="none" stroke="black" points="652.5,-113 598.5,-113 598.5,-77 652.5,-77 652.5,-113"/>
<text text-anchor="middle" x="625.5" y="-90" font-family="Times,serif" font-size="20.00">F</text>
</g>
<!-- D&#45;&gt;F -->
<!-- E&#45;&gt;F -->
<g id="edge11" class="edge">
<title>E&#45;&gt;F</title>
<path fill="none" stroke="black" d="M210.82,-95C286.34,-95 498.19,-95 586.3,-95"/>
<polygon fill="black" stroke="black" points="586.37,-95 592.37,-91 598.37,-95 592.37,-99 586.37,-95"/>
<text text-anchor="middle" x="404.5" y="-126" font-family="Times,serif" font-size="20.00">Композиция: F принадлежит E</text>
<text text-anchor="middle" x="404.5" y="-104" font-family="Times,serif" font-size="20.00">(время жизни у обоих одинаковое)</text>
</g>
<!-- E&#45;&gt;F -->
<!-- E&#45;&gt;F -->
<!-- G -->
<g id="node9" class="node">
<title>G</title>
<polygon fill="none" stroke="black" points="238.5,-40 184.5,-40 184.5,-4 238.5,-4 238.5,-40"/>
<text text-anchor="middle" x="211.5" y="-17" font-family="Times,serif" font-size="20.00">G</text>
</g>
<!-- E&#45;&gt;G -->
<!-- H -->
<g id="node10" class="node">
<title>H</title>
<polygon fill="none" stroke="black" points="642.5,-40 588.5,-40 588.5,-4 642.5,-4 642.5,-40"/>
<text text-anchor="middle" x="615.5" y="-17" font-family="Times,serif" font-size="20.00">H</text>
</g>
<!-- F&#45;&gt;H -->
<!-- G&#45;&gt;H -->
<g id="edge16" class="edge">
<title>G&#45;&gt;H</title>
<path fill="none" stroke="black" d="M238.63,-22C308.5,-22 494.76,-22 576.33,-22"/>
<polygon fill="black" stroke="black" points="576.48,-22 582.48,-18 588.48,-22 582.48,-26 576.48,-22"/>
<text text-anchor="middle" x="413.5" y="-31" font-family="Times,serif" font-size="20.00">G содержит массив объектов H</text>
<text text-anchor="middle" x="573.48" y="-6" font-family="Times,serif" font-size="20.00">1+</text>
</g>
<!-- G&#45;&gt;H -->
</g>
</svg></div>
</div></div></td>
<td align="left" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="752px" preserveAspectRatio="none" style="width:894px;height:752px;background:#FFFFFF;" version="1.1" viewBox="0 0 894 752" width="894px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pazvmfe4925p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[009d242a51c8446778fc8dced15dd734]
class ИмяКласса--><rect codeLine="1" fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="282.8125" id="ИмяКласса" style="stroke:#A80036;stroke-width:1.5;" width="497" x="9" y="11.2168"/><ellipse cx="107" cy="28.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M110.0625,35.2949 Q109.375,35.6543 108.625,35.8262 Q107.875,35.998 107.0469,35.998 Q104.0938,35.998 102.5313,34.0605 Q100.9844,32.1074 100.9844,28.4355 Q100.9844,24.7637 102.5313,22.8262 Q104.0938,20.873 107.0469,20.873 Q107.875,20.873 108.625,21.0449 Q109.3906,21.2168 110.0625,21.5762 L110.0625,24.7793 Q109.3125,24.0918 108.6094,23.7793 Q107.9219,23.4668 107.1719,23.4668 Q105.5938,23.4668 104.7813,24.7168 Q103.9844,25.9668 103.9844,28.4355 Q103.9844,30.9043 104.7813,32.1543 Q105.5938,33.4043 107.1719,33.4043 Q107.9219,33.4043 108.6094,33.0918 Q109.3125,32.7793 110.0625,32.0918 L110.0625,35.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="115" x="129" y="35.1406">ИмяКласса</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="175" x="334" y="8.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="173" x="335" y="27.7813">Шаблонный_тип</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="505" y1="45.2168" y2="45.2168"/><ellipse cx="20" cy="83.498" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="178" x="30" y="95.0625">переменная: тип</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="17" y="103.7793"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="236" x="30" y="118.3438">закрытая_переменная</text><polygon fill="none" points="20,125.0605,24,129.0605,20,133.0605,16,129.0605" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="272" x="30" y="141.625">защищённая_переменная</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="268" x="30" y="164.9063">статическая_переменная</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="10" x2="151" y1="64.8574" y2="64.8574"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="213" x="151" y="71.2813">Секция переменных</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="364" x2="505" y1="64.8574" y2="64.8574"/><ellipse cx="20" cy="203.9043" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="470" x="30" y="215.4688">открытый_метод(): возвращаемое_значение</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="17" y="224.1855"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="30" y="238.75">закрытый_метод()</text><polygon fill="#FFFF44" points="20,245.4668,24,249.4668,20,253.4668,16,249.4668" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="231" x="30" y="262.0313">защищённый_метод()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="205" x="30" y="285.3125">статичный_метод()</text><line style="stroke:#A80036;stroke-width:1.5;" x1="10" x2="171.5" y1="185.2637" y2="185.2637"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="172" x="171.5" y="191.6875">Секция методов</text><line style="stroke:#A80036;stroke-width:1.5;" x1="343.5" x2="505" y1="185.2637" y2="185.2637"/><!--MD5=[6771e4435bc4beeebaa4bf33745fa976]
class Интерфейс--><rect codeLine="14" fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="143.125" id="Интерфейс" style="stroke:#A80036;stroke-width:1.5;" width="241" x="639" y="81.2168"/><ellipse cx="696" cy="98.2168" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M691.1875,93.6699 L691.1875,91.1387 L699.8594,91.1387 L699.8594,93.6699 L696.9688,93.6699 L696.9688,103.1699 L699.8594,103.1699 L699.8594,105.7168 L691.1875,105.7168 L691.1875,103.1699 L694.0781,103.1699 L694.0781,93.6699 L691.1875,93.6699 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="118" x="718" y="105.1406">Интерфейс</text><line style="stroke:#A80036;stroke-width:1.5;" x1="640" x2="879" y1="115.2168" y2="115.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="640" x2="879" y1="123.2168" y2="123.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="645" y="145.7813">метод1()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="645" y="169.0625">метод2()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="645" y="192.3438">метод3()</text><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="229" x="645" y="215.625">абстрактный_метод()</text><!--MD5=[a46ee5ce0ceb0380cf446a08a056dce4]
class A--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="A" style="stroke:#A80036;stroke-width:1.5;" width="48" x="233.5" y="355.2168"/><ellipse cx="249.5" cy="372.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M252.5625,379.2949 Q251.875,379.6543 251.125,379.8262 Q250.375,379.998 249.5469,379.998 Q246.5938,379.998 245.0313,378.0605 Q243.4844,376.1074 243.4844,372.4355 Q243.4844,368.7637 245.0313,366.8262 Q246.5938,364.873 249.5469,364.873 Q250.375,364.873 251.125,365.0449 Q251.8906,365.2168 252.5625,365.5762 L252.5625,368.7793 Q251.8125,368.0918 251.1094,367.7793 Q250.4219,367.4668 249.6719,367.4668 Q248.0938,367.4668 247.2813,368.7168 Q246.4844,369.9668 246.4844,372.4355 Q246.4844,374.9043 247.2813,376.1543 Q248.0938,377.4043 249.6719,377.4043 Q250.4219,377.4043 251.1094,377.0918 Q251.8125,376.7793 252.5625,376.0918 L252.5625,379.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="14" x="264.5" y="379.1406">A</text><line style="stroke:#A80036;stroke-width:1.5;" x1="234.5" x2="280.5" y1="389.2168" y2="389.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="234.5" x2="280.5" y1="397.2168" y2="397.2168"/><!--MD5=[69c451c751c414e37549b782190fef46]
class B--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="B" style="stroke:#A80036;stroke-width:1.5;" width="48" x="735.5" y="355.2168"/><ellipse cx="751.5" cy="372.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M754.5625,379.2949 Q753.875,379.6543 753.125,379.8262 Q752.375,379.998 751.5469,379.998 Q748.5938,379.998 747.0313,378.0605 Q745.4844,376.1074 745.4844,372.4355 Q745.4844,368.7637 747.0313,366.8262 Q748.5938,364.873 751.5469,364.873 Q752.375,364.873 753.125,365.0449 Q753.8906,365.2168 754.5625,365.5762 L754.5625,368.7793 Q753.8125,368.0918 753.1094,367.7793 Q752.4219,367.4668 751.6719,367.4668 Q750.0938,367.4668 749.2813,368.7168 Q748.4844,369.9668 748.4844,372.4355 Q748.4844,374.9043 749.2813,376.1543 Q750.0938,377.4043 751.6719,377.4043 Q752.4219,377.4043 753.1094,377.0918 Q753.8125,376.7793 754.5625,376.0918 L754.5625,379.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="14" x="766.5" y="379.1406">B</text><line style="stroke:#A80036;stroke-width:1.5;" x1="736.5" x2="782.5" y1="389.2168" y2="389.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="736.5" x2="782.5" y1="397.2168" y2="397.2168"/><!--MD5=[378b18254a1b2429f435e93f5e5cc50c]
class C--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="C" style="stroke:#A80036;stroke-width:1.5;" width="48" x="233.5" y="466.2168"/><ellipse cx="249.5" cy="483.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M252.5625,490.2949 Q251.875,490.6543 251.125,490.8262 Q250.375,490.998 249.5469,490.998 Q246.5938,490.998 245.0313,489.0605 Q243.4844,487.1074 243.4844,483.4355 Q243.4844,479.7637 245.0313,477.8262 Q246.5938,475.873 249.5469,475.873 Q250.375,475.873 251.125,476.0449 Q251.8906,476.2168 252.5625,476.5762 L252.5625,479.7793 Q251.8125,479.0918 251.1094,478.7793 Q250.4219,478.4668 249.6719,478.4668 Q248.0938,478.4668 247.2813,479.7168 Q246.4844,480.9668 246.4844,483.4355 Q246.4844,485.9043 247.2813,487.1543 Q248.0938,488.4043 249.6719,488.4043 Q250.4219,488.4043 251.1094,488.0918 Q251.8125,487.7793 252.5625,487.0918 L252.5625,490.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="14" x="264.5" y="490.1406">C</text><line style="stroke:#A80036;stroke-width:1.5;" x1="234.5" x2="280.5" y1="500.2168" y2="500.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="234.5" x2="280.5" y1="508.2168" y2="508.2168"/><!--MD5=[69b356fec5e4f53d7535011b6fc9d60b]
class D--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="D" style="stroke:#A80036;stroke-width:1.5;" width="49" x="735" y="466.2168"/><ellipse cx="751" cy="483.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M754.0625,490.2949 Q753.375,490.6543 752.625,490.8262 Q751.875,490.998 751.0469,490.998 Q748.0938,490.998 746.5313,489.0605 Q744.9844,487.1074 744.9844,483.4355 Q744.9844,479.7637 746.5313,477.8262 Q748.0938,475.873 751.0469,475.873 Q751.875,475.873 752.625,476.0449 Q753.3906,476.2168 754.0625,476.5762 L754.0625,479.7793 Q753.3125,479.0918 752.6094,478.7793 Q751.9219,478.4668 751.1719,478.4668 Q749.5938,478.4668 748.7813,479.7168 Q747.9844,480.9668 747.9844,483.4355 Q747.9844,485.9043 748.7813,487.1543 Q749.5938,488.4043 751.1719,488.4043 Q751.9219,488.4043 752.6094,488.0918 Q753.3125,487.7793 754.0625,487.0918 L754.0625,490.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="15" x="766" y="490.1406">D</text><line style="stroke:#A80036;stroke-width:1.5;" x1="736" x2="783" y1="500.2168" y2="500.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="736" x2="783" y1="508.2168" y2="508.2168"/><!--MD5=[54d0f7ca6f9898010b87b67e67e7a5e0]
class E--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="E" style="stroke:#A80036;stroke-width:1.5;" width="47" x="198" y="577.2168"/><ellipse cx="214" cy="594.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M217.0625,601.2949 Q216.375,601.6543 215.625,601.8262 Q214.875,601.998 214.0469,601.998 Q211.0938,601.998 209.5313,600.0605 Q207.9844,598.1074 207.9844,594.4355 Q207.9844,590.7637 209.5313,588.8262 Q211.0938,586.873 214.0469,586.873 Q214.875,586.873 215.625,587.0449 Q216.3906,587.2168 217.0625,587.5762 L217.0625,590.7793 Q216.3125,590.0918 215.6094,589.7793 Q214.9219,589.4668 214.1719,589.4668 Q212.5938,589.4668 211.7813,590.7168 Q210.9844,591.9668 210.9844,594.4355 Q210.9844,596.9043 211.7813,598.1543 Q212.5938,599.4043 214.1719,599.4043 Q214.9219,599.4043 215.6094,599.0918 Q216.3125,598.7793 217.0625,598.0918 L217.0625,601.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="229" y="601.1406">E</text><line style="stroke:#A80036;stroke-width:1.5;" x1="199" x2="244" y1="611.2168" y2="611.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="199" x2="244" y1="619.2168" y2="619.2168"/><!--MD5=[cc7353c6743ff8a5cd46192e652143fd]
class F--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="F" style="stroke:#A80036;stroke-width:1.5;" width="46" x="749.5" y="577.2168"/><ellipse cx="765.5" cy="594.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M768.5625,601.2949 Q767.875,601.6543 767.125,601.8262 Q766.375,601.998 765.5469,601.998 Q762.5938,601.998 761.0313,600.0605 Q759.4844,598.1074 759.4844,594.4355 Q759.4844,590.7637 761.0313,588.8262 Q762.5938,586.873 765.5469,586.873 Q766.375,586.873 767.125,587.0449 Q767.8906,587.2168 768.5625,587.5762 L768.5625,590.7793 Q767.8125,590.0918 767.1094,589.7793 Q766.4219,589.4668 765.6719,589.4668 Q764.0938,589.4668 763.2813,590.7168 Q762.4844,591.9668 762.4844,594.4355 Q762.4844,596.9043 763.2813,598.1543 Q764.0938,599.4043 765.6719,599.4043 Q766.4219,599.4043 767.1094,599.0918 Q767.8125,598.7793 768.5625,598.0918 L768.5625,601.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="12" x="780.5" y="601.1406">F</text><line style="stroke:#A80036;stroke-width:1.5;" x1="750.5" x2="794.5" y1="611.2168" y2="611.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="750.5" x2="794.5" y1="619.2168" y2="619.2168"/><!--MD5=[4cac391c179f8787f20d7dddb517ad5a]
class G--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="G" style="stroke:#A80036;stroke-width:1.5;" width="50" x="380.5" y="688.2168"/><ellipse cx="396.5" cy="705.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M399.5625,712.2949 Q398.875,712.6543 398.125,712.8262 Q397.375,712.998 396.5469,712.998 Q393.5938,712.998 392.0313,711.0605 Q390.4844,709.1074 390.4844,705.4355 Q390.4844,701.7637 392.0313,699.8262 Q393.5938,697.873 396.5469,697.873 Q397.375,697.873 398.125,698.0449 Q398.8906,698.2168 399.5625,698.5762 L399.5625,701.7793 Q398.8125,701.0918 398.1094,700.7793 Q397.4219,700.4668 396.6719,700.4668 Q395.0938,700.4668 394.2813,701.7168 Q393.4844,702.9668 393.4844,705.4355 Q393.4844,707.9043 394.2813,709.1543 Q395.0938,710.4043 396.6719,710.4043 Q397.4219,710.4043 398.1094,710.0918 Q398.8125,709.7793 399.5625,709.0918 L399.5625,712.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="16" x="411.5" y="712.1406">G</text><line style="stroke:#A80036;stroke-width:1.5;" x1="381.5" x2="429.5" y1="722.2168" y2="722.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="381.5" x2="429.5" y1="730.2168" y2="730.2168"/><!--MD5=[c7caf5ef47bfcf7ce2ac54592a280705]
class H--><rect fill="#FEFECE" filter="url(#f1pazvmfe4925p)" height="50" id="H" style="stroke:#A80036;stroke-width:1.5;" width="49" x="717" y="688.2168"/><ellipse cx="733" cy="705.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M736.0625,712.2949 Q735.375,712.6543 734.625,712.8262 Q733.875,712.998 733.0469,712.998 Q730.0938,712.998 728.5313,711.0605 Q726.9844,709.1074 726.9844,705.4355 Q726.9844,701.7637 728.5313,699.8262 Q730.0938,697.873 733.0469,697.873 Q733.875,697.873 734.625,698.0449 Q735.3906,698.2168 736.0625,698.5762 L736.0625,701.7793 Q735.3125,701.0918 734.6094,700.7793 Q733.9219,700.4668 733.1719,700.4668 Q731.5938,700.4668 730.7813,701.7168 Q729.9844,702.9668 729.9844,705.4355 Q729.9844,707.9043 730.7813,709.1543 Q731.5938,710.4043 733.1719,710.4043 Q733.9219,710.4043 734.6094,710.0918 Q735.3125,709.7793 736.0625,709.0918 L736.0625,712.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="15" x="748" y="712.1406">H</text><line style="stroke:#A80036;stroke-width:1.5;" x1="718" x2="765" y1="722.2168" y2="722.2168"/><line style="stroke:#A80036;stroke-width:1.5;" x1="718" x2="765" y1="730.2168" y2="730.2168"/><!--MD5=[45d5d798b95452425dc61eb5d99ea142]
link ИмяКласса to A--><!--MD5=[9e0d9c175a9a95d837df7026182decc4]
link Интерфейс to B--><!--MD5=[e1650921a81fac0037ec207a42ac4e7e]
link A to C--><!--MD5=[635162b0568dccf9b81699e51957888e]
link B to D--><!--MD5=[311cdee09890d755c451d6c721b78759]
link C to E--><!--MD5=[b5b953319cf24ea105ede322ce2bfc63]
link D to F--><!--MD5=[c292c5013b997eb05138a2a059cde293]
link E to G--><!--MD5=[8bbb699108e68dcb8edb38564281e319]
link F to H--><!--MD5=[5e2eec62a50b26b6b0db6c12e4ee289c]
link A to B--><path codeLine="30" d="M281.71,380.2168 C360.81,380.2168 612.41,380.2168 715.15,380.2168 " fill="none" id="A-to-B" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="715.24,373.2168,735.24,380.2168,715.24,387.2168,715.24,373.2168" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="399" y="348.7813">наследование A от B</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="405" x="306" y="372.0625">(стрелка указывает на базовый класс)</text><!--MD5=[95ca888c4bb7ed1df160562281720a5c]
link C to D--><path codeLine="32" d="M281.71,491.2168 C362.54,491.2168 623.5,491.2168 721.68,491.2168 " fill="none" id="C-to-D" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="734.94,491.2168,728.94,487.2168,722.94,491.2168,728.94,495.2168,734.94,491.2168" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="343" x="336.75" y="459.7813">аггрегирование: C использует D</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="365" x="325.75" y="483.0625">(например, в качестве параметра)</text><!--MD5=[1ab61fb352a3597145a9c37342f749bf]
link E to F--><path codeLine="34" d="M245.18,602.2168 C331.73,602.2168 631.38,602.2168 736.06,602.2168 " fill="none" id="E-to-F" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="749.22,602.2168,743.22,598.2168,737.22,602.2168,743.22,606.2168,749.22,602.2168" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="322" x="336.25" y="570.7813">композиция: F принадлежит E</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="456" x="269.25" y="594.0625">(например, в качестве переменной класса)</text><!--MD5=[ce77ec9f82fbfc6e257d1b6e5dac829e]
link G to H--><path codeLine="36" d="M430.75,713.2168 C489.3,713.2168 634.53,713.2168 703.7,713.2168 " fill="none" id="G-to-H" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="716.87,713.2168,710.87,709.2168,704.87,713.2168,710.87,717.2168,716.87,713.2168" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="207" x="470.25" y="681.7813">G содержит массив</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="119" x="514.25" y="705.0625">объектов H</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="30" x="679.0678" y="706.5449">1+</text><!--MD5=[f26d46e681fe7fd6e854c909d63311c5]
@startuml
skinparamlocked defaultFontSize 20
class ИмяКласса <Шаблонный_тип> {
    .. Секция переменных ..
    +переменная: тип
    -закрытая_переменная
    #защищённая_переменная
    {static} статическая_переменная
    __ Секция методов __
    +открытый_метод(): возвращаемое_значение
    -закрытый_метод()
    #защищённый_метод()
    {static} статичный_метод()
}

interface Интерфейс {
    метод1()
    метод2()
    метод3()
    {abstract} абстрактный_метод()
}

A -[hidden]u- ИмяКласса
B -[hidden]u- Интерфейс
C -[hidden]u- A
D -[hidden]u- B
E -[hidden]u- C
F -[hidden]u- D
G -[hidden]u- E
H -[hidden]u- F

A -r-|> B: наследование A от B\n(стрелка указывает на базовый класс)

C -r-o D: аггрегирование: C использует D\n(например, в качестве параметра)

E -r-* F: композиция: F принадлежит E\n(например, в качестве переменной класса)

G -r-* "1+" H: G содержит массив\nобъектов H
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="sect1 slide">
<h1 id="_порождающие_паттерны">2. Порождающие паттерны</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_общие_сведения">2.1. Общие сведения</h1>

<div class="sectionbody">
<div class="paragraph"><p>Создающие классы</p></div>
<div class="paragraph"><p>Виртуальный конструктор&#8201;&#8212;&#8201;статический метод, заменяющий <code>new</code> и не зависящий от типа</p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_abstract_factory_абстрактная_фабрика">3. Abstract factory (абстрактная фабрика)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="281px" preserveAspectRatio="none" style="width:526px;height:281px;background:#FFFFFF;" version="1.1" viewBox="0 0 526 281" width="526px" zoomAndPan="magnify"><defs><filter height="300%" id="fy81ttsrjvahp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[536fe7577e8cf19597ee85886b82cd6a]
class AbstractFactory--><rect codeLine="1" fill="#FEFECE" filter="url(#fy81ttsrjvahp)" height="111.8438" id="AbstractFactory" style="stroke:#A80036;stroke-width:1.5;" width="193" x="163" y="7"/><ellipse cx="179" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M174.1875,19.4531 L174.1875,16.9219 L182.8594,16.9219 L182.8594,19.4531 L179.9688,19.4531 L179.9688,28.9531 L182.8594,28.9531 L182.8594,31.5 L174.1875,31.5 L174.1875,28.9531 L177.0781,28.9531 L177.0781,19.4531 L174.1875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="159" x="194" y="30.9238">AbstractFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="164" x2="355" y1="41" y2="41"/><ellipse cx="174" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="184" y="63.5645">createA(): A</text><ellipse cx="174" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="184" y="86.8457">createB(): B</text><ellipse cx="174" cy="98.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="184" y="110.127">createC(): C</text><!--MD5=[6284225c85b1f4b9224b5bbb600cc23d]
class Factory1--><rect codeLine="7" fill="#FEFECE" filter="url(#fy81ttsrjvahp)" height="88.5625" id="Factory1" style="stroke:#A80036;stroke-width:1.5;" width="235" x="7" y="179"/><ellipse cx="76.5" cy="196" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M79.5625,203.0781 Q78.875,203.4375 78.125,203.6094 Q77.375,203.7813 76.5469,203.7813 Q73.5938,203.7813 72.0313,201.8438 Q70.4844,199.8906 70.4844,196.2188 Q70.4844,192.5469 72.0313,190.6094 Q73.5938,188.6563 76.5469,188.6563 Q77.375,188.6563 78.125,188.8281 Q78.8906,189 79.5625,189.3594 L79.5625,192.5625 Q78.8125,191.875 78.1094,191.5625 Q77.4219,191.25 76.6719,191.25 Q75.0938,191.25 74.2813,192.5 Q73.4844,193.75 73.4844,196.2188 Q73.4844,198.6875 74.2813,199.9375 Q75.0938,201.1875 76.6719,201.1875 Q77.4219,201.1875 78.1094,200.875 Q78.8125,200.5625 79.5625,199.875 L79.5625,203.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="87" x="98.5" y="202.9238">Factory1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="241" y1="213" y2="213"/><ellipse cx="18" cy="224" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="208" x="28" y="235.5645">createA() override: A</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="28" y="258.8457">...</text><!--MD5=[cb53f165f6b3a49761cbc50a8715695c]
class Factory2--><rect codeLine="12" fill="#FEFECE" filter="url(#fy81ttsrjvahp)" height="88.5625" id="Factory2" style="stroke:#A80036;stroke-width:1.5;" width="235" x="277" y="179"/><ellipse cx="346.5" cy="196" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M349.5625,203.0781 Q348.875,203.4375 348.125,203.6094 Q347.375,203.7813 346.5469,203.7813 Q343.5938,203.7813 342.0313,201.8438 Q340.4844,199.8906 340.4844,196.2188 Q340.4844,192.5469 342.0313,190.6094 Q343.5938,188.6563 346.5469,188.6563 Q347.375,188.6563 348.125,188.8281 Q348.8906,189 349.5625,189.3594 L349.5625,192.5625 Q348.8125,191.875 348.1094,191.5625 Q347.4219,191.25 346.6719,191.25 Q345.0938,191.25 344.2813,192.5 Q343.4844,193.75 343.4844,196.2188 Q343.4844,198.6875 344.2813,199.9375 Q345.0938,201.1875 346.6719,201.1875 Q347.4219,201.1875 348.1094,200.875 Q348.8125,200.5625 349.5625,199.875 L349.5625,203.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="87" x="368.5" y="202.9238">Factory2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="278" x2="511" y1="213" y2="213"/><ellipse cx="288" cy="224" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="208" x="298" y="235.5645">createA() override: A</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="298" y="258.8457">...</text><!--MD5=[d390011108337c96883f217e010bf6c2]
reverse link AbstractFactory to Factory1--><path codeLine="17" d="M199.18,134.82 C186.42,149.81 173.3,165.2 161.7,178.83 " fill="none" id="AbstractFactory-backto-Factory1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="193.99,130.12,212.28,119.44,204.64,139.2,193.99,130.12" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[db4cffcefa97bd4e0cb17ce675668a80]
reverse link AbstractFactory to Factory2--><path codeLine="18" d="M319.82,134.82 C332.58,149.81 345.7,165.2 357.3,178.83 " fill="none" id="AbstractFactory-backto-Factory2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="314.36,139.2,306.72,119.44,325.01,130.12,314.36,139.2" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[94885592537773c7a36a39dc6bfec44a]
@startuml
skinparamlocked defaultFontSize 20
interface AbstractFactory {
    +createA(): A
    +createB(): B
    +createC(): C
}

class Factory1 {
    +createA() override: A
    {method}...
}

class Factory2 {
    +createA() override: A
    {method}...
}

Factory1 -u-|> AbstractFactory
Factory2 -u-|> AbstractFactory

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Фабрика&#8201;&#8212;&#8201;это просто набор виртуальных конструкторов
</span>
</li>
<li>
<span>
<code>A</code>, <code>B</code>, <code>C</code>&#8201;&#8212;&#8201;это интерфейсы
</span>
</li>
<li>
<span>
Приходится писать не только сами объекты, но и фабрику
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Фабрика по созданию окон, кнопок, полей ввода в зависимости от менеджера графики
(X11, cairo, GtK, Qt, Mate, Windows, MacOS, &#8230;)</p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_factory_method_фабричный_метод">4. Factory method (фабричный метод)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="243px" preserveAspectRatio="none" style="width:387px;height:243px;background:#FFFFFF;" version="1.1" viewBox="0 0 387 243" width="387px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rf11cyv0fkc2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[60d0ce3f3d9d21d1d3595a95dacacb7e]
class SomeObject--><rect codeLine="1" fill="#FEFECE" filter="url(#f1rf11cyv0fkc2)" height="96.5625" id="SomeObject" style="stroke:#A80036;stroke-width:1.5;" width="195" x="7" y="7"/><ellipse cx="40.1" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M43.1625,31.0781 Q42.475,31.4375 41.725,31.6094 Q40.975,31.7813 40.1469,31.7813 Q37.1938,31.7813 35.6313,29.8438 Q34.0844,27.8906 34.0844,24.2188 Q34.0844,20.5469 35.6313,18.6094 Q37.1938,16.6563 40.1469,16.6563 Q40.975,16.6563 41.725,16.8281 Q42.4906,17 43.1625,17.3594 L43.1625,20.5625 Q42.4125,19.875 41.7094,19.5625 Q41.0219,19.25 40.2719,19.25 Q38.6938,19.25 37.8813,20.5 Q37.0844,21.75 37.0844,24.2188 Q37.0844,26.6875 37.8813,27.9375 Q38.6938,29.1875 40.2719,29.1875 Q41.0219,29.1875 41.7094,28.875 Q42.4125,28.5625 43.1625,27.875 L43.1625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="123" x="58.9" y="30.9238">SomeObject</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="201" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="13" y="63.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="201" y1="72.2813" y2="72.2813"/><ellipse cx="18" cy="83.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="28" y="94.8457">createObj(): IObj</text><!--MD5=[b966fa16a50da284bded7b0067749527]
class IObj--><rect codeLine="6" fill="#FEFECE" filter="url(#f1rf11cyv0fkc2)" height="34" id="IObj" style="stroke:#A80036;stroke-width:1.5;" width="75" x="237" y="38.5"/><ellipse cx="253" cy="55.5" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M248.1875,50.9531 L248.1875,48.4219 L256.8594,48.4219 L256.8594,50.9531 L253.9688,50.9531 L253.9688,60.4531 L256.8594,60.4531 L256.8594,63 L248.1875,63 L248.1875,60.4531 L251.0781,60.4531 L251.0781,50.9531 L248.1875,50.9531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="41" x="268" y="62.4238">IObj</text><!--MD5=[358f585797a241f356bdda65238625fb]
class Obj1--><rect codeLine="8" fill="#FEFECE" filter="url(#f1rf11cyv0fkc2)" height="65.2813" id="Obj1" style="stroke:#A80036;stroke-width:1.5;" width="82" x="174.5" y="164"/><ellipse cx="190.5" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M193.5625,188.0781 Q192.875,188.4375 192.125,188.6094 Q191.375,188.7813 190.5469,188.7813 Q187.5938,188.7813 186.0313,186.8438 Q184.4844,184.8906 184.4844,181.2188 Q184.4844,177.5469 186.0313,175.6094 Q187.5938,173.6563 190.5469,173.6563 Q191.375,173.6563 192.125,173.8281 Q192.8906,174 193.5625,174.3594 L193.5625,177.5625 Q192.8125,176.875 192.1094,176.5625 Q191.4219,176.25 190.6719,176.25 Q189.0938,176.25 188.2813,177.5 Q187.4844,178.75 187.4844,181.2188 Q187.4844,183.6875 188.2813,184.9375 Q189.0938,186.1875 190.6719,186.1875 Q191.4219,186.1875 192.1094,185.875 Q192.8125,185.5625 193.5625,184.875 L193.5625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="48" x="205.5" y="187.9238">Obj1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="175.5" x2="255.5" y1="198" y2="198"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="180.5" y="220.5645">...</text><!--MD5=[a32fa4968dbbf2cc9c3cf26119c4d124]
class Obj2--><rect codeLine="12" fill="#FEFECE" filter="url(#f1rf11cyv0fkc2)" height="65.2813" id="Obj2" style="stroke:#A80036;stroke-width:1.5;" width="82" x="291.5" y="164"/><ellipse cx="307.5" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M310.5625,188.0781 Q309.875,188.4375 309.125,188.6094 Q308.375,188.7813 307.5469,188.7813 Q304.5938,188.7813 303.0313,186.8438 Q301.4844,184.8906 301.4844,181.2188 Q301.4844,177.5469 303.0313,175.6094 Q304.5938,173.6563 307.5469,173.6563 Q308.375,173.6563 309.125,173.8281 Q309.8906,174 310.5625,174.3594 L310.5625,177.5625 Q309.8125,176.875 309.1094,176.5625 Q308.4219,176.25 307.6719,176.25 Q306.0938,176.25 305.2813,177.5 Q304.4844,178.75 304.4844,181.2188 Q304.4844,183.6875 305.2813,184.9375 Q306.0938,186.1875 307.6719,186.1875 Q308.4219,186.1875 309.1094,185.875 Q309.8125,185.5625 310.5625,184.875 L310.5625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="48" x="322.5" y="187.9238">Obj2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="292.5" x2="372.5" y1="198" y2="198"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="297.5" y="220.5645">...</text><!--MD5=[4320fc88a855a6f7aa4ed8f8ad875aa5]
reverse link IObj to Obj1--><path codeLine="16" d="M259.71,91.33 C250.26,113.61 238.09,142.27 228.92,163.89 " fill="none" id="IObj-backto-Obj1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="253.36,88.39,267.62,72.72,266.25,93.86,253.36,88.39" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[539566b13d93fd74b47a76b897165ee1]
reverse link IObj to Obj2--><path codeLine="17" d="M289.04,91.33 C298.33,113.61 310.29,142.27 319.31,163.89 " fill="none" id="IObj-backto-Obj2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="282.51,93.87,281.27,72.72,295.43,88.48,282.51,93.87" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bf38ffff3101ef67bb02d7ea2825efb5]
reverse link SomeObject to IObj--><path codeLine="18" d="M207.28,55.5 C217.15,55.5 227.02,55.5 236.89,55.5 " fill="none" id="SomeObject-backto-IObj" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="202.12,55.5,211.12,59.5,207.12,55.5,211.12,51.5,202.12,55.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d016dc2c6ef02f54608b10e57b73fa3e]
@startuml
skinparamlocked defaultFontSize 20
class SomeObject {
    ...
    +createObj(): IObj
}

interface IObj

class Obj1 {
    ...
}

class Obj2 {
    ...
}

Obj1 -u-|> IObj
Obj2 -u-|> IObj
IObj .l.> SomeObject

hide empty members
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Частный случай абстрактной фабрики
</span>
</li>
<li>
<span>
<code>IObj</code>&#8201;&#8212;&#8201;это интерфейс
</span>
</li>
<li>
<span>
<code>SomeObject</code> не является интерфейсом
</span>
</li>
<li>
<span>
Дальнейшее расширение объекта фабричными методами <code>create</code> приводит к созданию фабрики
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Диалоговое окно, у которого есть фабричный метод <code>createButton</code>, возвращающий
кнопку в зависимости от графического менеджера</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_builder_строитель">4.1. Builder (строитель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="304px" preserveAspectRatio="none" style="width:588px;height:304px;background:#FFFFFF;" version="1.1" viewBox="0 0 588 304" width="588px" zoomAndPan="magnify"><defs><filter height="300%" id="fu2o03s8t93tz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[a8dc8aefce085dae70bec15e302cfec9]
class Builder--><rect codeLine="3" fill="#FEFECE" filter="url(#fu2o03s8t93tz)" height="111.8438" id="Builder" style="stroke:#A80036;stroke-width:1.5;" width="148" x="206" y="7"/><ellipse cx="251.7" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M246.8875,19.4531 L246.8875,16.9219 L255.5594,16.9219 L255.5594,19.4531 L252.6688,19.4531 L252.6688,28.9531 L255.5594,28.9531 L255.5594,31.5 L246.8875,31.5 L246.8875,28.9531 L249.7781,28.9531 L249.7781,19.4531 L246.8875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="48" x="273.3" y="28.8467">Builder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="207" x2="353" y1="41" y2="41"/><ellipse cx="217" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="227" y="63.5645">buildPartA()</text><ellipse cx="217" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="227" y="86.8457">buildPartB()</text><ellipse cx="217" cy="98.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="227" y="110.127">buildPartC()</text><!--MD5=[5cc00c04741503291c4f72f9967a53d0]
class Builder1--><rect codeLine="9" fill="#FEFECE" filter="url(#fu2o03s8t93tz)" height="111.8438" id="Builder1" style="stroke:#A80036;stroke-width:1.5;" width="256" x="7" y="179"/><ellipse cx="102" cy="196" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M105.0625,203.0781 Q104.375,203.4375 103.625,203.6094 Q102.875,203.7813 102.0469,203.7813 Q99.0938,203.7813 97.5313,201.8438 Q95.9844,199.8906 95.9844,196.2188 Q95.9844,192.5469 97.5313,190.6094 Q99.0938,188.6563 102.0469,188.6563 Q102.875,188.6563 103.625,188.8281 Q104.3906,189 105.0625,189.3594 L105.0625,192.5625 Q104.3125,191.875 103.6094,191.5625 Q102.9219,191.25 102.1719,191.25 Q100.5938,191.25 99.7813,192.5 Q98.9844,193.75 98.9844,196.2188 Q98.9844,198.6875 99.7813,199.9375 Q100.5938,201.1875 102.1719,201.1875 Q102.9219,201.1875 103.6094,200.875 Q104.3125,200.5625 105.0625,199.875 L105.0625,203.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="124" y="200.8467">Builder1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="262" y1="213" y2="213"/><ellipse cx="18" cy="224" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209" x="28" y="235.5645">buildPartA() override</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="28" y="258.8457">...</text><ellipse cx="18" cy="270.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="229" x="28" y="282.127">getProduct(): Product1</text><!--MD5=[3171ff0da7501824cfe5baba95a4c82c]
class Builder2--><rect codeLine="15" fill="#FEFECE" filter="url(#fu2o03s8t93tz)" height="111.8438" id="Builder2" style="stroke:#A80036;stroke-width:1.5;" width="256" x="298" y="179"/><ellipse cx="393" cy="196" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M396.0625,203.0781 Q395.375,203.4375 394.625,203.6094 Q393.875,203.7813 393.0469,203.7813 Q390.0938,203.7813 388.5313,201.8438 Q386.9844,199.8906 386.9844,196.2188 Q386.9844,192.5469 388.5313,190.6094 Q390.0938,188.6563 393.0469,188.6563 Q393.875,188.6563 394.625,188.8281 Q395.3906,189 396.0625,189.3594 L396.0625,192.5625 Q395.3125,191.875 394.6094,191.5625 Q393.9219,191.25 393.1719,191.25 Q391.5938,191.25 390.7813,192.5 Q389.9844,193.75 389.9844,196.2188 Q389.9844,198.6875 390.7813,199.9375 Q391.5938,201.1875 393.1719,201.1875 Q393.9219,201.1875 394.6094,200.875 Q395.3125,200.5625 396.0625,199.875 L396.0625,203.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="415" y="200.8467">Builder2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="299" x2="553" y1="213" y2="213"/><ellipse cx="309" cy="224" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209" x="319" y="235.5645">buildPartA() override</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="319" y="258.8457">...</text><ellipse cx="309" cy="270.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="229" x="319" y="282.127">getProduct(): Product2</text><!--MD5=[57adcbfcd00175f9b7abe25398e7de0c]
class Director--><rect codeLine="21" fill="#FEFECE" filter="url(#fu2o03s8t93tz)" height="88.5625" id="Director" style="stroke:#A80036;stroke-width:1.5;" width="185" x="389.5" y="18.5"/><ellipse cx="450" cy="35.5" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M453.0625,42.5781 Q452.375,42.9375 451.625,43.1094 Q450.875,43.2813 450.0469,43.2813 Q447.0938,43.2813 445.5313,41.3438 Q443.9844,39.3906 443.9844,35.7188 Q443.9844,32.0469 445.5313,30.1094 Q447.0938,28.1563 450.0469,28.1563 Q450.875,28.1563 451.625,28.3281 Q452.3906,28.5 453.0625,28.8594 L453.0625,32.0625 Q452.3125,31.375 451.6094,31.0625 Q450.9219,30.75 450.1719,30.75 Q448.5938,30.75 447.7813,32 Q446.9844,33.25 446.9844,35.7188 Q446.9844,38.1875 447.7813,39.4375 Q448.5938,40.6875 450.1719,40.6875 Q450.9219,40.6875 451.6094,40.375 Q452.3125,40.0625 453.0625,39.375 L453.0625,42.5781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="472" y="40.3467">Director</text><line style="stroke:#A80036;stroke-width:1.5;" x1="390.5" x2="573.5" y1="52.5" y2="52.5"/><ellipse cx="400.5" cy="63.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="158" x="410.5" y="75.0645">makeVariant1()</text><ellipse cx="400.5" cy="86.7813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="158" x="410.5" y="98.3457">makeVariant2()</text><!--MD5=[d82e108ae1b6bd81380060af0b277770]
reverse link Builder to Builder1--><path codeLine="26" d="M219.6,134.81 C207.07,149.5 194.05,164.77 182.09,178.79 " fill="none" id="Builder-backto-Builder1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="214.62,129.87,232.92,119.19,225.27,138.95,214.62,129.87" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fc3177a529a5a939f1c8a64b5071b2a3]
reverse link Builder to Builder2--><path codeLine="27" d="M340.82,134.81 C353.43,149.5 366.54,164.77 378.59,178.79 " fill="none" id="Builder-backto-Builder2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="335.12,138.93,327.4,119.19,345.74,129.81,335.12,138.93" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a8c6a3547a3455f0717a0bf79573894d]
reverse link Builder to Director--><path codeLine="29" d="M367.28,63 C374.56,63 381.84,63 389.12,63 " fill="none" id="Builder-backto-Director" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="354.17,63,360.17,67,366.17,63,360.17,59,354.17,63" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[62537acfd06c167a77cec42d0c5dd47b]
@startuml
skinparamlocked defaultFontSize 20
skinparam classFontSize 14

interface Builder {
    +buildPartA()
    +buildPartB()
    +buildPartC()
}

class Builder1 {
    +buildPartA() override
    {method} ...
    +getProduct(): Product1
}

class Builder2 {
    +buildPartA() override
    {method} ...
    +getProduct(): Product2
}

class Director {
    +makeVariant1()
    +makeVariant2()
}

Builder1 -u-|> Builder
Builder2 -u-|> Builder

Director -l-o Builder

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Замена конструктора с 100500+ параметрами
</span>
</li>
<li>
<span>
<code>Builder</code> похож на абстрактную фабрику и компоновщик
</span>
</li>
<li>
<span>
<code>Director</code> похож на реализации стратегий
</span>
</li>
<li>
<span>
Разделение <code>Product</code> на части
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Создание разных видов диалоговых окон в зависимости от графического менеджера</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_prototype_прототип">4.2. Prototype (прототип)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="242px" preserveAspectRatio="none" style="width:468px;height:242px;background:#FFFFFF;" version="1.1" viewBox="0 0 468 242" width="468px" zoomAndPan="magnify"><defs><filter height="300%" id="fqdbhjjgzwe7a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[8d9f5c65414212f4f21f7e0a62cdefa0]
class Prototype--><rect codeLine="1" fill="#FEFECE" filter="url(#fqdbhjjgzwe7a)" height="65.2813" id="Prototype" style="stroke:#A80036;stroke-width:1.5;" width="206" x="127" y="7"/><ellipse cx="177" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M172.1875,19.4531 L172.1875,16.9219 L180.8594,16.9219 L180.8594,19.4531 L177.9688,19.4531 L177.9688,28.9531 L180.8594,28.9531 L180.8594,31.5 L172.1875,31.5 L172.1875,28.9531 L175.0781,28.9531 L175.0781,19.4531 L172.1875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="97" x="199" y="30.9238">Prototype</text><line style="stroke:#A80036;stroke-width:1.5;" x1="128" x2="332" y1="41" y2="41"/><ellipse cx="138" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="148" y="63.5645">clone(): Prototype</text><!--MD5=[7a1a18227f0381d0e6f0aa1a4d364acd]
class Object1--><rect codeLine="5" fill="#FEFECE" filter="url(#fqdbhjjgzwe7a)" height="96.5625" id="Object1" style="stroke:#A80036;stroke-width:1.5;" width="206" x="7" y="132"/><ellipse cx="66" cy="149" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M69.0625,156.0781 Q68.375,156.4375 67.625,156.6094 Q66.875,156.7813 66.0469,156.7813 Q63.0938,156.7813 61.5313,154.8438 Q59.9844,152.8906 59.9844,149.2188 Q59.9844,145.5469 61.5313,143.6094 Q63.0938,141.6563 66.0469,141.6563 Q66.875,141.6563 67.625,141.8281 Q68.3906,142 69.0625,142.3594 L69.0625,145.5625 Q68.3125,144.875 67.6094,144.5625 Q66.9219,144.25 66.1719,144.25 Q64.5938,144.25 63.7813,145.5 Q62.9844,146.75 62.9844,149.2188 Q62.9844,151.6875 63.7813,152.9375 Q64.5938,154.1875 66.1719,154.1875 Q66.9219,154.1875 67.6094,153.875 Q68.3125,153.5625 69.0625,152.875 L69.0625,156.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="88" y="155.9238">Object1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="212" y1="166" y2="166"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="13" y="188.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="212" y1="197.2813" y2="197.2813"/><ellipse cx="18" cy="208.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="28" y="219.8457">clone(): Prototype</text><!--MD5=[7c73e783ae5e467bbefeded3c9c5ec39]
class Object2--><rect codeLine="10" fill="#FEFECE" filter="url(#fqdbhjjgzwe7a)" height="96.5625" id="Object2" style="stroke:#A80036;stroke-width:1.5;" width="206" x="248" y="132"/><ellipse cx="307" cy="149" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M310.0625,156.0781 Q309.375,156.4375 308.625,156.6094 Q307.875,156.7813 307.0469,156.7813 Q304.0938,156.7813 302.5313,154.8438 Q300.9844,152.8906 300.9844,149.2188 Q300.9844,145.5469 302.5313,143.6094 Q304.0938,141.6563 307.0469,141.6563 Q307.875,141.6563 308.625,141.8281 Q309.3906,142 310.0625,142.3594 L310.0625,145.5625 Q309.3125,144.875 308.6094,144.5625 Q307.9219,144.25 307.1719,144.25 Q305.5938,144.25 304.7813,145.5 Q303.9844,146.75 303.9844,149.2188 Q303.9844,151.6875 304.7813,152.9375 Q305.5938,154.1875 307.1719,154.1875 Q307.9219,154.1875 308.6094,153.875 Q309.3125,153.5625 310.0625,152.875 L310.0625,156.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="329" y="155.9238">Object2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="249" x2="453" y1="166" y2="166"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="254" y="188.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="249" x2="453" y1="197.2813" y2="197.2813"/><ellipse cx="259" cy="208.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="269" y="219.8457">clone(): Prototype</text><!--MD5=[e5c12aa00889fe3275b12aba0563ef1d]
reverse link Prototype to Object1--><path codeLine="15" d="M189.45,87.47 C177.06,101.82 163.44,117.6 151.03,131.98 " fill="none" id="Prototype-backto-Object1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="184.4,82.61,202.77,72.04,195,91.75,184.4,82.61" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[69e3602650eb10b3e01c8e3abf32bfcc]
reverse link Prototype to Object2--><path codeLine="16" d="M270.89,87.47 C283.38,101.82 297.11,117.6 309.63,131.98 " fill="none" id="Prototype-backto-Object2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="265.31,91.72,257.46,72.04,275.87,82.53,265.31,91.72" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f8cec319d45d9ab9c4ed89a09291ec5d]
@startuml
skinparamlocked defaultFontSize 20
interface Prototype {
    +clone(): Prototype
}

class Object1 {
    {field} ...
    +clone(): Prototype
}

class Object2 {
    {field} ...
    +clone(): Prototype
}

Object1 -u-|> Prototype
Object2 -u-|> Prototype

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Конструктор копирования
</span>
</li>
<li>
<span>
Оператор =
</span>
</li>
<li>
<span>
"Глубокая" копия объекта
</span>
</li>
<li>
<span>
Должны наследовать интерфейс <code>Prototype</code>
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Клонирование сложного объекта в графическом редакторе</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_singleton_одиночка">4.3. Singleton (одиночка)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="140px" preserveAspectRatio="none" style="width:291px;height:140px;background:#FFFFFF;" version="1.1" viewBox="0 0 291 140" width="291px" zoomAndPan="magnify"><defs><filter height="300%" id="f12gvgb0rf13j0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[2f4e497837a991172d40b04b7a7d0ca2]
class Singleton--><rect codeLine="1" fill="#FEFECE" filter="url(#f12gvgb0rf13j0)" height="119.8438" id="Singleton" style="stroke:#A80036;stroke-width:1.5;" width="270" x="7" y="7"/><ellipse cx="89.5" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M92.5625,31.0781 Q91.875,31.4375 91.125,31.6094 Q90.375,31.7813 89.5469,31.7813 Q86.5938,31.7813 85.0313,29.8438 Q83.4844,27.8906 83.4844,24.2188 Q83.4844,20.5469 85.0313,18.6094 Q86.5938,16.6563 89.5469,16.6563 Q90.375,16.6563 91.125,16.8281 Q91.8906,17 92.5625,17.3594 L92.5625,20.5625 Q91.8125,19.875 91.1094,19.5625 Q90.4219,19.25 89.6719,19.25 Q88.0938,19.25 87.2813,20.5 Q86.4844,21.75 86.4844,24.2188 Q86.4844,26.6875 87.2813,27.9375 Q88.0938,29.1875 89.6719,29.1875 Q90.4219,29.1875 91.1094,28.875 Q91.8125,28.5625 92.5625,27.875 L92.5625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="96" x="111.5" y="30.9238">Singleton</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="276" y1="41" y2="41"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="49"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="194" x="28" y="63.5645">instance: Singleton</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="276" y1="72.2813" y2="72.2813"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="80.2813"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="28" y="94.8457">Singleton()</text><ellipse cx="18" cy="106.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="243" x="28" y="118.127">getInstance(): Singleton</text><!--MD5=[fca1526ce4a30673d92134276bae3095]
@startuml
skinparamlocked defaultFontSize 20
class Singleton {
    -{static} instance: Singleton
    -Singleton()
    +{static} getInstance(): Singleton
}
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Чтобы не писать глобальную переменную
</span>
</li>
<li>
<span>
Проблема гонок во время создания
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Системный логгер</p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_стуктурные_паттерны">5. Стуктурные паттерны</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_общие_сведения_2">5.1. Общие сведения</h1>

<div class="sectionbody">
<div class="paragraph"><p>Определящие структуру класса</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_adapter_адаптер">5.2. Adapter (адаптер)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="258px" preserveAspectRatio="none" style="width:372px;height:258px;background:#FFFFFF;" version="1.1" viewBox="0 0 372 258" width="372px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xc6el8vnfhuk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c06cb04c4d82ae0fd6ee73d2e0f2e4e3]
class ClientInterface--><rect codeLine="1" fill="#FEFECE" filter="url(#f1xc6el8vnfhuk)" height="88.5625" id="ClientInterface" style="stroke:#A80036;stroke-width:1.5;" width="182" x="176" y="7"/><ellipse cx="192" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M187.1875,19.4531 L187.1875,16.9219 L195.8594,16.9219 L195.8594,19.4531 L192.9688,19.4531 L192.9688,28.9531 L195.8594,28.9531 L195.8594,31.5 L187.1875,31.5 L187.1875,28.9531 L190.0781,28.9531 L190.0781,19.4531 L187.1875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="148" x="207" y="30.9238">ClientInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="177" x2="357" y1="41" y2="41"/><ellipse cx="187" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="197" y="63.5645">method1()</text><ellipse cx="187" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="197" y="86.8457">method2()</text><!--MD5=[f38a85e47f7d4f812523dd9b6d7d2c16]
class Adapter--><rect codeLine="6" fill="#FEFECE" filter="url(#f1xc6el8vnfhuk)" height="88.5625" id="Adapter" style="stroke:#A80036;stroke-width:1.5;" width="134" x="7" y="7"/><ellipse cx="32" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M35.0625,31.0781 Q34.375,31.4375 33.625,31.6094 Q32.875,31.7813 32.0469,31.7813 Q29.0938,31.7813 27.5313,29.8438 Q25.9844,27.8906 25.9844,24.2188 Q25.9844,20.5469 27.5313,18.6094 Q29.0938,16.6563 32.0469,16.6563 Q32.875,16.6563 33.625,16.8281 Q34.3906,17 35.0625,17.3594 L35.0625,20.5625 Q34.3125,19.875 33.6094,19.5625 Q32.9219,19.25 32.1719,19.25 Q30.5938,19.25 29.7813,20.5 Q28.9844,21.75 28.9844,24.2188 Q28.9844,26.6875 29.7813,27.9375 Q30.5938,29.1875 32.1719,29.1875 Q32.9219,29.1875 33.6094,28.875 Q34.3125,28.5625 35.0625,27.875 L35.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="80" x="49" y="30.9238">Adapter</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="140" y1="41" y2="41"/><ellipse cx="18" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="63.5645">method1()</text><ellipse cx="18" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="86.8457">method2()</text><!--MD5=[aa7f586532e18719e6cefa70fc650583]
class Object--><rect codeLine="11" fill="#FEFECE" filter="url(#f1xc6el8vnfhuk)" height="88.5625" id="Object" style="stroke:#A80036;stroke-width:1.5;" width="126" x="11" y="156"/><ellipse cx="38.7" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M41.7625,180.0781 Q41.075,180.4375 40.325,180.6094 Q39.575,180.7813 38.7469,180.7813 Q35.7938,180.7813 34.2313,178.8438 Q32.6844,176.8906 32.6844,173.2188 Q32.6844,169.5469 34.2313,167.6094 Q35.7938,165.6563 38.7469,165.6563 Q39.575,165.6563 40.325,165.8281 Q41.0906,166 41.7625,166.3594 L41.7625,169.5625 Q41.0125,168.875 40.3094,168.5625 Q39.6219,168.25 38.8719,168.25 Q37.2938,168.25 36.4813,169.5 Q35.6844,170.75 35.6844,173.2188 Q35.6844,175.6875 36.4813,176.9375 Q37.2938,178.1875 38.8719,178.1875 Q39.6219,178.1875 40.3094,177.875 Q41.0125,177.5625 41.7625,176.875 L41.7625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="56.3" y="179.9238">Object</text><line style="stroke:#A80036;stroke-width:1.5;" x1="12" x2="136" y1="190" y2="190"/><ellipse cx="22" cy="201" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="32" y="212.5645">function()</text><ellipse cx="22" cy="224.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="32" y="235.8457">another()</text><!--MD5=[04c78cb8064378620fdc97cab4841111]
link Adapter to Object--><path codeLine="16" d="M74,96.21 C74,110.8 74,127.29 74,142.73 " fill="none" id="Adapter-to-Object" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="74,155.96,78,149.96,74,143.96,70,149.96,74,155.96" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[afbedf7255054c5fece9084a7eadfcf1]
link Adapter to ClientInterface--><path codeLine="17" d="M141.1,51.5 C145.85,51.5 150.6,51.5 155.35,51.5 " fill="none" id="Adapter-to-ClientInterface" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="155.52,44.5,175.52,51.5,155.52,58.5,155.52,44.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2b9ed5c6eedf9de2ee7d5e3d50969273]
@startuml
skinparamlocked defaultFontSize 20
interface ClientInterface {
    +method1()
    +method2()
}

class Adapter {
    +method1()
    +method2()
}

class Object {
    +function()
    +another()
}

Adapter - -o Object
Adapter -|> ClientInterface

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Переопределение интерфейса
</span>
</li>
<li>
<span>
Клиент должен выделить отдельно <code>ClientInterface</code>
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p><code>std::queue</code></p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_bridge_мост">5.3. Bridge (мост)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="323px" preserveAspectRatio="none" style="width:682px;height:323px;background:#FFFFFF;" version="1.1" viewBox="0 0 682 323" width="682px" zoomAndPan="magnify"><defs><filter height="300%" id="fwjs8xu9e70ti" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f524f4843046d594e03236310757e034]
cluster Bridge--><rect fill="#FFFFFF" filter="url(#fwjs8xu9e70ti)" height="170" style="stroke:#000000;stroke-width:1.5;" width="395" x="275" y="7.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="74" x="435.5" y="27.7813">Bridge</text><!--MD5=[de3285fb310c2012a59f0e39620afd40]
class ComplexAdapter--><rect codeLine="2" fill="#FEFECE" filter="url(#fwjs8xu9e70ti)" height="111.8438" id="ComplexAdapter" style="stroke:#A80036;stroke-width:1.5;" width="202" x="452" y="49.2168"/><ellipse cx="468" cy="66.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M471.0625,73.2949 Q470.375,73.6543 469.625,73.8262 Q468.875,73.998 468.0469,73.998 Q465.0938,73.998 463.5313,72.0605 Q461.9844,70.1074 461.9844,66.4355 Q461.9844,62.7637 463.5313,60.8262 Q465.0938,58.873 468.0469,58.873 Q468.875,58.873 469.625,59.0449 Q470.3906,59.2168 471.0625,59.5762 L471.0625,62.7793 Q470.3125,62.0918 469.6094,61.7793 Q468.9219,61.4668 468.1719,61.4668 Q466.5938,61.4668 465.7813,62.7168 Q464.9844,63.9668 464.9844,66.4355 Q464.9844,68.9043 465.7813,70.1543 Q466.5938,71.4043 468.1719,71.4043 Q468.9219,71.4043 469.6094,71.0918 Q470.3125,70.7793 471.0625,70.0918 L471.0625,73.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="483" y="73.1406">ComplexAdapter</text><line style="stroke:#A80036;stroke-width:1.5;" x1="453" x2="653" y1="83.2168" y2="83.2168"/><ellipse cx="463" cy="94.2168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="473" y="105.7813">method1()</text><ellipse cx="463" cy="117.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="473" y="129.0625">method2()</text><ellipse cx="463" cy="140.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="473" y="152.3438">method3()</text><!--MD5=[fc07866a383d07d405a25512054a0e5c]
class Target--><rect codeLine="8" fill="#FEFECE" filter="url(#fwjs8xu9e70ti)" height="88.5625" id="Target" style="stroke:#A80036;stroke-width:1.5;" width="126" x="291" y="60.7168"/><ellipse cx="319.15" cy="77.7168" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M314.3375,73.1699 L314.3375,70.6387 L323.0094,70.6387 L323.0094,73.1699 L320.1188,73.1699 L320.1188,82.6699 L323.0094,82.6699 L323.0094,85.2168 L314.3375,85.2168 L314.3375,82.6699 L317.2281,82.6699 L317.2281,73.1699 L314.3375,73.1699 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="65" x="336.85" y="84.6406">Target</text><line style="stroke:#A80036;stroke-width:1.5;" x1="292" x2="416" y1="94.7168" y2="94.7168"/><ellipse cx="302" cy="105.7168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="312" y="117.2813">function()</text><ellipse cx="302" cy="128.998" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="312" y="140.5625">another()</text><!--MD5=[a7cf26399473a9268286832cea8ad91c]
class Implementation1--><rect codeLine="14" fill="#FEFECE" filter="url(#fwjs8xu9e70ti)" height="88.5625" id="Implementation1" style="stroke:#A80036;stroke-width:1.5;" width="208" x="7" y="221.2168"/><ellipse cx="23" cy="238.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M26.0625,245.2949 Q25.375,245.6543 24.625,245.8262 Q23.875,245.998 23.0469,245.998 Q20.0938,245.998 18.5313,244.0605 Q16.9844,242.1074 16.9844,238.4355 Q16.9844,234.7637 18.5313,232.8262 Q20.0938,230.873 23.0469,230.873 Q23.875,230.873 24.625,231.0449 Q25.3906,231.2168 26.0625,231.5762 L26.0625,234.7793 Q25.3125,234.0918 24.6094,233.7793 Q23.9219,233.4668 23.1719,233.4668 Q21.5938,233.4668 20.7813,234.7168 Q19.9844,235.9668 19.9844,238.4355 Q19.9844,240.9043 20.7813,242.1543 Q21.5938,243.4043 23.1719,243.4043 Q23.9219,243.4043 24.6094,243.0918 Q25.3125,242.7793 26.0625,242.0918 L26.0625,245.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="38" y="245.1406">Implementation1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="214" y1="255.2168" y2="255.2168"/><ellipse cx="18" cy="266.2168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="28" y="277.7813">function()</text><ellipse cx="18" cy="289.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="28" y="301.0625">another()</text><!--MD5=[66563024aa89250cc3e41d51e6c637dd]
class Implementation2--><rect codeLine="19" fill="#FEFECE" filter="url(#fwjs8xu9e70ti)" height="88.5625" id="Implementation2" style="stroke:#A80036;stroke-width:1.5;" width="208" x="250" y="221.2168"/><ellipse cx="266" cy="238.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M269.0625,245.2949 Q268.375,245.6543 267.625,245.8262 Q266.875,245.998 266.0469,245.998 Q263.0938,245.998 261.5313,244.0605 Q259.9844,242.1074 259.9844,238.4355 Q259.9844,234.7637 261.5313,232.8262 Q263.0938,230.873 266.0469,230.873 Q266.875,230.873 267.625,231.0449 Q268.3906,231.2168 269.0625,231.5762 L269.0625,234.7793 Q268.3125,234.0918 267.6094,233.7793 Q266.9219,233.4668 266.1719,233.4668 Q264.5938,233.4668 263.7813,234.7168 Q262.9844,235.9668 262.9844,238.4355 Q262.9844,240.9043 263.7813,242.1543 Q264.5938,243.4043 266.1719,243.4043 Q266.9219,243.4043 267.6094,243.0918 Q268.3125,242.7793 269.0625,242.0918 L269.0625,245.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="281" y="245.1406">Implementation2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="251" x2="457" y1="255.2168" y2="255.2168"/><ellipse cx="261" cy="266.2168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="271" y="277.7813">function()</text><ellipse cx="261" cy="289.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="271" y="301.0625">another()</text><!--MD5=[4959d1b2d07a956b3b6994348ecbfd7f]
class Refinement--><rect codeLine="24" fill="#FEFECE" filter="url(#fwjs8xu9e70ti)" height="88.5625" id="Refinement" style="stroke:#A80036;stroke-width:1.5;" width="151" x="493.5" y="221.2168"/><ellipse cx="509.5" cy="238.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M512.5625,245.2949 Q511.875,245.6543 511.125,245.8262 Q510.375,245.998 509.5469,245.998 Q506.5938,245.998 505.0313,244.0605 Q503.4844,242.1074 503.4844,238.4355 Q503.4844,234.7637 505.0313,232.8262 Q506.5938,230.873 509.5469,230.873 Q510.375,230.873 511.125,231.0449 Q511.8906,231.2168 512.5625,231.5762 L512.5625,234.7793 Q511.8125,234.0918 511.1094,233.7793 Q510.4219,233.4668 509.6719,233.4668 Q508.0938,233.4668 507.2813,234.7168 Q506.4844,235.9668 506.4844,238.4355 Q506.4844,240.9043 507.2813,242.1543 Q508.0938,243.4043 509.6719,243.4043 Q510.4219,243.4043 511.1094,243.0918 Q511.8125,242.7793 512.5625,242.0918 L512.5625,245.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="117" x="524.5" y="245.1406">Refinement</text><line style="stroke:#A80036;stroke-width:1.5;" x1="494.5" x2="643.5" y1="255.2168" y2="255.2168"/><ellipse cx="504.5" cy="266.2168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="514.5" y="277.7813">method4()</text><ellipse cx="504.5" cy="289.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="514.5" y="301.0625">method5()</text><!--MD5=[99c2e89eb4c28f1e2b5fecee2e909642]
reverse link Target to ComplexAdapter--><path codeLine="29" d="M430.54,105.2168 C437.62,105.2168 444.71,105.2168 451.8,105.2168 " fill="none" id="Target-backto-ComplexAdapter" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="417.35,105.2168,423.35,109.2168,429.35,105.2168,423.35,101.2168,417.35,105.2168" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[cbed7bccddc0b83e4c0fa000f3028767]
reverse link ComplexAdapter to Refinement--><path codeLine="30" d="M560.63,181.7768 C561.99,195.2468 563.36,208.8568 564.59,221.0468 " fill="none" id="ComplexAdapter-backto-Refinement" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="553.64,182.2568,558.6,161.6568,567.57,180.8468,553.64,182.2568" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b40f74a23547a6b8242657d73fe020c2]
reverse link Target to Implementation1--><path codeLine="31" d="M273.96,158.4268 C242.79,178.7568 207.48,201.7868 177.72,221.1968 " fill="none" id="Target-backto-Implementation1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="270.21,152.5068,290.79,147.4468,277.86,164.2368,270.21,152.5068" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6c725917e6f41e19ae377737d2ed84ff]
reverse link Target to Implementation2--><path codeLine="32" d="M354,170.1268 C354,187.2568 354,205.3768 354,221.1268 " fill="none" id="Target-backto-Implementation2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="347,169.9468,354,149.9468,361,169.9468,347,169.9468" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6b2a48dd867141368d2bc4181d4fe8d7]
@startuml
skinparamlocked defaultFontSize 20
rectangle Bridge {
    class ComplexAdapter {
        +method1()
        +method2()
        +method3()
    }

    interface Target {
        +function()
        +another()
    }
}

class Implementation1 {
    +function()
    +another()
}

class Implementation2 {
    +function()
    +another()
}

class Refinement {
    +method4()
    +method5()
}

ComplexAdapter -l-* Target
Refinement -u-|> ComplexAdapter
Implementation1 -u-|> Target
Implementation2 -u-|> Target

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Усложнённый адаптер (два адаптера)
</span>
</li>
<li>
<span>
Клиент использует <code>ComplexAdapter</code> или одно из его уточнений <code>Refinement</code>
</span>
</li>
<li>
<span>
Одновременное развитие <code>ComplexAdapter</code> и <code>Target</code>
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Приложение для отрисовки компонент использует абстракцию с примитивами, которые, в свою очередь,
рисуются благодаря интерфейсу графического менеджера. Последний может быть реализован по-разному
(OpenGL, например)</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_composite_компоновщик">5.4. Composite (компоновщик)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="317px" preserveAspectRatio="none" style="width:756px;height:317px;background:#FFFFFF;" version="1.1" viewBox="0 0 756 317" width="756px" zoomAndPan="magnify"><defs><filter height="300%" id="f1gxv00yf1v71l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[7a35800e653553efe2045ed2f1ac45e0]
class SomeInterface--><rect codeLine="1" fill="#FEFECE" filter="url(#f1gxv00yf1v71l)" height="88.5625" id="SomeInterface" style="stroke:#A80036;stroke-width:1.5;" width="180" x="562" y="22.7168"/><ellipse cx="578" cy="39.7168" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M573.1875,35.1699 L573.1875,32.6387 L581.8594,32.6387 L581.8594,35.1699 L578.9688,35.1699 L578.9688,44.6699 L581.8594,44.6699 L581.8594,47.2168 L573.1875,47.2168 L573.1875,44.6699 L576.0781,44.6699 L576.0781,35.1699 L573.1875,35.1699 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="146" x="593" y="46.6406">SomeInterface</text><line style="stroke:#A80036;stroke-width:1.5;" x1="563" x2="741" y1="56.7168" y2="56.7168"/><ellipse cx="573" cy="67.7168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="583" y="79.2813">method1()</text><ellipse cx="573" cy="90.998" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="583" y="102.5625">method2()</text><!--MD5=[aa7f586532e18719e6cefa70fc650583]
class Object--><rect codeLine="6" fill="#FEFECE" filter="url(#f1gxv00yf1v71l)" height="119.8438" id="Object" style="stroke:#A80036;stroke-width:1.5;" width="134" x="585" y="183.2168"/><ellipse cx="616.3" cy="200.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M619.3625,207.2949 Q618.675,207.6543 617.925,207.8262 Q617.175,207.998 616.3469,207.998 Q613.3938,207.998 611.8313,206.0605 Q610.2844,204.1074 610.2844,200.4355 Q610.2844,196.7637 611.8313,194.8262 Q613.3938,192.873 616.3469,192.873 Q617.175,192.873 617.925,193.0449 Q618.6906,193.2168 619.3625,193.5762 L619.3625,196.7793 Q618.6125,196.0918 617.9094,195.7793 Q617.2219,195.4668 616.4719,195.4668 Q614.8938,195.4668 614.0813,196.7168 Q613.2844,197.9668 613.2844,200.4355 Q613.2844,202.9043 614.0813,204.1543 Q614.8938,205.4043 616.4719,205.4043 Q617.2219,205.4043 617.9094,205.0918 Q618.6125,204.7793 619.3625,204.0918 L619.3625,207.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="634.7" y="207.1406">Object</text><line style="stroke:#A80036;stroke-width:1.5;" x1="586" x2="718" y1="217.2168" y2="217.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="591" y="239.7813">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="586" x2="718" y1="248.498" y2="248.498"/><ellipse cx="596" cy="259.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="606" y="271.0625">method1()</text><ellipse cx="596" cy="282.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="606" y="294.3438">method2()</text><!--MD5=[251454e98c15f29849fb35b1904d0020]
class Composition--><rect codeLine="12" fill="#FEFECE" filter="url(#f1gxv00yf1v71l)" height="119.8438" id="Composition" style="stroke:#A80036;stroke-width:1.5;" width="274" x="267" y="183.2168"/><ellipse cx="336.5" cy="200.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M339.5625,207.2949 Q338.875,207.6543 338.125,207.8262 Q337.375,207.998 336.5469,207.998 Q333.5938,207.998 332.0313,206.0605 Q330.4844,204.1074 330.4844,200.4355 Q330.4844,196.7637 332.0313,194.8262 Q333.5938,192.873 336.5469,192.873 Q337.375,192.873 338.125,193.0449 Q338.8906,193.2168 339.5625,193.5762 L339.5625,196.7793 Q338.8125,196.0918 338.1094,195.7793 Q337.4219,195.4668 336.6719,195.4668 Q335.0938,195.4668 334.2813,196.7168 Q333.4844,197.9668 333.4844,200.4355 Q333.4844,202.9043 334.2813,204.1543 Q335.0938,205.4043 336.6719,205.4043 Q337.4219,205.4043 338.1094,205.0918 Q338.8125,204.7793 339.5625,204.0918 L339.5625,207.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="358.5" y="207.1406">Composition</text><line style="stroke:#A80036;stroke-width:1.5;" x1="268" x2="540" y1="217.2168" y2="217.2168"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="225.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="247" x="288" y="239.7813">objects: SomeInterface[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="268" x2="540" y1="248.498" y2="248.498"/><ellipse cx="278" cy="259.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="288" y="271.0625">method1()</text><ellipse cx="278" cy="282.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="288" y="294.3438">method2()</text><!--MD5=[8017d3cb725c0aab20d112e5f1d5a6a9]
class vector--><rect codeLine="18" fill="#FEFECE" filter="url(#f1gxv00yf1v71l)" height="111.8438" id="vector" style="stroke:#A80036;stroke-width:1.5;" width="263" x="263.5" y="11.2168"/><ellipse cx="335" cy="28.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M338.0625,35.2949 Q337.375,35.6543 336.625,35.8262 Q335.875,35.998 335.0469,35.998 Q332.0938,35.998 330.5313,34.0605 Q328.9844,32.1074 328.9844,28.4355 Q328.9844,24.7637 330.5313,22.8262 Q332.0938,20.873 335.0469,20.873 Q335.875,20.873 336.625,21.0449 Q337.3906,21.2168 338.0625,21.5762 L338.0625,24.7793 Q337.3125,24.0918 336.6094,23.7793 Q335.9219,23.4668 335.1719,23.4668 Q333.5938,23.4668 332.7813,24.7168 Q331.9844,25.9668 331.9844,28.4355 Q331.9844,30.9043 332.7813,32.1543 Q333.5938,33.4043 335.1719,33.4043 Q335.9219,33.4043 336.6094,33.0918 Q337.3125,32.7793 338.0625,32.0918 L338.0625,35.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="62" x="357" y="35.1406">vector</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="47" x="482.5" y="8.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="45" x="483.5" y="27.7813">type</text><line style="stroke:#A80036;stroke-width:1.5;" x1="264.5" x2="525.5" y1="45.2168" y2="45.2168"/><ellipse cx="274.5" cy="56.2168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="189" x="284.5" y="67.7813">operator[](): type&amp;</text><ellipse cx="274.5" cy="79.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="236" x="284.5" y="91.0625">begin(): vector::iterator</text><ellipse cx="274.5" cy="102.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="232" x="284.5" y="114.3438">end(): vector::interface</text><path d="M6,209.7168 L6,266.2793 A0,0 0 0 0 6,266.2793 L232,266.2793 A0,0 0 0 0 232,266.2793 L232,241.998 L271,264.1387 L232,233.998 L232,219.7168 L222,209.7168 L6,209.7168 A0,0 0 0 0 6,209.7168 " fill="#FBFB77" filter="url(#f1gxv00yf1v71l)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M222,209.7168 L222,219.7168 L232,219.7168 L222,209.7168 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="205" x="12" y="233.2813">for object in objects:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="175" x="36" y="256.5625">object.method1()</text><!--MD5=[136c6175025d73406e63dd01ef345477]
reverse link SomeInterface to Object--><path codeLine="24" d="M652,132.3568 C652,148.9968 652,166.8368 652,183.2068 " fill="none" id="SomeInterface-backto-Object" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="645,132.1268,652,112.1268,659,132.1268,645,132.1268" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[69056f0c3c71062a4fcdbfa628497e8b]
reverse link SomeInterface to Composition--><path codeLine="25" d="M573.36,123.3868 C546.27,142.3968 515.84,163.7468 488.31,183.0568 " fill="none" id="SomeInterface-backto-Composition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="569.35,117.6568,589.74,111.8968,577.39,129.1168,569.35,117.6568" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b54651127c95f6dd53bd3a3f29582ebd]
reverse link vector to Composition--><path codeLine="26" d="M398.9,143.5368 C399.58,156.7468 400.28,170.3168 400.94,183.0068 " fill="none" id="vector-backto-Composition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="391.89,143.6068,397.85,123.2668,405.87,142.8868,391.89,143.6068" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[34133366c10310fadbe30f80772618d9]
link Composition$$$LEFT to Composition--><!--MD5=[263b51fa051057939e7a249e2ad3f70b]
@startuml
skinparamlocked defaultFontSize 20
interface SomeInterface {
    +method1()
    +method2()
}

class Object {
    ...
    +method1()
    +method2()
}

class Composition {
    -objects: SomeInterface[]
    +method1()
    +method2()
}

class vector <type> {
    +operator[](): type&
    +begin(): vector::iterator
    +end(): vector::interface
}

Object -u-|> SomeInterface
Composition -u-|> SomeInterface
Composition -u-|> vector

note left of Composition::method1()
    for object in objects:
        object.method1()
end note

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Ведёт себя как один объект
</span>
</li>
<li>
<span>
Все вызовы делегирует хранящимся в нём объектам
</span>
</li>
<li>
<span>
Иногда может агрегировать объекты
</span>
</li>
<li>
<span>
Хранимые объекты должны быть того же типа <code>SomeInterface</code>, что и компоновщик
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Группировка объектов в графическом редакторе</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_decorator_декоратор">5.5. Decorator (декоратор)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="454px" preserveAspectRatio="none" style="width:552px;height:454px;background:#FFFFFF;" version="1.1" viewBox="0 0 552 454" width="552px" zoomAndPan="magnify"><defs><filter height="300%" id="f15gu6f9zr3lvd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[4e13963c9dc916a21a8436ef39422b32]
class Component--><rect codeLine="3" fill="#FEFECE" filter="url(#f15gu6f9zr3lvd)" height="65.2813" id="Component" style="stroke:#A80036;stroke-width:1.5;" width="151" x="187" y="23"/><ellipse cx="203" cy="40" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M198.1875,35.4531 L198.1875,32.9219 L206.8594,32.9219 L206.8594,35.4531 L203.9688,35.4531 L203.9688,44.9531 L206.8594,44.9531 L206.8594,47.5 L198.1875,47.5 L198.1875,44.9531 L201.0781,44.9531 L201.0781,35.4531 L198.1875,35.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="117" x="218" y="46.9238">Component</text><line style="stroke:#A80036;stroke-width:1.5;" x1="188" x2="337" y1="57" y2="57"/><ellipse cx="198" cy="68" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="208" y="79.5645">method()</text><!--MD5=[321dae1e4c20a532a67879525d68ecc8]
class Decorator--><rect codeLine="7" fill="#FEFECE" filter="url(#f15gu6f9zr3lvd)" height="119.8438" id="Decorator" style="stroke:#A80036;stroke-width:1.5;" width="246" x="236.5" y="164"/><ellipse cx="306" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M309.0625,188.0781 Q308.375,188.4375 307.625,188.6094 Q306.875,188.7813 306.0469,188.7813 Q303.0938,188.7813 301.5313,186.8438 Q299.9844,184.8906 299.9844,181.2188 Q299.9844,177.5469 301.5313,175.6094 Q303.0938,173.6563 306.0469,173.6563 Q306.875,173.6563 307.625,173.8281 Q308.3906,174 309.0625,174.3594 L309.0625,177.5625 Q308.3125,176.875 307.6094,176.5625 Q306.9219,176.25 306.1719,176.25 Q304.5938,176.25 303.7813,177.5 Q302.9844,178.75 302.9844,181.2188 Q302.9844,183.6875 303.7813,184.9375 Q304.5938,186.1875 306.1719,186.1875 Q306.9219,186.1875 307.6094,185.875 Q308.3125,185.5625 309.0625,184.875 L309.0625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="328" y="187.9238">Decorator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="237.5" x2="481.5" y1="198" y2="198"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="244.5" y="206"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="257.5" y="220.5645">wrapee: Component&amp;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="237.5" x2="481.5" y1="229.2813" y2="229.2813"/><ellipse cx="247.5" cy="240.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="257.5" y="251.8457">method()</text><ellipse cx="247.5" cy="263.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="257.5" y="275.127">decorate()</text><!--MD5=[e17b787d69906b3f274da0ab749c8979]
class ComponentA--><rect codeLine="13" fill="#FEFECE" filter="url(#f15gu6f9zr3lvd)" height="96.5625" id="ComponentA" style="stroke:#A80036;stroke-width:1.5;" width="165" x="373" y="7"/><ellipse cx="389" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M392.0625,31.0781 Q391.375,31.4375 390.625,31.6094 Q389.875,31.7813 389.0469,31.7813 Q386.0938,31.7813 384.5313,29.8438 Q382.9844,27.8906 382.9844,24.2188 Q382.9844,20.5469 384.5313,18.6094 Q386.0938,16.6563 389.0469,16.6563 Q389.875,16.6563 390.625,16.8281 Q391.3906,17 392.0625,17.3594 L392.0625,20.5625 Q391.3125,19.875 390.6094,19.5625 Q389.9219,19.25 389.1719,19.25 Q387.5938,19.25 386.7813,20.5 Q385.9844,21.75 385.9844,24.2188 Q385.9844,26.6875 386.7813,27.9375 Q387.5938,29.1875 389.1719,29.1875 Q389.9219,29.1875 390.6094,28.875 Q391.3125,28.5625 392.0625,27.875 L392.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="404" y="30.9238">ComponentA</text><line style="stroke:#A80036;stroke-width:1.5;" x1="374" x2="537" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="379" y="63.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="374" x2="537" y1="72.2813" y2="72.2813"/><ellipse cx="384" cy="83.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="394" y="94.8457">method()</text><!--MD5=[9a3ad5f8fdde9490153b52b14dc179d4]
class DecoratorA--><rect codeLine="18" fill="#FEFECE" filter="url(#f15gu6f9zr3lvd)" height="96.5625" id="DecoratorA" style="stroke:#A80036;stroke-width:1.5;" width="146" x="195.5" y="344"/><ellipse cx="211.5" cy="361" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M214.5625,368.0781 Q213.875,368.4375 213.125,368.6094 Q212.375,368.7813 211.5469,368.7813 Q208.5938,368.7813 207.0313,366.8438 Q205.4844,364.8906 205.4844,361.2188 Q205.4844,357.5469 207.0313,355.6094 Q208.5938,353.6563 211.5469,353.6563 Q212.375,353.6563 213.125,353.8281 Q213.8906,354 214.5625,354.3594 L214.5625,357.5625 Q213.8125,356.875 213.1094,356.5625 Q212.4219,356.25 211.6719,356.25 Q210.0938,356.25 209.2813,357.5 Q208.4844,358.75 208.4844,361.2188 Q208.4844,363.6875 209.2813,364.9375 Q210.0938,366.1875 211.6719,366.1875 Q212.4219,366.1875 213.1094,365.875 Q213.8125,365.5625 214.5625,364.875 L214.5625,368.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="226.5" y="367.9238">DecoratorA</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196.5" x2="340.5" y1="378" y2="378"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="201.5" y="400.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196.5" x2="340.5" y1="409.2813" y2="409.2813"/><ellipse cx="206.5" cy="420.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="216.5" y="431.8457">decorate()</text><!--MD5=[3bfb7aaea34df602098e0014fe6c6361]
class DecoratorB--><rect codeLine="23" fill="#FEFECE" filter="url(#f15gu6f9zr3lvd)" height="96.5625" id="DecoratorB" style="stroke:#A80036;stroke-width:1.5;" width="146" x="376.5" y="344"/><ellipse cx="392.5" cy="361" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M395.5625,368.0781 Q394.875,368.4375 394.125,368.6094 Q393.375,368.7813 392.5469,368.7813 Q389.5938,368.7813 388.0313,366.8438 Q386.4844,364.8906 386.4844,361.2188 Q386.4844,357.5469 388.0313,355.6094 Q389.5938,353.6563 392.5469,353.6563 Q393.375,353.6563 394.125,353.8281 Q394.8906,354 395.5625,354.3594 L395.5625,357.5625 Q394.8125,356.875 394.1094,356.5625 Q393.4219,356.25 392.6719,356.25 Q391.0938,356.25 390.2813,357.5 Q389.4844,358.75 389.4844,361.2188 Q389.4844,363.6875 390.2813,364.9375 Q391.0938,366.1875 392.6719,366.1875 Q393.4219,366.1875 394.1094,365.875 Q394.8125,365.5625 395.5625,364.875 L395.5625,368.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="407.5" y="367.9238">DecoratorB</text><line style="stroke:#A80036;stroke-width:1.5;" x1="377.5" x2="521.5" y1="378" y2="378"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="382.5" y="400.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="377.5" x2="521.5" y1="409.2813" y2="409.2813"/><ellipse cx="387.5" cy="420.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="397.5" y="431.8457">decorate()</text><path d="M6,190.5 L6,247.0625 A0,0 0 0 0 6,247.0625 L201,247.0625 A0,0 0 0 0 201,247.0625 L201,222.7813 L240.5,244.9219 L201,214.7813 L201,200.5 L191,190.5 L6,190.5 A0,0 0 0 0 6,190.5 " fill="#FBFB77" filter="url(#f15gu6f9zr3lvd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M191,190.5 L191,200.5 L201,200.5 L191,190.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="12" y="214.0645">wrapee.method()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="12" y="237.3457">decorate()</text><!--MD5=[c50e16e7686754e8210f5940617c961a]
reverse link Component to Decorator--><path codeLine="28" d="M287.25,108.39 C287.25,108.39 287.25,163.91 287.25,163.91 " fill="none" id="Component-backto-Decorator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="280.25,108.39,287.25,88.39,294.25,108.39,280.25,108.39" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0e1923f0499fc91bb4d03c505921f404]
reverse link Component to ComponentA--><path codeLine="29" d="M358.22,56 C358.22,56 372.98,56 372.98,56 " fill="none" id="Component-backto-ComponentA" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="358.22,63,338.22,56,358.22,49,358.22,63" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3f5c8df49537dff424c897b262d16590]
link ComponentA to Decorator--><path codeLine="30" d="M427.75,104.24 C427.75,104.24 427.75,150.69 427.75,150.69 " fill="none" id="ComponentA-to-Decorator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="427.75,163.69,431.75,157.69,427.75,151.69,423.75,157.69,427.75,163.69" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[762f80f2d7665ac58c202db028cdce58]
reverse link Decorator to DecoratorA--><path codeLine="32" d="M289,304.36 C289,304.36 289,343.9 289,343.9 " fill="none" id="Decorator-backto-DecoratorA" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="282,304.36,289,284.36,296,304.36,282,304.36" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e93decb463d47c4efb57c2c87253bd5d]
reverse link Decorator to DecoratorB--><path codeLine="33" d="M429.5,304.36 C429.5,304.36 429.5,343.9 429.5,343.9 " fill="none" id="Decorator-backto-DecoratorB" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="422.5,304.36,429.5,284.36,436.5,304.36,422.5,304.36" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a863d6ed9c00d3699b0dada876a1cb6a]
link Decorator$$$LEFT to Decorator--><!--MD5=[86b2e438545f479161a96a71b40b2a01]
@startuml
skinparamlocked defaultFontSize 20
skinparam linetype ortho

interface Component {
    +method()
}

class Decorator {
    -wrapee: Component&
    +method()
    +decorate()
}

class ComponentA {
    {field} ...
    +method()
}

class DecoratorA {
    {field} ...
    +decorate()
}

class DecoratorB {
    {field} ...
    +decorate()
}

Decorator -u-|> Component
ComponentA -l-|> Component
ComponentA - -o Decorator

DecoratorA -u-|> Decorator
DecoratorB -u-|> Decorator

note left of Decorator::method()
    wrapee.method()
    decorate()
end note

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Повторяет интерфейс оборачиваемого объекта
</span>
</li>
<li>
<span>
Все вызовы делегируются оборачиваемым объектам, вызывая дополнительный код до или после операций объекта
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Рисование рамки вокруг символов, умляуты на глифах</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_facade_фасад">5.6. Facade (фасад)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="289px" preserveAspectRatio="none" style="width:571px;height:289px;background:#FFFFFF;" version="1.1" viewBox="0 0 571 289" width="571px" zoomAndPan="magnify"><defs><filter height="300%" id="f367ev3qemffc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[790e9955d9690e5344ead96b2c38e22e]
class Facade--><rect codeLine="1" fill="#FEFECE" filter="url(#f367ev3qemffc)" height="119.8438" id="Facade" style="stroke:#A80036;stroke-width:1.5;" width="134" x="215" y="156"/><ellipse cx="243.6" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M246.6625,180.0781 Q245.975,180.4375 245.225,180.6094 Q244.475,180.7813 243.6469,180.7813 Q240.6938,180.7813 239.1313,178.8438 Q237.5844,176.8906 237.5844,173.2188 Q237.5844,169.5469 239.1313,167.6094 Q240.6938,165.6563 243.6469,165.6563 Q244.475,165.6563 245.225,165.8281 Q245.9906,166 246.6625,166.3594 L246.6625,169.5625 Q245.9125,168.875 245.2094,168.5625 Q244.5219,168.25 243.7719,168.25 Q242.1938,168.25 241.3813,169.5 Q240.5844,170.75 240.5844,173.2188 Q240.5844,175.6875 241.3813,176.9375 Q242.1938,178.1875 243.7719,178.1875 Q244.5219,178.1875 245.2094,177.875 Q245.9125,177.5625 246.6625,176.875 L246.6625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="261.4" y="179.9238">Facade</text><line style="stroke:#A80036;stroke-width:1.5;" x1="216" x2="348" y1="190" y2="190"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="221" y="212.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="216" x2="348" y1="221.2813" y2="221.2813"/><ellipse cx="226" cy="232.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="236" y="243.8457">method1()</text><ellipse cx="226" cy="255.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="236" y="267.127">method2()</text><!--MD5=[334bc6e821f20ebf5a36dbaf3016f7a7]
class SubSystem1--><rect codeLine="7" fill="#FEFECE" filter="url(#f367ev3qemffc)" height="88.5625" id="SubSystem1" style="stroke:#A80036;stroke-width:1.5;" width="160" x="7" y="7"/><ellipse cx="23" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M26.0625,31.0781 Q25.375,31.4375 24.625,31.6094 Q23.875,31.7813 23.0469,31.7813 Q20.0938,31.7813 18.5313,29.8438 Q16.9844,27.8906 16.9844,24.2188 Q16.9844,20.5469 18.5313,18.6094 Q20.0938,16.6563 23.0469,16.6563 Q23.875,16.6563 24.625,16.8281 Q25.3906,17 26.0625,17.3594 L26.0625,20.5625 Q25.3125,19.875 24.6094,19.5625 Q23.9219,19.25 23.1719,19.25 Q21.5938,19.25 20.7813,20.5 Q19.9844,21.75 19.9844,24.2188 Q19.9844,26.6875 20.7813,27.9375 Q21.5938,29.1875 23.1719,29.1875 Q23.9219,29.1875 24.6094,28.875 Q25.3125,28.5625 26.0625,27.875 L26.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="38" y="30.9238">SubSystem1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="166" y1="41" y2="41"/><ellipse cx="18" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="60" x="28" y="63.5645">func()</text><ellipse cx="18" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="28" y="86.8457">another()</text><!--MD5=[8013acc3eee9b8d9be9ba663adab544a]
class SubSystem2--><rect codeLine="12" fill="#FEFECE" filter="url(#f367ev3qemffc)" height="88.5625" id="SubSystem2" style="stroke:#A80036;stroke-width:1.5;" width="160" x="202" y="7"/><ellipse cx="218" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M221.0625,31.0781 Q220.375,31.4375 219.625,31.6094 Q218.875,31.7813 218.0469,31.7813 Q215.0938,31.7813 213.5313,29.8438 Q211.9844,27.8906 211.9844,24.2188 Q211.9844,20.5469 213.5313,18.6094 Q215.0938,16.6563 218.0469,16.6563 Q218.875,16.6563 219.625,16.8281 Q220.3906,17 221.0625,17.3594 L221.0625,20.5625 Q220.3125,19.875 219.6094,19.5625 Q218.9219,19.25 218.1719,19.25 Q216.5938,19.25 215.7813,20.5 Q214.9844,21.75 214.9844,24.2188 Q214.9844,26.6875 215.7813,27.9375 Q216.5938,29.1875 218.1719,29.1875 Q218.9219,29.1875 219.6094,28.875 Q220.3125,28.5625 221.0625,27.875 L221.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="233" y="30.9238">SubSystem2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="203" x2="361" y1="41" y2="41"/><ellipse cx="213" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="223" y="63.5645">do()</text><ellipse cx="213" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="223" y="86.8457">make()</text><!--MD5=[1ba39166faadf2a5147fed90518b9de1]
class SubSystem3--><rect codeLine="17" fill="#FEFECE" filter="url(#f367ev3qemffc)" height="65.2813" id="SubSystem3" style="stroke:#A80036;stroke-width:1.5;" width="160" x="397" y="19"/><ellipse cx="413" cy="36" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M416.0625,43.0781 Q415.375,43.4375 414.625,43.6094 Q413.875,43.7813 413.0469,43.7813 Q410.0938,43.7813 408.5313,41.8438 Q406.9844,39.8906 406.9844,36.2188 Q406.9844,32.5469 408.5313,30.6094 Q410.0938,28.6563 413.0469,28.6563 Q413.875,28.6563 414.625,28.8281 Q415.3906,29 416.0625,29.3594 L416.0625,32.5625 Q415.3125,31.875 414.6094,31.5625 Q413.9219,31.25 413.1719,31.25 Q411.5938,31.25 410.7813,32.5 Q409.9844,33.75 409.9844,36.2188 Q409.9844,38.6875 410.7813,39.9375 Q411.5938,41.1875 413.1719,41.1875 Q413.9219,41.1875 414.6094,40.875 Q415.3125,40.5625 416.0625,39.875 L416.0625,43.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="428" y="42.9238">SubSystem3</text><line style="stroke:#A80036;stroke-width:1.5;" x1="398" x2="556" y1="53" y2="53"/><ellipse cx="408" cy="64" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="418" y="75.5645">some()</text><!--MD5=[b92d83a6161a25032bb2121552795505]
link SubSystem1 to Facade--><path codeLine="21" d="M139.26,96.05 C159.41,112.84 182.88,132.4 204.89,150.74 " fill="none" id="SubSystem1-to-Facade" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="214.89,159.07,212.8385,152.1569,205.6681,151.3917,207.7196,158.3048,214.89,159.07" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[42a0dfc3dd2338bb63fd6b6f4900a4a2]
link SubSystem2 to Facade--><path codeLine="22" d="M282,96.05 C282,110.37 282,126.7 282,142.58 " fill="none" id="SubSystem2-to-Facade" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="282,155.75,286,149.75,282,143.75,278,149.75,282,155.75" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f9983b244de0cf88abb8a4addb0a07e3]
link SubSystem3 to Facade--><path codeLine="23" d="M438.94,84.22 C416.33,103.05 386.84,127.64 359.52,150.4 " fill="none" id="SubSystem3-to-Facade" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="349.18,159.01,356.3504,158.2448,358.4019,151.3317,351.2315,152.0969,349.18,159.01" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d201aa58fa862a9ab9143f84c158aed1]
@startuml
skinparamlocked defaultFontSize 20
class Facade {
    {field}...
    +method1()
    +method2()
}

class SubSystem1 {
    +func()
    +another()
}

class SubSystem2 {
    +do()
    +make()
}

class SubSystem3 {
    +some()
}

SubSystem1 -d-* Facade
SubSystem2 -d-* Facade
SubSystem3 -d-* Facade

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Фасад необходим для упрощения использования несколькими системами классов или фреймворков
</span>
</li>
<li>
<span>
Реализует новый интерфейс
</span>
</li>
<li>
<span>
Содержит в себе много различных классов или подсистем
</span>
</li>
<li>
<span>
Частный случай фасада&#8201;&#8212;&#8201;адаптер
</span>
</li>
<li>
<span>
Излишняя осведомлённость обо всех объектах
</span>
</li>
<li>
<span>
Склонен становиться "божественным объектом"
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Почти все объекты вокруг</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_flyweight_легковес">5.7. Flyweight (легковес)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="469px" preserveAspectRatio="none" style="width:618px;height:469px;background:#FFFFFF;" version="1.1" viewBox="0 0 618 469" width="618px" zoomAndPan="magnify"><defs><filter height="300%" id="f11c8x5xvsuld3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><rect codeLine="1" fill="#FEFECE" filter="url(#f11c8x5xvsuld3)" height="88.5625" id="Client" style="stroke:#A80036;stroke-width:1.5;" width="121" x="312" y="7"/><ellipse cx="340.6" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M343.6625,31.0781 Q342.975,31.4375 342.225,31.6094 Q341.475,31.7813 340.6469,31.7813 Q337.6938,31.7813 336.1313,29.8438 Q334.5844,27.8906 334.5844,24.2188 Q334.5844,20.5469 336.1313,18.6094 Q337.6938,16.6563 340.6469,16.6563 Q341.475,16.6563 342.225,16.8281 Q342.9906,17 343.6625,17.3594 L343.6625,20.5625 Q342.9125,19.875 342.2094,19.5625 Q341.5219,19.25 340.7719,19.25 Q339.1938,19.25 338.3813,20.5 Q337.5844,21.75 337.5844,24.2188 Q337.5844,26.6875 338.3813,27.9375 Q339.1938,29.1875 340.7719,29.1875 Q341.5219,29.1875 342.2094,28.875 Q342.9125,28.5625 343.6625,27.875 L343.6625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="358.4" y="30.9238">Client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="313" x2="432" y1="41" y2="41"/><ellipse cx="323" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="333" y="63.5645">some()</text><ellipse cx="323" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="333" y="86.8457">method()</text><!--MD5=[fa8b5b34b8d7f7ba20b2a3875b5cbf5e]
class VeryComplexObject--><rect codeLine="6" fill="#FEFECE" filter="url(#f11c8x5xvsuld3)" height="143.125" id="VeryComplexObject" style="stroke:#A80036;stroke-width:1.5;" width="233" x="256" y="156"/><ellipse cx="272" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M275.0625,180.0781 Q274.375,180.4375 273.625,180.6094 Q272.875,180.7813 272.0469,180.7813 Q269.0938,180.7813 267.5313,178.8438 Q265.9844,176.8906 265.9844,173.2188 Q265.9844,169.5469 267.5313,167.6094 Q269.0938,165.6563 272.0469,165.6563 Q272.875,165.6563 273.625,165.8281 Q274.3906,166 275.0625,166.3594 L275.0625,169.5625 Q274.3125,168.875 273.6094,168.5625 Q272.9219,168.25 272.1719,168.25 Q270.5938,168.25 269.7813,169.5 Q268.9844,170.75 268.9844,173.2188 Q268.9844,175.6875 269.7813,176.9375 Q270.5938,178.1875 272.1719,178.1875 Q272.9219,178.1875 273.6094,177.875 Q274.3125,177.5625 275.0625,176.875 L275.0625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="199" x="287" y="179.9238">VeryComplexObject</text><line style="stroke:#A80036;stroke-width:1.5;" x1="257" x2="488" y1="190" y2="190"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="198"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="155" x="277" y="212.5645">obj1: Flyweight</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="221.2813"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="105" x="277" y="235.8457">obj2: Obj2</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="244.5625"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="105" x="277" y="259.127">obj3: Obj3</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="277" y="282.4082">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="257" x2="488" y1="291.125" y2="291.125"/><!--MD5=[0f9f5b132fe1117282936dc99885cc40]
class Flyweight--><rect codeLine="13" fill="#FEFECE" filter="url(#f11c8x5xvsuld3)" height="96.5625" id="Flyweight" style="stroke:#A80036;stroke-width:1.5;" width="147" x="457" y="359"/><ellipse cx="479.75" cy="376" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M482.8125,383.0781 Q482.125,383.4375 481.375,383.6094 Q480.625,383.7813 479.7969,383.7813 Q476.8438,383.7813 475.2813,381.8438 Q473.7344,379.8906 473.7344,376.2188 Q473.7344,372.5469 475.2813,370.6094 Q476.8438,368.6563 479.7969,368.6563 Q480.625,368.6563 481.375,368.8281 Q482.1406,369 482.8125,369.3594 L482.8125,372.5625 Q482.0625,371.875 481.3594,371.5625 Q480.6719,371.25 479.9219,371.25 Q478.3438,371.25 477.5313,372.5 Q476.7344,373.75 476.7344,376.2188 Q476.7344,378.6875 477.5313,379.9375 Q478.3438,381.1875 479.9219,381.1875 Q480.6719,381.1875 481.3594,380.875 Q482.0625,380.5625 482.8125,379.875 L482.8125,383.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="496.25" y="382.9238">Flyweight</text><line style="stroke:#A80036;stroke-width:1.5;" x1="458" x2="603" y1="393" y2="393"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="465" y="401"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="478" y="415.5645">cache: Obj1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="458" x2="603" y1="424.2813" y2="424.2813"/><ellipse cx="468" cy="435.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="478" y="446.8457">operation()</text><!--MD5=[536fe7577e8cf19597ee85886b82cd6a]
class AbstractFactory--><rect codeLine="18" fill="#FEFECE" filter="url(#f11c8x5xvsuld3)" height="96.5625" id="AbstractFactory" style="stroke:#A80036;stroke-width:1.5;" width="415" x="7" y="359"/><ellipse cx="131" cy="376" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M134.0625,383.0781 Q133.375,383.4375 132.625,383.6094 Q131.875,383.7813 131.0469,383.7813 Q128.0938,383.7813 126.5313,381.8438 Q124.9844,379.8906 124.9844,376.2188 Q124.9844,372.5469 126.5313,370.6094 Q128.0938,368.6563 131.0469,368.6563 Q131.875,368.6563 132.625,368.8281 Q133.3906,369 134.0625,369.3594 L134.0625,372.5625 Q133.3125,371.875 132.6094,371.5625 Q131.9219,371.25 131.1719,371.25 Q129.5938,371.25 128.7813,372.5 Q127.9844,373.75 127.9844,376.2188 Q127.9844,378.6875 128.7813,379.9375 Q129.5938,381.1875 131.1719,381.1875 Q131.9219,381.1875 132.6094,380.875 Q133.3125,380.5625 134.0625,379.875 L134.0625,383.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="158" x="153" y="382.9238">AbstractFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="421" y1="393" y2="393"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="401"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="388" x="28" y="415.5645">objects: map&lt;some types, Flyweight&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="421" y1="424.2813" y2="424.2813"/><ellipse cx="18" cy="435.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="355" x="28" y="446.8457">getObject(some types): Flyweight&amp;</text><!--MD5=[ee252abe62be492d4391a78e89bdbdd3]
link Client to VeryComplexObject--><path codeLine="23" d="M372.5,96.41 C372.5,110.49 372.5,126.58 372.5,142.54 " fill="none" id="Client-to-VeryComplexObject" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="372.5,155.86,376.5,149.86,372.5,143.86,368.5,149.86,372.5,155.86" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="272.8242" y="143.248">100500+</text><!--MD5=[a13bb28d0a6b8bbdf48f03dea1384381]
link VeryComplexObject to AbstractFactory--><path codeLine="24" d="M309.83,299.11 C295.2,315.59 279.79,332.95 265.72,348.8 " fill="none" id="VeryComplexObject-to-AbstractFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="256.69,358.96,263.6638,357.1254,264.6525,349.9824,257.6787,351.817,256.69,358.96" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a27394257fcd9d075790ee47ec426773]
link AbstractFactory to Flyweight--><path codeLine="25" d="M422.18,407.5 C429.41,407.5 436.64,407.5 443.87,407.5 " fill="none" id="AbstractFactory-to-Flyweight" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="456.88,407.5,450.88,403.5,444.88,407.5,450.88,411.5,456.88,407.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ed6425b028beabca23cbcbf1302d9e37]
link VeryComplexObject to Flyweight--><path codeLine="26" d="M435.17,299.11 C449.8,315.59 465.21,332.95 479.28,348.8 " fill="none" id="VeryComplexObject-to-Flyweight" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="488.31,358.96,487.3213,351.817,480.3475,349.9824,481.3362,357.1254,488.31,358.96" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="56" x="422.4395" y="346.1319">~100</text><!--MD5=[13e7dcada0a4476dda7c43ef0bbc84e0]
@startuml
skinparamlocked defaultFontSize 20
class Client {
    +some()
    +method()
}

class VeryComplexObject {
    -obj1: Flyweight
    -obj2: Obj2
    -obj3: Obj3
    {field}...
}

class Flyweight {
    -cache: Obj1
    +operation()
}

class AbstractFactory {
    -objects: map<some types, Flyweight>
    +getObject(some types): Flyweight&
}

Client - -* "100500+" VeryComplexObject
VeryComplexObject - -o AbstractFactory
AbstractFactory -r-* Flyweight
VeryComplexObject ..* "~100" Flyweight

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
<code>Flyweight</code> какая-либо повторяющая сущность объектов
</span>
</li>
<li>
<span>
Экономия памяти
</span>
</li>
<li>
<span>
Разделение объекта на более маленькие куски
</span>
</li>
<li>
<span>
Не подходит для уникальных объектов
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Пвторяющиеся элементы объектов в играх</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_proxy_заместитель">5.8. Proxy (заместитель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="289px" preserveAspectRatio="none" style="width:348px;height:289px;background:#FFFFFF;" version="1.1" viewBox="0 0 348 289" width="348px" zoomAndPan="magnify"><defs><filter height="300%" id="f1d571v89tr63s" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[2ef94bc619db2e243df53c024a0f8f99]
class IObject--><rect codeLine="1" fill="#FEFECE" filter="url(#f1d571v89tr63s)" height="88.5625" id="IObject" style="stroke:#A80036;stroke-width:1.5;" width="121" x="122" y="7"/><ellipse cx="144.75" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M139.9375,19.4531 L139.9375,16.9219 L148.6094,16.9219 L148.6094,19.4531 L145.7188,19.4531 L145.7188,28.9531 L148.6094,28.9531 L148.6094,31.5 L139.9375,31.5 L139.9375,28.9531 L142.8281,28.9531 L142.8281,19.4531 L139.9375,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="72" x="161.25" y="30.9238">IObject</text><line style="stroke:#A80036;stroke-width:1.5;" x1="123" x2="242" y1="41" y2="41"/><ellipse cx="133" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="143" y="63.5645">some()</text><ellipse cx="133" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="143" y="86.8457">method()</text><!--MD5=[f7109e258b7e3e4bb390e34b115b99ce]
class Proxy--><rect codeLine="6" fill="#FEFECE" filter="url(#f1d571v89tr63s)" height="119.8438" id="Proxy" style="stroke:#A80036;stroke-width:1.5;" width="171" x="7" y="156"/><ellipse cx="61" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M64.0625,180.0781 Q63.375,180.4375 62.625,180.6094 Q61.875,180.7813 61.0469,180.7813 Q58.0938,180.7813 56.5313,178.8438 Q54.9844,176.8906 54.9844,173.2188 Q54.9844,169.5469 56.5313,167.6094 Q58.0938,165.6563 61.0469,165.6563 Q61.875,165.6563 62.625,165.8281 Q63.3906,166 64.0625,166.3594 L64.0625,169.5625 Q63.3125,168.875 62.6094,168.5625 Q61.9219,168.25 61.1719,168.25 Q59.5938,168.25 58.7813,169.5 Q57.9844,170.75 57.9844,173.2188 Q57.9844,175.6875 58.7813,176.9375 Q59.5938,178.1875 61.1719,178.1875 Q61.9219,178.1875 62.6094,177.875 Q63.3125,177.5625 64.0625,176.875 L64.0625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="83" y="179.9238">Proxy</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="177" y1="190" y2="190"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="198"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="28" y="212.5645">cache: IObject</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="177" y1="221.2813" y2="221.2813"/><ellipse cx="18" cy="232.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="28" y="243.8457">some()</text><ellipse cx="18" cy="255.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="28" y="267.127">method()</text><!--MD5=[dbb8b4f13c7b21394f9d757e58732f45]
class Service--><rect codeLine="12" fill="#FEFECE" filter="url(#f1d571v89tr63s)" height="119.8438" id="Service" style="stroke:#A80036;stroke-width:1.5;" width="121" x="213" y="156"/><ellipse cx="235.3" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M238.3625,180.0781 Q237.675,180.4375 236.925,180.6094 Q236.175,180.7813 235.3469,180.7813 Q232.3938,180.7813 230.8313,178.8438 Q229.2844,176.8906 229.2844,173.2188 Q229.2844,169.5469 230.8313,167.6094 Q232.3938,165.6563 235.3469,165.6563 Q236.175,165.6563 236.925,165.8281 Q237.6906,166 238.3625,166.3594 L238.3625,169.5625 Q237.6125,168.875 236.9094,168.5625 Q236.2219,168.25 235.4719,168.25 Q233.8938,168.25 233.0813,169.5 Q232.2844,170.75 232.2844,173.2188 Q232.2844,175.6875 233.0813,176.9375 Q233.8938,178.1875 235.4719,178.1875 Q236.2219,178.1875 236.9094,177.875 Q237.6125,177.5625 238.3625,176.875 L238.3625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="251.7" y="179.9238">Service</text><line style="stroke:#A80036;stroke-width:1.5;" x1="214" x2="333" y1="190" y2="190"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="219" y="212.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="214" x2="333" y1="221.2813" y2="221.2813"/><ellipse cx="224" cy="232.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="234" y="243.8457">some()</text><ellipse cx="224" cy="255.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="234" y="267.127">method()</text><!--MD5=[36c3a0f606bf14304a284d58168afe43]
reverse link IObject to Proxy--><path codeLine="18" d="M148.67,113.57 C141.03,127.38 132.92,142.02 125.32,155.75 " fill="none" id="IObject-backto-Proxy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="142.57,110.15,158.38,96.05,154.82,116.93,142.57,110.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c06e0f4d3fead846c1ea49320ee3970f]
link Proxy to Service--><path codeLine="19" d="M178.05,216 C185.27,216 192.5,216 199.72,216 " fill="none" id="Proxy-to-Service" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="212.73,216,206.73,212,200.73,216,206.73,220,212.73,216" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fb0415fb86a0445c404deea4d2ee3321]
reverse link IObject to Service--><path codeLine="20" d="M216.7,113.57 C224.43,127.38 232.63,142.02 240.32,155.75 " fill="none" id="IObject-backto-Service" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="210.55,116.92,206.89,96.05,222.77,110.08,210.55,116.92" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f05ece5c4a7b366a8ee53a0401da57f9]
@startuml
skinparamlocked defaultFontSize 20
interface IObject {
    +some()
    +method()
}

class Proxy {
    -cache: IObject
    +some()
    +method()
}

class Service {
    {field}...
    +some()
    +method()
}

Proxy -u-|> IObject
Proxy -r-* Service
Service -u-|> IObject

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Адаптер и декоратор в одном лице, а также фасад
</span>
</li>
<li>
<span>
В основном используется для кеширования результатов
</span>
</li>
<li>
<span>
В качестве кеша может использоваться сложный сервис (с запросами по сети, сохранениями файлов и т.д.)
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p><code>std::vector&lt;bool&gt;::reference</code></p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_поведенческие_паттерны">6. Поведенческие паттерны</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_общие_сведения_3">6.1. Общие сведения</h1>

<div class="sectionbody">
<div class="paragraph"><p>Определяют взаимодействие классов</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_chain_of_responsibility_цепочка_обязанностей">6.2. Chain of responsibility (цепочка обязанностей)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="345px" preserveAspectRatio="none" style="width:720px;height:345px;background:#FFFFFF;" version="1.1" viewBox="0 0 720 345" width="720px" zoomAndPan="magnify"><defs><filter height="300%" id="f1t4zt91i75l42" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[0851f84a889f989e7bb0bebc385d0f09]
class Request--><rect codeLine="1" fill="#FEFECE" filter="url(#f1t4zt91i75l42)" height="42" id="Request" style="stroke:#A80036;stroke-width:1.5;" width="116" x="20" y="289"/><ellipse cx="36" cy="306" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M39.0625,313.0781 Q38.375,313.4375 37.625,313.6094 Q36.875,313.7813 36.0469,313.7813 Q33.0938,313.7813 31.5313,311.8438 Q29.9844,309.8906 29.9844,306.2188 Q29.9844,302.5469 31.5313,300.6094 Q33.0938,298.6563 36.0469,298.6563 Q36.875,298.6563 37.625,298.8281 Q38.3906,299 39.0625,299.3594 L39.0625,302.5625 Q38.3125,301.875 37.6094,301.5625 Q36.9219,301.25 36.1719,301.25 Q34.5938,301.25 33.7813,302.5 Q32.9844,303.75 32.9844,306.2188 Q32.9844,308.6875 33.7813,309.9375 Q34.5938,311.1875 36.1719,311.1875 Q36.9219,311.1875 37.6094,310.875 Q38.3125,310.5625 39.0625,309.875 L39.0625,313.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="82" x="51" y="312.9238">Request</text><line style="stroke:#A80036;stroke-width:1.5;" x1="21" x2="135" y1="323" y2="323"/><!--MD5=[a51f41d0a76fb1f7fe6fcabd9b439558]
class IProcessor--><rect codeLine="3" fill="#FEFECE" filter="url(#f1t4zt91i75l42)" height="96.5625" id="IProcessor" style="stroke:#A80036;stroke-width:1.5;" width="238" x="224" y="7"/><ellipse cx="288" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M291.0625,31.0781 Q290.375,31.4375 289.625,31.6094 Q288.875,31.7813 288.0469,31.7813 Q285.0938,31.7813 283.5313,29.8438 Q281.9844,27.8906 281.9844,24.2188 Q281.9844,20.5469 283.5313,18.6094 Q285.0938,16.6563 288.0469,16.6563 Q288.875,16.6563 289.625,16.8281 Q290.3906,17 291.0625,17.3594 L291.0625,20.5625 Q290.3125,19.875 289.6094,19.5625 Q288.9219,19.25 288.1719,19.25 Q286.5938,19.25 285.7813,20.5 Q284.9844,21.75 284.9844,24.2188 Q284.9844,26.6875 285.7813,27.9375 Q286.5938,29.1875 288.1719,29.1875 Q288.9219,29.1875 289.6094,28.875 Q290.3125,28.5625 291.0625,27.875 L291.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="101" x="310" y="30.9238">IProcessor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="225" x2="461" y1="41" y2="41"/><polygon fill="none" points="235,47,239,51,235,55,231,51" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="211" x="245" y="63.5645">successor: IProcessor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="225" x2="461" y1="72.2813" y2="72.2813"/><ellipse cx="235" cy="83.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="148" x="245" y="94.8457">process(): bool</text><!--MD5=[9f4a3a4bd076ac9d6abf5b3b758b1697]
class Processor1--><rect codeLine="8" fill="#FEFECE" filter="url(#f1t4zt91i75l42)" height="65.2813" id="Processor1" style="stroke:#A80036;stroke-width:1.5;" width="142" x="7" y="164"/><ellipse cx="23" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M26.0625,188.0781 Q25.375,188.4375 24.625,188.6094 Q23.875,188.7813 23.0469,188.7813 Q20.0938,188.7813 18.5313,186.8438 Q16.9844,184.8906 16.9844,181.2188 Q16.9844,177.5469 18.5313,175.6094 Q20.0938,173.6563 23.0469,173.6563 Q23.875,173.6563 24.625,173.8281 Q25.3906,174 26.0625,174.3594 L26.0625,177.5625 Q25.3125,176.875 24.6094,176.5625 Q23.9219,176.25 23.1719,176.25 Q21.5938,176.25 20.7813,177.5 Q19.9844,178.75 19.9844,181.2188 Q19.9844,183.6875 20.7813,184.9375 Q21.5938,186.1875 23.1719,186.1875 Q23.9219,186.1875 24.6094,185.875 Q25.3125,185.5625 26.0625,184.875 L26.0625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="38" y="187.9238">Processor1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="148" y1="198" y2="198"/><ellipse cx="18" cy="209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="28" y="220.5645">process()</text><!--MD5=[a1a430e0d06de899a4821b06908065c9]
class Processor2--><rect codeLine="12" fill="#FEFECE" filter="url(#f1t4zt91i75l42)" height="65.2813" id="Processor2" style="stroke:#A80036;stroke-width:1.5;" width="142" x="184" y="164"/><ellipse cx="200" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M203.0625,188.0781 Q202.375,188.4375 201.625,188.6094 Q200.875,188.7813 200.0469,188.7813 Q197.0938,188.7813 195.5313,186.8438 Q193.9844,184.8906 193.9844,181.2188 Q193.9844,177.5469 195.5313,175.6094 Q197.0938,173.6563 200.0469,173.6563 Q200.875,173.6563 201.625,173.8281 Q202.3906,174 203.0625,174.3594 L203.0625,177.5625 Q202.3125,176.875 201.6094,176.5625 Q200.9219,176.25 200.1719,176.25 Q198.5938,176.25 197.7813,177.5 Q196.9844,178.75 196.9844,181.2188 Q196.9844,183.6875 197.7813,184.9375 Q198.5938,186.1875 200.1719,186.1875 Q200.9219,186.1875 201.6094,185.875 Q202.3125,185.5625 203.0625,184.875 L203.0625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="215" y="187.9238">Processor2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="185" x2="325" y1="198" y2="198"/><ellipse cx="195" cy="209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="205" y="220.5645">process()</text><!--MD5=[2a6a6f74ca8c4379c7ad76868bb4865f]
class Processor3--><rect codeLine="16" fill="#FEFECE" filter="url(#f1t4zt91i75l42)" height="65.2813" id="Processor3" style="stroke:#A80036;stroke-width:1.5;" width="142" x="361" y="164"/><ellipse cx="377" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M380.0625,188.0781 Q379.375,188.4375 378.625,188.6094 Q377.875,188.7813 377.0469,188.7813 Q374.0938,188.7813 372.5313,186.8438 Q370.9844,184.8906 370.9844,181.2188 Q370.9844,177.5469 372.5313,175.6094 Q374.0938,173.6563 377.0469,173.6563 Q377.875,173.6563 378.625,173.8281 Q379.3906,174 380.0625,174.3594 L380.0625,177.5625 Q379.3125,176.875 378.6094,176.5625 Q377.9219,176.25 377.1719,176.25 Q375.5938,176.25 374.7813,177.5 Q373.9844,178.75 373.9844,181.2188 Q373.9844,183.6875 374.7813,184.9375 Q375.5938,186.1875 377.1719,186.1875 Q377.9219,186.1875 378.6094,185.875 Q379.3125,185.5625 380.0625,184.875 L380.0625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="392" y="187.9238">Processor3</text><line style="stroke:#A80036;stroke-width:1.5;" x1="362" x2="502" y1="198" y2="198"/><ellipse cx="372" cy="209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="382" y="220.5645">process()</text><!--MD5=[16b1efe33ff8fe2025015a9ba88e83eb]
class EndProcessor--><rect codeLine="20" fill="#FEFECE" filter="url(#f1t4zt91i75l42)" height="65.2813" id="EndProcessor" style="stroke:#A80036;stroke-width:1.5;" width="168" x="538" y="164"/><ellipse cx="554" cy="181" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M557.0625,188.0781 Q556.375,188.4375 555.625,188.6094 Q554.875,188.7813 554.0469,188.7813 Q551.0938,188.7813 549.5313,186.8438 Q547.9844,184.8906 547.9844,181.2188 Q547.9844,177.5469 549.5313,175.6094 Q551.0938,173.6563 554.0469,173.6563 Q554.875,173.6563 555.625,173.8281 Q556.3906,174 557.0625,174.3594 L557.0625,177.5625 Q556.3125,176.875 555.6094,176.5625 Q554.9219,176.25 554.1719,176.25 Q552.5938,176.25 551.7813,177.5 Q550.9844,178.75 550.9844,181.2188 Q550.9844,183.6875 551.7813,184.9375 Q552.5938,186.1875 554.1719,186.1875 Q554.9219,186.1875 555.6094,185.875 Q556.3125,185.5625 557.0625,184.875 L557.0625,188.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="134" x="569" y="187.9238">EndProcessor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="539" x2="705" y1="198" y2="198"/><ellipse cx="549" cy="209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="559" y="220.5645">process()</text><!--MD5=[a040e1248ad3863d54dedccf55381723]
reverse link Processor1 to Request--><path codeLine="24" d="M78,242.3 C78,258.45 78,275.88 78,288.87 " fill="none" id="Processor1-backto-Request" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="78,229.15,74,235.15,78,241.15,82,235.15,78,229.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ac4aa2b88227a55e929915b992aa0d13]
link Processor1 to Processor2--><path codeLine="25" d="M149.21,196.5 C156.45,196.5 163.68,196.5 170.91,196.5 " fill="none" id="Processor1-to-Processor2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="183.93,196.5,177.93,192.5,171.93,196.5,177.93,200.5,183.93,196.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fd8857e8bc07a6e4f72b818b448d87d6]
link Processor2 to Processor3--><path codeLine="26" d="M326.21,196.5 C333.45,196.5 340.68,196.5 347.91,196.5 " fill="none" id="Processor2-to-Processor3" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="360.93,196.5,354.93,192.5,348.93,196.5,354.93,200.5,360.93,196.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[85176a46698112e3164f8ee916f3d087]
link Processor3 to EndProcessor--><path codeLine="27" d="M503.25,196.5 C510.31,196.5 517.37,196.5 524.44,196.5 " fill="none" id="Processor3-to-EndProcessor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="537.58,196.5,531.58,192.5,525.58,196.5,531.58,200.5,537.58,196.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b1e30d9570fdd2da2d36d3be19fad5ee]
reverse link IProcessor to Processor1--><path codeLine="29" d="M234.23,113.55 C201.47,130.73 166.71,148.97 138.32,163.86 " fill="none" id="IProcessor-backto-Processor1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="231.21,107.23,252.17,104.14,237.71,119.63,231.21,107.23" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7569e2161f963621ebca56fcc47b075c]
reverse link IProcessor to Processor2--><path codeLine="30" d="M301.94,121.35 C292.61,136.09 283.11,151.11 275.11,163.74 " fill="none" id="IProcessor-backto-Processor2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="296.1,117.49,312.72,104.34,307.93,124.98,296.1,117.49" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ac45d5d8a166a20f0ebca51210667c78]
reverse link IProcessor to Processor3--><path codeLine="31" d="M384.52,121.35 C393.96,136.09 403.58,151.11 411.66,163.74 " fill="none" id="IProcessor-backto-Processor3" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="378.52,124.95,373.63,104.34,390.31,117.4,378.52,124.95" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[537861a06619b64e7eee6bc97b9d3c92]
reverse link IProcessor to EndProcessor--><path codeLine="32" d="M456.56,113.07 C491.32,130.4 528.32,148.83 558.49,163.86 " fill="none" id="IProcessor-backto-EndProcessor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="453.41,119.33,438.63,104.14,459.65,106.79,453.41,119.33" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bcdc81376260b147ca8150806cd12ed2]
@startuml
skinparamlocked defaultFontSize 20
class Request

class IProcessor {
    #successor: IProcessor
    +process(): bool
}

class Processor1 {
    +process()
}

class Processor2 {
    +process()
}

class Processor3 {
    +process()
}

class EndProcessor {
    +process()
}

Request -u-o Processor1
Processor1 -r-o Processor2
Processor2 -r-o Processor3
Processor3 -r-o EndProcessor

Processor1 -u-|> IProcessor
Processor2 -u-|> IProcessor
Processor3 -u-|> IProcessor
EndProcessor -u-|> IProcessor

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Каждый в цепочке либо обрабатывает запрос, либо передаёт дальше
</span>
</li>
<li>
<span>
В случае обработки запроса цепочка может быть либо прервана, либо продолжена
</span>
</li>
<li>
<span>
Реализация "луковицей"
</span>
</li>
<li>
<span>
Возможна реализация через брокера и пайплайн (компоновщик)
</span>
</li>
<li>
<span>
<code>EndProcessor</code> может потерять запрос
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Общение с техподдержкой</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_command_команда">6.3. Command (команда)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="401px" preserveAspectRatio="none" style="width:525px;height:401px;background:#FFFFFF;" version="1.1" viewBox="0 0 525 401" width="525px" zoomAndPan="magnify"><defs><filter height="300%" id="f1s8pphd31r5s7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[521817ab83e81da341a3f4b5e91bae41]
class Command--><rect codeLine="1" fill="#FEFECE" filter="url(#f1s8pphd31r5s7)" height="65.2813" id="Command" style="stroke:#A80036;stroke-width:1.5;" width="138" x="292.5" y="7"/><ellipse cx="308.5" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M303.6875,19.4531 L303.6875,16.9219 L312.3594,16.9219 L312.3594,19.4531 L309.4688,19.4531 L309.4688,28.9531 L312.3594,28.9531 L312.3594,31.5 L303.6875,31.5 L303.6875,28.9531 L306.5781,28.9531 L306.5781,19.4531 L303.6875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="104" x="323.5" y="30.9238">Command</text><line style="stroke:#A80036;stroke-width:1.5;" x1="293.5" x2="429.5" y1="41" y2="41"/><ellipse cx="303.5" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="313.5" y="63.5645">execute()</text><!--MD5=[b10028defc39ad0b2d4ef87d6dce10ee]
class Paste--><rect codeLine="5" fill="#FEFECE" filter="url(#f1s8pphd31r5s7)" height="96.5625" id="Paste" style="stroke:#A80036;stroke-width:1.5;" width="159" x="195" y="133"/><ellipse cx="243" cy="150" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M246.0625,157.0781 Q245.375,157.4375 244.625,157.6094 Q243.875,157.7813 243.0469,157.7813 Q240.0938,157.7813 238.5313,155.8438 Q236.9844,153.8906 236.9844,150.2188 Q236.9844,146.5469 238.5313,144.6094 Q240.0938,142.6563 243.0469,142.6563 Q243.875,142.6563 244.625,142.8281 Q245.3906,143 246.0625,143.3594 L246.0625,146.5625 Q245.3125,145.875 244.6094,145.5625 Q243.9219,145.25 243.1719,145.25 Q241.5938,145.25 240.7813,146.5 Q239.9844,147.75 239.9844,150.2188 Q239.9844,152.6875 240.7813,153.9375 Q241.5938,155.1875 243.1719,155.1875 Q243.9219,155.1875 244.6094,154.875 Q245.3125,154.5625 246.0625,153.875 L246.0625,157.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="265" y="156.9238">Paste</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196" x2="353" y1="167" y2="167"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="203" y="175"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132" x="216" y="189.5645">cache: data&amp;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196" x2="353" y1="198.2813" y2="198.2813"/><ellipse cx="206" cy="209.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="216" y="220.8457">execute()</text><!--MD5=[610e044baa5809942c5058657fa8e1e8]
class Copy--><rect codeLine="10" fill="#FEFECE" filter="url(#f1s8pphd31r5s7)" height="96.5625" id="Copy" style="stroke:#A80036;stroke-width:1.5;" width="122" x="389.5" y="133"/><ellipse cx="422.6" cy="150" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M425.6625,157.0781 Q424.975,157.4375 424.225,157.6094 Q423.475,157.7813 422.6469,157.7813 Q419.6938,157.7813 418.1313,155.8438 Q416.5844,153.8906 416.5844,150.2188 Q416.5844,146.5469 418.1313,144.6094 Q419.6938,142.6563 422.6469,142.6563 Q423.475,142.6563 424.225,142.8281 Q424.9906,143 425.6625,143.3594 L425.6625,146.5625 Q424.9125,145.875 424.2094,145.5625 Q423.5219,145.25 422.7719,145.25 Q421.1938,145.25 420.3813,146.5 Q419.5844,147.75 419.5844,150.2188 Q419.5844,152.6875 420.3813,153.9375 Q421.1938,155.1875 422.7719,155.1875 Q423.5219,155.1875 424.2094,154.875 Q424.9125,154.5625 425.6625,153.875 L425.6625,157.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="50" x="441.4" y="156.9238">Copy</text><line style="stroke:#A80036;stroke-width:1.5;" x1="390.5" x2="510.5" y1="167" y2="167"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="397.5" y="175"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="45" x="410.5" y="189.5645">data</text><line style="stroke:#A80036;stroke-width:1.5;" x1="390.5" x2="510.5" y1="198.2813" y2="198.2813"/><ellipse cx="400.5" cy="209.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="410.5" y="220.8457">execute()</text><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><rect codeLine="15" fill="#FEFECE" filter="url(#f1s8pphd31r5s7)" height="96.5625" id="Client" style="stroke:#A80036;stroke-width:1.5;" width="232" x="262.5" y="291"/><ellipse cx="344.5" cy="308" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M347.5625,315.0781 Q346.875,315.4375 346.125,315.6094 Q345.375,315.7813 344.5469,315.7813 Q341.5938,315.7813 340.0313,313.8438 Q338.4844,311.8906 338.4844,308.2188 Q338.4844,304.5469 340.0313,302.6094 Q341.5938,300.6563 344.5469,300.6563 Q345.375,300.6563 346.125,300.8281 Q346.8906,301 347.5625,301.3594 L347.5625,304.5625 Q346.8125,303.875 346.1094,303.5625 Q345.4219,303.25 344.6719,303.25 Q343.0938,303.25 342.2813,304.5 Q341.4844,305.75 341.4844,308.2188 Q341.4844,310.6875 342.2813,311.9375 Q343.0938,313.1875 344.6719,313.1875 Q345.4219,313.1875 346.1094,312.875 Q346.8125,312.5625 347.5625,311.875 L347.5625,315.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="366.5" y="314.9238">Client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="263.5" x2="493.5" y1="325" y2="325"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="270.5" y="333"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="205" x="283.5" y="347.5645">actions: Command[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="263.5" x2="493.5" y1="356.2813" y2="356.2813"/><ellipse cx="273.5" cy="367.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="64" x="283.5" y="378.8457">send()</text><!--MD5=[c60af77fe5573b84a4aa4bce89659574]
class Server--><rect codeLine="20" fill="#FEFECE" filter="url(#f1s8pphd31r5s7)" height="88.5625" id="Server" style="stroke:#A80036;stroke-width:1.5;" width="115" x="7" y="295"/><ellipse cx="30.65" cy="312" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M33.7125,319.0781 Q33.025,319.4375 32.275,319.6094 Q31.525,319.7813 30.6969,319.7813 Q27.7438,319.7813 26.1813,317.8438 Q24.6344,315.8906 24.6344,312.2188 Q24.6344,308.5469 26.1813,306.6094 Q27.7438,304.6563 30.6969,304.6563 Q31.525,304.6563 32.275,304.8281 Q33.0406,305 33.7125,305.3594 L33.7125,308.5625 Q32.9625,307.875 32.2594,307.5625 Q31.5719,307.25 30.8219,307.25 Q29.2438,307.25 28.4313,308.5 Q27.6344,309.75 27.6344,312.2188 Q27.6344,314.6875 28.4313,315.9375 Q29.2438,317.1875 30.8219,317.1875 Q31.5719,317.1875 32.2594,316.875 Q32.9625,316.5625 33.7125,315.875 L33.7125,319.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="64" x="47.35" y="318.9238">Server</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="121" y1="329" y2="329"/><ellipse cx="18" cy="340" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="88" x="28" y="351.5645">receive()</text><ellipse cx="18" cy="363.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="28" y="374.8457">apply()</text><!--MD5=[d206e15989b7717142adec851b9cb434]
link Paste to Client--><path codeLine="25" d="M306.27,230.15 C316.7,245.81 328.43,263.39 339.34,279.77 " fill="none" id="Paste-to-Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="346.75,290.87,346.7478,283.6589,340.0906,280.8874,340.0928,288.0985,346.75,290.87" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6bc1361d3e962d244b1c1a2f5be005f7]
link Copy to Client--><path codeLine="26" d="M428.51,230.15 C421.42,245.5 413.48,262.71 406.05,278.82 " fill="none" id="Copy-to-Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="400.48,290.87,406.6253,287.0971,405.5062,279.9733,399.3609,283.7463,400.48,290.87" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[28960622eb3c9b8b18b3724407c8edd1]
reverse link Server to Client--><path codeLine="28" d="M127.22,339.5 C165.88,339.5 216.64,339.5 262.41,339.5 " fill="none" id="Server-backto-Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="122.09,339.5,131.09,343.5,127.09,339.5,131.09,335.5,122.09,339.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="140.25" y="331.0645">Command</text><!--MD5=[faa2749698dbbb0d587237dbab0b6691]
reverse link Command to Copy--><path codeLine="30" d="M392.52,89.3 C401.51,103.43 411.3,118.84 420.24,132.9 " fill="none" id="Command-backto-Copy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="386.52,92.9,381.7,72.27,398.33,85.39,386.52,92.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3f4c94d6c25c51f018ce3b2d202eb5ec]
reverse link Command to Paste--><path codeLine="31" d="M331.18,89.3 C322.39,103.43 312.82,118.84 304.08,132.9 " fill="none" id="Command-backto-Paste" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="325.26,85.56,341.76,72.27,337.15,92.95,325.26,85.56" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[20e86b33aea9ecccec196ab453d1d926]
@startuml
skinparamlocked defaultFontSize 20
interface Command {
    +execute()
}

class Paste {
    -cache: data&
    +execute()
}

class Copy {
    -data
    +execute()
}

class Client {
    -actions: Command[]
    +send()
}

class Server {
    +receive()
    +apply()
}

Paste -d-o Client
Copy -d-o Client

Client -l-> Server: Command

Copy -u-|> Command
Paste -u-|> Command

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Отложенный вызов
</span>
</li>
<li>
<span>
Лямбда-функции
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Транзакции в базе данных, <code>std::bind</code></p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_iterator_итератор">6.4. Iterator (итератор)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="317px" preserveAspectRatio="none" style="width:513px;height:317px;background:#FFFFFF;" version="1.1" viewBox="0 0 513 317" width="513px" zoomAndPan="magnify"><defs><filter height="300%" id="f1a80nhw43zmnn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[023ecf6702e3ca2ce47ae747eafb20f1]
class Iterator--><rect codeLine="1" fill="#FEFECE" filter="url(#f1a80nhw43zmnn)" height="88.5625" id="Iterator" style="stroke:#A80036;stroke-width:1.5;" width="225" x="15" y="26.7168"/><ellipse cx="59.8" cy="43.7168" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M54.9875,39.1699 L54.9875,36.6387 L63.6594,36.6387 L63.6594,39.1699 L60.7688,39.1699 L60.7688,48.6699 L63.6594,48.6699 L63.6594,51.2168 L54.9875,51.2168 L54.9875,48.6699 L57.8781,48.6699 L57.8781,39.1699 L54.9875,39.1699 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="74" x="81.2" y="50.6406">Iterator</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="192" y="23.7168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="193" y="43.2813">Type</text><line style="stroke:#A80036;stroke-width:1.5;" x1="16" x2="239" y1="60.7168" y2="60.7168"/><ellipse cx="26" cy="71.7168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="198" x="36" y="83.2813">operator++(): self&amp;</text><ellipse cx="26" cy="94.998" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="187" x="36" y="106.5625">operator*(): Type&amp;</text><!--MD5=[47de47a8b5f06cbc5e036fae0a9149b7]
class Iterable--><rect codeLine="6" fill="#FEFECE" filter="url(#f1a80nhw43zmnn)" height="119.8438" id="Iterable" style="stroke:#A80036;stroke-width:1.5;" width="201" x="279" y="11.2168"/><ellipse cx="311.65" cy="28.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M314.7125,35.2949 Q314.025,35.6543 313.275,35.8262 Q312.525,35.998 311.6969,35.998 Q308.7438,35.998 307.1813,34.0605 Q305.6344,32.1074 305.6344,28.4355 Q305.6344,24.7637 307.1813,22.8262 Q308.7438,20.873 311.6969,20.873 Q312.525,20.873 313.275,21.0449 Q314.0406,21.2168 314.7125,21.5762 L314.7125,24.7793 Q313.9625,24.0918 313.2594,23.7793 Q312.5719,23.4668 311.8219,23.4668 Q310.2438,23.4668 309.4313,24.7168 Q308.6344,25.9668 308.6344,28.4355 Q308.6344,30.9043 309.4313,32.1543 Q310.2438,33.4043 311.8219,33.4043 Q312.5719,33.4043 313.2594,33.0918 Q313.9625,32.7793 314.7125,32.0918 L314.7125,35.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="330.35" y="35.1406">Iterable</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="432" y="8.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="433" y="27.7813">Type</text><line style="stroke:#A80036;stroke-width:1.5;" x1="280" x2="479" y1="45.2168" y2="45.2168"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="287" y="53.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="300" y="67.7813">collection: Type[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="280" x2="479" y1="76.498" y2="76.498"/><ellipse cx="290" cy="87.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="300" y="99.0625">begin()</text><ellipse cx="290" cy="110.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="300" y="122.3438">end()</text><!--MD5=[ca16213d7dc0ad602ce0c9c1d01e5b9d]
class InputIterator--><rect codeLine="12" fill="#FEFECE" filter="url(#f1a80nhw43zmnn)" height="88.5625" id="InputIterator" style="stroke:#A80036;stroke-width:1.5;" width="225" x="7" y="202.7168"/><ellipse cx="27.95" cy="219.7168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M31.0125,226.7949 Q30.325,227.1543 29.575,227.3262 Q28.825,227.498 27.9969,227.498 Q25.0438,227.498 23.4813,225.5605 Q21.9344,223.6074 21.9344,219.9355 Q21.9344,216.2637 23.4813,214.3262 Q25.0438,212.373 27.9969,212.373 Q28.825,212.373 29.575,212.5449 Q30.3406,212.7168 31.0125,213.0762 L31.0125,216.2793 Q30.2625,215.5918 29.5594,215.2793 Q28.8719,214.9668 28.1219,214.9668 Q26.5438,214.9668 25.7313,216.2168 Q24.9344,217.4668 24.9344,219.9355 Q24.9344,222.4043 25.7313,223.6543 Q26.5438,224.9043 28.1219,224.9043 Q28.8719,224.9043 29.5594,224.5918 Q30.2625,224.2793 31.0125,223.5918 L31.0125,226.7949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="127" x="44.05" y="226.6406">InputIterator</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="184" y="199.7168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="185" y="219.2813">Type</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="231" y1="236.7168" y2="236.7168"/><ellipse cx="18" cy="247.7168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="198" x="28" y="259.2813">operator++(): self&amp;</text><ellipse cx="18" cy="270.998" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="187" x="28" y="282.5625">operator*(): Type&amp;</text><!--MD5=[5d10ce46af16934260ae9fbfe7924e14]
class OutputIterator--><rect codeLine="17" fill="#FEFECE" filter="url(#f1a80nhw43zmnn)" height="111.8438" id="OutputIterator" style="stroke:#A80036;stroke-width:1.5;" width="232" x="267.5" y="191.2168"/><ellipse cx="283.5" cy="208.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M286.5625,215.2949 Q285.875,215.6543 285.125,215.8262 Q284.375,215.998 283.5469,215.998 Q280.5938,215.998 279.0313,214.0605 Q277.4844,212.1074 277.4844,208.4355 Q277.4844,204.7637 279.0313,202.8262 Q280.5938,200.873 283.5469,200.873 Q284.375,200.873 285.125,201.0449 Q285.8906,201.2168 286.5625,201.5762 L286.5625,204.7793 Q285.8125,204.0918 285.1094,203.7793 Q284.4219,203.4668 283.6719,203.4668 Q282.0938,203.4668 281.2813,204.7168 Q280.4844,205.9668 280.4844,208.4355 Q280.4844,210.9043 281.2813,212.1543 Q282.0938,213.4043 283.6719,213.4043 Q284.4219,213.4043 285.1094,213.0918 Q285.8125,212.7793 286.5625,212.0918 L286.5625,215.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="145" x="298.5" y="215.1406">OutputIterator</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="451.5" y="188.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="452.5" y="207.7813">Type</text><line style="stroke:#A80036;stroke-width:1.5;" x1="268.5" x2="498.5" y1="225.2168" y2="225.2168"/><ellipse cx="278.5" cy="236.2168" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="186" x="288.5" y="247.7813">operator++(): null</text><ellipse cx="278.5" cy="259.498" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="288.5" y="271.0625">operator*(): self&amp;</text><ellipse cx="278.5" cy="282.7793" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="288.5" y="294.3438">operator=(): self&amp;</text><!--MD5=[f07ba6d0185d5adddf606929bd9a62f0]
reverse link Iterator to InputIterator--><path codeLine="23" d="M124.55,136.4168 C123.53,158.4568 122.42,182.6068 121.5,202.6268 " fill="none" id="Iterator-backto-InputIterator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="117.57,135.7768,125.48,116.1268,131.56,136.4268,117.57,135.7768" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7739b466d9c8bd6cc8625bc5bf25f330]
reverse link Iterator to OutputIterator--><path codeLine="24" d="M208.4,127.1968 C238.32,147.5368 272.23,170.5868 302.19,190.9568 " fill="none" id="Iterator-backto-OutputIterator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="204.38,132.9268,191.77,115.8968,212.25,121.3568,204.38,132.9268" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[3979bec5ca3c95ad7d6ca60c143f39a5]
link Iterable to InputIterator--><path codeLine="25" d="M291.11,131.3668 C260.04,152.1668 225.42,175.3368 195.46,195.3868 " fill="none" id="Iterable-to-InputIterator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="184.65,202.6168,191.8611,202.6036,194.6224,195.9421,187.4113,195.9553,184.65,202.6168" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[165e728569dbe04122d01b68b34e0ea8]
link Iterable to OutputIterator--><path codeLine="26" d="M380.87,131.6068 C381.21,146.5368 381.58,162.6668 381.93,177.9868 " fill="none" id="Iterable-to-OutputIterator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="382.23,191.1868,386.0904,185.096,381.9528,179.19,378.0925,185.2808,382.23,191.1868" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a7770b91ec0df6d4803dfade728f8275]
@startuml
skinparamlocked defaultFontSize 20
interface Iterator <Type> {
    +operator++(): self&
    +operator*(): Type&
}

class Iterable <Type> {
    -collection: Type[]
    +begin()
    +end()
}

class InputIterator <Type> {
    +operator++(): self&
    +operator*(): Type&
}

class OutputIterator <Type> {
    +operator++(): null
    +operator*(): self&
    +operator=(): self&
}

InputIterator -u-|> Iterator
OutputIterator -u-|> Iterator
Iterable - -* InputIterator
Iterable - -* OutputIterator

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Придаёт объекту свойства контейнера
</span>
</li>
<li>
<span>
Похож на композицию, может использоваться в цепочке обязанностей
</span>
</li>
<li>
<span>
Могущество спрятано в операторах <code>++</code>, <code>*</code> и <code>=</code>
</span>
</li>
<li>
<span>
Разные способы обхода одного и того же множества
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p><code>std::vector::iterator</code>, обход графа в ширину и глубину&#8201;&#8212;&#8201;два типа итератора</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_mediator_посредник">6.5. Mediator (посредник)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="281px" preserveAspectRatio="none" style="width:586px;height:281px;background:#FFFFFF;" version="1.1" viewBox="0 0 586 281" width="586px" zoomAndPan="magnify"><defs><filter height="300%" id="f16cdl1lg1jqix" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[7bc5716ff34e8b57d97376709b158217]
class Mediator--><rect codeLine="1" fill="#FEFECE" filter="url(#f16cdl1lg1jqix)" height="65.2813" id="Mediator" style="stroke:#A80036;stroke-width:1.5;" width="168" x="103.5" y="42"/><ellipse cx="140.2" cy="59" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M135.3875,54.4531 L135.3875,51.9219 L144.0594,51.9219 L144.0594,54.4531 L141.1688,54.4531 L141.1688,63.9531 L144.0594,63.9531 L144.0594,66.5 L135.3875,66.5 L135.3875,63.9531 L138.2781,63.9531 L138.2781,54.4531 L135.3875,54.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="88" x="159.8" y="65.9238">Mediator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="104.5" x2="270.5" y1="76" y2="76"/><ellipse cx="114.5" cy="87" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="141" x="124.5" y="98.5645">notify(sender)</text><!--MD5=[84718776d214be480e4c259efcb737fc]
class Main--><rect codeLine="5" fill="#FEFECE" filter="url(#f16cdl1lg1jqix)" height="135.125" id="Main" style="stroke:#A80036;stroke-width:1.5;" width="168" x="306.5" y="7"/><ellipse cx="362" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M365.0625,31.0781 Q364.375,31.4375 363.625,31.6094 Q362.875,31.7813 362.0469,31.7813 Q359.0938,31.7813 357.5313,29.8438 Q355.9844,27.8906 355.9844,24.2188 Q355.9844,20.5469 357.5313,18.6094 Q359.0938,16.6563 362.0469,16.6563 Q362.875,16.6563 363.625,16.8281 Q364.3906,17 365.0625,17.3594 L365.0625,20.5625 Q364.3125,19.875 363.6094,19.5625 Q362.9219,19.25 362.1719,19.25 Q360.5938,19.25 359.7813,20.5 Q358.9844,21.75 358.9844,24.2188 Q358.9844,26.6875 359.7813,27.9375 Q360.5938,29.1875 362.1719,29.1875 Q362.9219,29.1875 363.6094,28.875 Q364.3125,28.5625 365.0625,27.875 L365.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="48" x="384" y="30.9238">Main</text><line style="stroke:#A80036;stroke-width:1.5;" x1="307.5" x2="473.5" y1="41" y2="41"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="49"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="327.5" y="63.5645">onEventA()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="72.2813"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="327.5" y="86.8457">onEventB()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="95.5625"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="327.5" y="110.127">onEventC()</text><ellipse cx="317.5" cy="121.8438" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="141" x="327.5" y="133.4082">notify(sender)</text><!--MD5=[e17b787d69906b3f274da0ab749c8979]
class ComponentA--><rect codeLine="12" fill="#FEFECE" filter="url(#f16cdl1lg1jqix)" height="65.2813" id="ComponentA" style="stroke:#A80036;stroke-width:1.5;" width="165" x="7" y="202"/><ellipse cx="23" cy="219" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M26.0625,226.0781 Q25.375,226.4375 24.625,226.6094 Q23.875,226.7813 23.0469,226.7813 Q20.0938,226.7813 18.5313,224.8438 Q16.9844,222.8906 16.9844,219.2188 Q16.9844,215.5469 18.5313,213.6094 Q20.0938,211.6563 23.0469,211.6563 Q23.875,211.6563 24.625,211.8281 Q25.3906,212 26.0625,212.3594 L26.0625,215.5625 Q25.3125,214.875 24.6094,214.5625 Q23.9219,214.25 23.1719,214.25 Q21.5938,214.25 20.7813,215.5 Q19.9844,216.75 19.9844,219.2188 Q19.9844,221.6875 20.7813,222.9375 Q21.5938,224.1875 23.1719,224.1875 Q23.9219,224.1875 24.6094,223.875 Q25.3125,223.5625 26.0625,222.875 L26.0625,226.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="38" y="225.9238">ComponentA</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="171" y1="236" y2="236"/><ellipse cx="18" cy="247" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="28" y="258.5645">operationA()</text><!--MD5=[2d23e4e546ad390fcff8976b2772dab8]
class ComponentB--><rect codeLine="16" fill="#FEFECE" filter="url(#f16cdl1lg1jqix)" height="65.2813" id="ComponentB" style="stroke:#A80036;stroke-width:1.5;" width="165" x="207" y="202"/><ellipse cx="223" cy="219" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M226.0625,226.0781 Q225.375,226.4375 224.625,226.6094 Q223.875,226.7813 223.0469,226.7813 Q220.0938,226.7813 218.5313,224.8438 Q216.9844,222.8906 216.9844,219.2188 Q216.9844,215.5469 218.5313,213.6094 Q220.0938,211.6563 223.0469,211.6563 Q223.875,211.6563 224.625,211.8281 Q225.3906,212 226.0625,212.3594 L226.0625,215.5625 Q225.3125,214.875 224.6094,214.5625 Q223.9219,214.25 223.1719,214.25 Q221.5938,214.25 220.7813,215.5 Q219.9844,216.75 219.9844,219.2188 Q219.9844,221.6875 220.7813,222.9375 Q221.5938,224.1875 223.1719,224.1875 Q223.9219,224.1875 224.6094,223.875 Q225.3125,223.5625 226.0625,222.875 L226.0625,226.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="238" y="225.9238">ComponentB</text><line style="stroke:#A80036;stroke-width:1.5;" x1="208" x2="371" y1="236" y2="236"/><ellipse cx="218" cy="247" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="228" y="258.5645">operationB()</text><!--MD5=[e6d1a495bc7bb1d100b4f2c4ad4e5681]
class ComponentC--><rect codeLine="20" fill="#FEFECE" filter="url(#f16cdl1lg1jqix)" height="65.2813" id="ComponentC" style="stroke:#A80036;stroke-width:1.5;" width="165" x="407" y="202"/><ellipse cx="423" cy="219" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M426.0625,226.0781 Q425.375,226.4375 424.625,226.6094 Q423.875,226.7813 423.0469,226.7813 Q420.0938,226.7813 418.5313,224.8438 Q416.9844,222.8906 416.9844,219.2188 Q416.9844,215.5469 418.5313,213.6094 Q420.0938,211.6563 423.0469,211.6563 Q423.875,211.6563 424.625,211.8281 Q425.3906,212 426.0625,212.3594 L426.0625,215.5625 Q425.3125,214.875 424.6094,214.5625 Q423.9219,214.25 423.1719,214.25 Q421.5938,214.25 420.7813,215.5 Q419.9844,216.75 419.9844,219.2188 Q419.9844,221.6875 420.7813,222.9375 Q421.5938,224.1875 423.1719,224.1875 Q423.9219,224.1875 424.6094,223.875 Q425.3125,223.5625 426.0625,222.875 L426.0625,226.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="438" y="225.9238">ComponentC</text><line style="stroke:#A80036;stroke-width:1.5;" x1="408" x2="571" y1="236" y2="236"/><ellipse cx="418" cy="247" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="428" y="258.5645">operationC()</text><!--MD5=[87ae85e21e4c3c4a3f54e1c99b14070e]
reverse link Mediator to ComponentA--><path codeLine="24" d="M160.95,118.31 C144.58,144.7 123.94,177.97 109.06,201.96 " fill="none" id="Mediator-backto-ComponentA" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="167.9,107.09,161.3384,110.0809,161.5756,117.2881,168.1372,114.2972,167.9,107.09" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[22c99bdfa45d1d32533c7eae935d547d]
link Main to ComponentA--><path codeLine="25" d="M306.49,131.63 C300.46,135.24 294.42,138.73 288.5,142 C252.91,161.64 212.35,180.84 177.17,196.53 " fill="none" id="Main-to-ComponentA" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="164.97,201.93,172.0752,203.1611,175.9444,197.0759,168.8392,195.8448,164.97,201.93" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7ea0dcc8a6aa001423fcf62acfb03ce0]
reverse link Mediator to ComponentB--><path codeLine="27" d="M215.13,118.31 C232.17,144.7 253.65,177.97 269.14,201.96 " fill="none" id="Mediator-backto-ComponentB" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="207.9,107.09,207.7879,114.3002,214.4004,117.1769,214.5125,109.9666,207.9,107.09" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[96040d8e689f92864b38af23f5ab32e7]
link Main to ComponentB--><path codeLine="28" d="M347.96,142.05 C337.39,158.58 326.35,175.86 316.74,190.89 " fill="none" id="Main-to-ComponentB" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="309.7,201.9,316.301,198.9972,316.1604,191.7875,309.5594,194.6903,309.7,201.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[50e14a69b42e53059ad93a044306c73b]
reverse link Mediator to ComponentC--><path codeLine="30" d="M243.72,114.29 C258.36,123.79 274.3,133.63 289.5,142 C329.47,164.01 375.7,185.41 413.64,201.97 " fill="none" id="Mediator-backto-ComponentC" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="232.81,107.11,235.628,113.7477,242.839,113.6993,240.0209,107.0617,232.81,107.11" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bcc885b39a1e0c9375435a60e8b728e9]
link Main to ComponentC--><path codeLine="31" d="M432.2,142.05 C442.46,158.42 453.17,175.52 462.52,190.45 " fill="none" id="Main-to-ComponentC" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="469.7,201.9,469.8977,194.6916,463.3199,191.7366,463.1222,198.945,469.7,201.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c0f6f177e387ec9c034ef24fc0cb8b01]
reverse link Mediator to Main--><path codeLine="33" d="M291.7,74.5 C296.6,74.5 301.5,74.5 306.4,74.5 " fill="none" id="Mediator-backto-Main" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="291.55,81.5,271.55,74.5,291.55,67.5,291.55,81.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[946c43114975cd0f1467049a96d86c52]
@startuml
skinparamlocked defaultFontSize 20
interface Mediator {
    +notify(sender)
}

class Main {
    -onEventA()
    -onEventB()
    -onEventC()
    +notify(sender)
}

class ComponentA {
    +operationA()
}

class ComponentB {
    +operationB()
}

class ComponentC {
    +operationC()
}

ComponentA -u-o Mediator
Main - -* ComponentA

ComponentB -u-o Mediator
Main - -* ComponentB

ComponentC -u-o Mediator
Main - -* ComponentC

Main -l-|> Mediator

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
<code>Main</code> содержит всю бизнес-логику
</span>
</li>
<li>
<span>
Компоненты общаются между собой только через посредника
</span>
</li>
<li>
<span>
Все компоненты могут использоваться повторно в других программах, но сам посредник не может
</span>
</li>
<li>
<span>
Проблема "божественного объекта"
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Диспетчерская, диалоговое окно с компонентами</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_memento_снимок">6.6. Memento (снимок)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="414px" preserveAspectRatio="none" style="width:500px;height:414px;background:#FFFFFF;" version="1.1" viewBox="0 0 500 414" width="500px" zoomAndPan="magnify"><defs><filter height="300%" id="fo40ji9dbu192" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[7a1a18227f0381d0e6f0aa1a4d364acd]
class Object1--><rect codeLine="1" fill="#FEFECE" filter="url(#fo40ji9dbu192)" height="143.125" id="Object1" style="stroke:#A80036;stroke-width:1.5;" width="222" x="7" y="7"/><ellipse cx="74" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M77.0625,31.0781 Q76.375,31.4375 75.625,31.6094 Q74.875,31.7813 74.0469,31.7813 Q71.0938,31.7813 69.5313,29.8438 Q67.9844,27.8906 67.9844,24.2188 Q67.9844,20.5469 69.5313,18.6094 Q71.0938,16.6563 74.0469,16.6563 Q74.875,16.6563 75.625,16.8281 Q76.3906,17 77.0625,17.3594 L77.0625,20.5625 Q76.3125,19.875 75.6094,19.5625 Q74.9219,19.25 74.1719,19.25 Q72.5938,19.25 71.7813,20.5 Q70.9844,21.75 70.9844,24.2188 Q70.9844,26.6875 71.7813,27.9375 Q72.5938,29.1875 74.1719,29.1875 Q74.9219,29.1875 75.6094,28.875 Q76.3125,28.5625 77.0625,27.875 L77.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="96" y="30.9238">Object1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="228" y1="41" y2="41"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="49"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="28" y="63.5645">some</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="72.2813"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="28" y="86.8457">fields</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="228" y1="95.5625" y2="95.5625"/><ellipse cx="18" cy="106.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="28" y="118.127">save(): Memento</text><ellipse cx="18" cy="129.8438" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="28" y="141.4082">restore(Memento&amp;)</text><!--MD5=[7c73e783ae5e467bbefeded3c9c5ec39]
class Object2--><rect codeLine="8" fill="#FEFECE" filter="url(#fo40ji9dbu192)" height="119.8438" id="Object2" style="stroke:#A80036;stroke-width:1.5;" width="222" x="264" y="18.5"/><ellipse cx="331" cy="35.5" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M334.0625,42.5781 Q333.375,42.9375 332.625,43.1094 Q331.875,43.2813 331.0469,43.2813 Q328.0938,43.2813 326.5313,41.3438 Q324.9844,39.3906 324.9844,35.7188 Q324.9844,32.0469 326.5313,30.1094 Q328.0938,28.1563 331.0469,28.1563 Q331.875,28.1563 332.625,28.3281 Q333.3906,28.5 334.0625,28.8594 L334.0625,32.0625 Q333.3125,31.375 332.6094,31.0625 Q331.9219,30.75 331.1719,30.75 Q329.5938,30.75 328.7813,32 Q327.9844,33.25 327.9844,35.7188 Q327.9844,38.1875 328.7813,39.4375 Q329.5938,40.6875 331.1719,40.6875 Q331.9219,40.6875 332.6094,40.375 Q333.3125,40.0625 334.0625,39.375 L334.0625,42.5781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="353" y="42.4238">Object2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="265" x2="485" y1="52.5" y2="52.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="272" y="60.5"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="285" y="75.0645">another</text><line style="stroke:#A80036;stroke-width:1.5;" x1="265" x2="485" y1="83.7813" y2="83.7813"/><ellipse cx="275" cy="94.7813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="285" y="106.3457">save(): Memento</text><ellipse cx="275" cy="118.0625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="285" y="129.627">restore(Memento&amp;)</text><!--MD5=[b8338156e8cd96c783f5ffc7d8021ea7]
class Memento--><rect codeLine="14" fill="#FEFECE" filter="url(#fo40ji9dbu192)" height="42" id="Memento" style="stroke:#A80036;stroke-width:1.5;" width="128" x="182" y="210"/><ellipse cx="198" cy="227" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M193.1875,222.4531 L193.1875,219.9219 L201.8594,219.9219 L201.8594,222.4531 L198.9688,222.4531 L198.9688,231.9531 L201.8594,231.9531 L201.8594,234.5 L193.1875,234.5 L193.1875,231.9531 L196.0781,231.9531 L196.0781,222.4531 L193.1875,222.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="94" x="213" y="233.9238">Memento</text><line style="stroke:#A80036;stroke-width:1.5;" x1="183" x2="309" y1="244" y2="244"/><!--MD5=[b2a91f63a73d645b052c44c0195697e9]
class Memento1--><rect codeLine="16" fill="#FEFECE" filter="url(#fo40ji9dbu192)" height="88.5625" id="Memento1" style="stroke:#A80036;stroke-width:1.5;" width="141" x="87.5" y="312"/><ellipse cx="103.5" cy="329" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M106.5625,336.0781 Q105.875,336.4375 105.125,336.6094 Q104.375,336.7813 103.5469,336.7813 Q100.5938,336.7813 99.0313,334.8438 Q97.4844,332.8906 97.4844,329.2188 Q97.4844,325.5469 99.0313,323.6094 Q100.5938,321.6563 103.5469,321.6563 Q104.375,321.6563 105.125,321.8281 Q105.8906,322 106.5625,322.3594 L106.5625,325.5625 Q105.8125,324.875 105.1094,324.5625 Q104.4219,324.25 103.6719,324.25 Q102.0938,324.25 101.2813,325.5 Q100.4844,326.75 100.4844,329.2188 Q100.4844,331.6875 101.2813,332.9375 Q102.0938,334.1875 103.6719,334.1875 Q104.4219,334.1875 105.1094,333.875 Q105.8125,333.5625 106.5625,332.875 L106.5625,336.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="118.5" y="335.9238">Memento1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="88.5" x2="227.5" y1="346" y2="346"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="95.5" y="354"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="108.5" y="368.5645">some</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="95.5" y="377.2813"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="108.5" y="391.8457">fields</text><!--MD5=[97da6989268262ec8a9e11e3a71d0f36]
class Memento2--><rect codeLine="21" fill="#FEFECE" filter="url(#fo40ji9dbu192)" height="65.2813" id="Memento2" style="stroke:#A80036;stroke-width:1.5;" width="141" x="263.5" y="324"/><ellipse cx="279.5" cy="341" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M282.5625,348.0781 Q281.875,348.4375 281.125,348.6094 Q280.375,348.7813 279.5469,348.7813 Q276.5938,348.7813 275.0313,346.8438 Q273.4844,344.8906 273.4844,341.2188 Q273.4844,337.5469 275.0313,335.6094 Q276.5938,333.6563 279.5469,333.6563 Q280.375,333.6563 281.125,333.8281 Q281.8906,334 282.5625,334.3594 L282.5625,337.5625 Q281.8125,336.875 281.1094,336.5625 Q280.4219,336.25 279.6719,336.25 Q278.0938,336.25 277.2813,337.5 Q276.4844,338.75 276.4844,341.2188 Q276.4844,343.6875 277.2813,344.9375 Q278.0938,346.1875 279.6719,346.1875 Q280.4219,346.1875 281.1094,345.875 Q281.8125,345.5625 282.5625,344.875 L282.5625,348.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="294.5" y="347.9238">Memento2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="264.5" x2="403.5" y1="358" y2="358"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="271.5" y="366"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="284.5" y="380.5645">another</text><!--MD5=[9bf578c6fb7c81414774bf9940658aca]
link Object1 to Memento--><path codeLine="25" d="M178.25,150.34 C193.03,167.72 208.08,185.41 220.22,199.69 " fill="none" id="Object1-to-Memento" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="228.89,209.89,228.0573,202.7271,221.1251,200.7409,221.9578,207.9037,228.89,209.89" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[59c35fb7b1809feb38a16702f26d9246]
link Object2 to Memento--><path codeLine="26" d="M324.39,138.55 C306.5,159.42 287.12,182.03 272.1,199.55 " fill="none" id="Object2-to-Memento" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="263.37,209.74,270.3113,207.786,271.1773,200.6271,264.236,202.5811,263.37,209.74" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[9ead54de661dde3554bab1aa6c2fda9c]
reverse link Memento to Memento1--><path codeLine="28" d="M219.95,268.56 C210.28,282.13 199.2,297.67 189.12,311.83 " fill="none" id="Memento-backto-Memento1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="214.36,264.34,231.67,252.12,225.76,272.47,214.36,264.34" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8455b5af575c26b30fc0d1a8f0836bb8]
reverse link Memento to Memento2--><path codeLine="29" d="M272.08,268.61 C284.58,286.15 299.41,306.95 311.41,323.8 " fill="none" id="Memento-backto-Memento2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="266.24,272.47,260.33,252.12,277.64,264.34,266.24,272.47" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2cb0521b815b3bc0c53c514b3c36031b]
@startuml
skinparamlocked defaultFontSize 20
class Object1 {
    -some
    -fields
    +save(): Memento
    +restore(Memento&)
}

class Object2 {
    -another
    +save(): Memento
    +restore(Memento&)
}

interface Memento

class Memento1 {
    -some
    -fields
}

class Memento2 {
    -another
}

Object1 - -o Memento
Object2 - -o Memento

Memento1 -u-|> Memento
Memento2 -u-|> Memento

hide empty methods
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Схож с прототипом
</span>
</li>
<li>
<span>
Не нарушает инкапсуляцию
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Сериализация</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_observer_наблюдатель">6.7. Observer (наблюдатель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="320px" preserveAspectRatio="none" style="width:627px;height:320px;background:#FFFFFF;" version="1.1" viewBox="0 0 627 320" width="627px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ucgvvywmh2f7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[13fb849c6dfc9273db4c5b2c7ac96a10]
class Publisher--><rect codeLine="1" fill="#FEFECE" filter="url(#f1ucgvvywmh2f7)" height="143.125" id="Publisher" style="stroke:#A80036;stroke-width:1.5;" width="242" x="371" y="7"/><ellipse cx="441" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M444.0625,31.0781 Q443.375,31.4375 442.625,31.6094 Q441.875,31.7813 441.0469,31.7813 Q438.0938,31.7813 436.5313,29.8438 Q434.9844,27.8906 434.9844,24.2188 Q434.9844,20.5469 436.5313,18.6094 Q438.0938,16.6563 441.0469,16.6563 Q441.875,16.6563 442.625,16.8281 Q443.3906,17 444.0625,17.3594 L444.0625,20.5625 Q443.3125,19.875 442.6094,19.5625 Q441.9219,19.25 441.1719,19.25 Q439.5938,19.25 438.7813,20.5 Q437.9844,21.75 437.9844,24.2188 Q437.9844,26.6875 438.7813,27.9375 Q439.5938,29.1875 441.1719,29.1875 Q441.9219,29.1875 442.6094,28.875 Q443.3125,28.5625 444.0625,27.875 L444.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="93" x="463" y="30.9238">Publisher</text><line style="stroke:#A80036;stroke-width:1.5;" x1="372" x2="612" y1="41" y2="41"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="379" y="49"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="215" x="392" y="63.5645">observers: Observer[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="372" x2="612" y1="72.2813" y2="72.2813"/><ellipse cx="382" cy="83.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="392" y="94.8457">add(Observer)</text><ellipse cx="382" cy="106.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="392" y="118.127">remove(Observer)</text><ellipse cx="382" cy="129.8438" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="392" y="141.4082">notify()</text><!--MD5=[d40932010816485ec57b44b6eea2392a]
class Observer--><rect codeLine="8" fill="#FEFECE" filter="url(#f1ucgvvywmh2f7)" height="65.2813" id="Observer" style="stroke:#A80036;stroke-width:1.5;" width="208" x="128" y="46"/><ellipse cx="182" cy="63" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M177.1875,58.4531 L177.1875,55.9219 L185.8594,55.9219 L185.8594,58.4531 L182.9688,58.4531 L182.9688,67.9531 L185.8594,67.9531 L185.8594,70.5 L177.1875,70.5 L177.1875,67.9531 L180.0781,67.9531 L180.0781,58.4531 L177.1875,58.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="91" x="204" y="69.9238">Observer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="129" x2="335" y1="80" y2="80"/><ellipse cx="139" cy="91" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="149" y="102.5645">update(publisher)</text><!--MD5=[f1cb0e18e0b45f7f6695329ca39962b1]
class Observer1--><rect codeLine="12" fill="#FEFECE" filter="url(#f1ucgvvywmh2f7)" height="96.5625" id="Observer1" style="stroke:#A80036;stroke-width:1.5;" width="208" x="7" y="210"/><ellipse cx="55" cy="227" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M58.0625,234.0781 Q57.375,234.4375 56.625,234.6094 Q55.875,234.7813 55.0469,234.7813 Q52.0938,234.7813 50.5313,232.8438 Q48.9844,230.8906 48.9844,227.2188 Q48.9844,223.5469 50.5313,221.6094 Q52.0938,219.6563 55.0469,219.6563 Q55.875,219.6563 56.625,219.8281 Q57.3906,220 58.0625,220.3594 L58.0625,223.5625 Q57.3125,222.875 56.6094,222.5625 Q55.9219,222.25 55.1719,222.25 Q53.5938,222.25 52.7813,223.5 Q51.9844,224.75 51.9844,227.2188 Q51.9844,229.6875 52.7813,230.9375 Q53.5938,232.1875 55.1719,232.1875 Q55.9219,232.1875 56.6094,231.875 Q57.3125,231.5625 58.0625,230.875 L58.0625,234.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="103" x="77" y="233.9238">Observer1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="214" y1="244" y2="244"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="13" y="266.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="214" y1="275.2813" y2="275.2813"/><ellipse cx="18" cy="286.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="28" y="297.8457">update(publisher)</text><!--MD5=[f400cf616ae75969f76f14be6f953692]
class Observer2--><rect codeLine="17" fill="#FEFECE" filter="url(#f1ucgvvywmh2f7)" height="96.5625" id="Observer2" style="stroke:#A80036;stroke-width:1.5;" width="208" x="250" y="210"/><ellipse cx="298" cy="227" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M301.0625,234.0781 Q300.375,234.4375 299.625,234.6094 Q298.875,234.7813 298.0469,234.7813 Q295.0938,234.7813 293.5313,232.8438 Q291.9844,230.8906 291.9844,227.2188 Q291.9844,223.5469 293.5313,221.6094 Q295.0938,219.6563 298.0469,219.6563 Q298.875,219.6563 299.625,219.8281 Q300.3906,220 301.0625,220.3594 L301.0625,223.5625 Q300.3125,222.875 299.6094,222.5625 Q298.9219,222.25 298.1719,222.25 Q296.5938,222.25 295.7813,223.5 Q294.9844,224.75 294.9844,227.2188 Q294.9844,229.6875 295.7813,230.9375 Q296.5938,232.1875 298.1719,232.1875 Q298.9219,232.1875 299.6094,231.875 Q300.3125,231.5625 301.0625,230.875 L301.0625,234.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="103" x="320" y="233.9238">Observer2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="251" x2="457" y1="244" y2="244"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="256" y="266.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="251" x2="457" y1="275.2813" y2="275.2813"/><ellipse cx="261" cy="286.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="271" y="297.8457">update(publisher)</text><!--MD5=[6896a1eea49ac97daff82b82ac6d631d]
reverse link Observer to Publisher--><path codeLine="22" d="M349.12,78.5 C356.35,78.5 363.58,78.5 370.81,78.5 " fill="none" id="Observer-backto-Publisher" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="336.1,78.5,342.1,82.5,348.1,78.5,342.1,74.5,336.1,78.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="10" x="344.112" y="73.2199">*</text><!--MD5=[c3fffb222418c783e8b7352f35a50fce]
reverse link Observer to Observer1--><path codeLine="23" d="M199.09,127.92 C181.77,153.39 160.62,184.51 143.38,209.87 " fill="none" id="Observer-backto-Observer1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="193.33,123.93,210.37,111.32,204.91,131.8,193.33,123.93" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d77e563dc716b9308f4fe9a5b728eccb]
reverse link Observer to Observer2--><path codeLine="24" d="M265.18,127.92 C282.65,153.39 303.97,184.51 321.35,209.87 " fill="none" id="Observer-backto-Observer2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="259.34,131.78,253.81,111.32,270.89,123.86,259.34,131.78" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[cda6984a99e8bf94dc18d10b0a9130fb]
@startuml
skinparamlocked defaultFontSize 20
class Publisher {
    -observers: Observer[]
    +add(Observer)
    +remove(Observer)
    +notify()
}

interface Observer {
    +update(publisher)
}

class Observer1 {
    ...
    +update(publisher)
}

class Observer2 {
    ...
    +update(publisher)
}

Publisher -l-o "*" Observer
Observer1 -u-|> Observer
Observer2 -u-|> Observer

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Наблюдатели подписываются на события, генерируемые <code>Publisher</code>
</span>
</li>
<li>
<span>
Оповещения происходят в случайном порядке, в отличие от цепочки обязанностей
</span>
</li>
<li>
<span>
Похож на посредника, но <code>Publisher</code> ничего не знает о подписчиках
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Почтовая рассылка</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_state_состояние">6.8. State (состояние)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="430px" preserveAspectRatio="none" style="width:918px;height:430px;background:#FFFFFF;" version="1.1" viewBox="0 0 918 430" width="918px" zoomAndPan="magnify"><defs><filter height="300%" id="ff8qusgx5zdf7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[6754354365917abf8f1a56af1b7e344c]
class Context--><rect codeLine="1" fill="#FEFECE" filter="url(#ff8qusgx5zdf7)" height="111.8438" id="Context" style="stroke:#A80036;stroke-width:1.5;" width="223" x="610.5" y="305"/><ellipse cx="678.5" cy="322" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M681.5625,329.0781 Q680.875,329.4375 680.125,329.6094 Q679.375,329.7813 678.5469,329.7813 Q675.5938,329.7813 674.0313,327.8438 Q672.4844,325.8906 672.4844,322.2188 Q672.4844,318.5469 674.0313,316.6094 Q675.5938,314.6563 678.5469,314.6563 Q679.375,314.6563 680.125,314.8281 Q680.8906,315 681.5625,315.3594 L681.5625,318.5625 Q680.8125,317.875 680.1094,317.5625 Q679.4219,317.25 678.6719,317.25 Q677.0938,317.25 676.2813,318.5 Q675.4844,319.75 675.4844,322.2188 Q675.4844,324.6875 676.2813,325.9375 Q677.0938,327.1875 678.6719,327.1875 Q679.4219,327.1875 680.1094,326.875 Q680.8125,326.5625 681.5625,325.875 L681.5625,329.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="700.5" y="328.9238">Context</text><line style="stroke:#A80036;stroke-width:1.5;" x1="611.5" x2="832.5" y1="339" y2="339"/><polygon fill="#FFFF44" points="621.5,345,625.5,349,621.5,353,617.5,349" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="196" x="631.5" y="361.5645">changeState(State)</text><ellipse cx="621.5" cy="373.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="631.5" y="384.8457">method1()</text><ellipse cx="621.5" cy="396.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="631.5" y="408.127">method2()</text><!--MD5=[60d6b92408f98aed8df94d5c6e04aa63]
class State--><rect codeLine="7" fill="#FEFECE" filter="url(#ff8qusgx5zdf7)" height="88.5625" id="State" style="stroke:#A80036;stroke-width:1.5;" width="134" x="655" y="7"/><ellipse cx="692.15" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M687.3375,19.4531 L687.3375,16.9219 L696.0094,16.9219 L696.0094,19.4531 L693.1188,19.4531 L693.1188,28.9531 L696.0094,28.9531 L696.0094,31.5 L687.3375,31.5 L687.3375,28.9531 L690.2281,28.9531 L690.2281,19.4531 L687.3375,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="53" x="711.85" y="30.9238">State</text><line style="stroke:#A80036;stroke-width:1.5;" x1="656" x2="788" y1="41" y2="41"/><ellipse cx="666" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="676" y="63.5645">method1()</text><ellipse cx="666" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="676" y="86.8457">method2()</text><!--MD5=[fea294b58d473e9280cfe4c83798149e]
class State1--><rect codeLine="12" fill="#FEFECE" filter="url(#ff8qusgx5zdf7)" height="88.5625" id="State1" style="stroke:#A80036;stroke-width:1.5;" width="134" x="571" y="156"/><ellipse cx="602.3" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M605.3625,180.0781 Q604.675,180.4375 603.925,180.6094 Q603.175,180.7813 602.3469,180.7813 Q599.3938,180.7813 597.8313,178.8438 Q596.2844,176.8906 596.2844,173.2188 Q596.2844,169.5469 597.8313,167.6094 Q599.3938,165.6563 602.3469,165.6563 Q603.175,165.6563 603.925,165.8281 Q604.6906,166 605.3625,166.3594 L605.3625,169.5625 Q604.6125,168.875 603.9094,168.5625 Q603.2219,168.25 602.4719,168.25 Q600.8938,168.25 600.0813,169.5 Q599.2844,170.75 599.2844,173.2188 Q599.2844,175.6875 600.0813,176.9375 Q600.8938,178.1875 602.4719,178.1875 Q603.2219,178.1875 603.9094,177.875 Q604.6125,177.5625 605.3625,176.875 L605.3625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="620.7" y="179.9238">State1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="572" x2="704" y1="190" y2="190"/><ellipse cx="582" cy="201" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="592" y="212.5645">method1()</text><ellipse cx="582" cy="224.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="592" y="235.8457">method2()</text><!--MD5=[8cc037637095e940935efba53ef29e5a]
class State2--><rect codeLine="17" fill="#FEFECE" filter="url(#ff8qusgx5zdf7)" height="88.5625" id="State2" style="stroke:#A80036;stroke-width:1.5;" width="134" x="7" y="156"/><ellipse cx="38.3" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M41.3625,180.0781 Q40.675,180.4375 39.925,180.6094 Q39.175,180.7813 38.3469,180.7813 Q35.3938,180.7813 33.8313,178.8438 Q32.2844,176.8906 32.2844,173.2188 Q32.2844,169.5469 33.8313,167.6094 Q35.3938,165.6563 38.3469,165.6563 Q39.175,165.6563 39.925,165.8281 Q40.6906,166 41.3625,166.3594 L41.3625,169.5625 Q40.6125,168.875 39.9094,168.5625 Q39.2219,168.25 38.4719,168.25 Q36.8938,168.25 36.0813,169.5 Q35.2844,170.75 35.2844,173.2188 Q35.2844,175.6875 36.0813,176.9375 Q36.8938,178.1875 38.4719,178.1875 Q39.2219,178.1875 39.9094,177.875 Q40.6125,177.5625 41.3625,176.875 L41.3625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="56.7" y="179.9238">State2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="140" y1="190" y2="190"/><ellipse cx="18" cy="201" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="212.5645">method1()</text><ellipse cx="18" cy="224.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="235.8457">method2()</text><!--MD5=[4eb8b94b51d112d8c70b26f7c75650e7]
class State3--><rect codeLine="22" fill="#FEFECE" filter="url(#ff8qusgx5zdf7)" height="88.5625" id="State3" style="stroke:#A80036;stroke-width:1.5;" width="134" x="740" y="156"/><ellipse cx="771.3" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M774.3625,180.0781 Q773.675,180.4375 772.925,180.6094 Q772.175,180.7813 771.3469,180.7813 Q768.3938,180.7813 766.8313,178.8438 Q765.2844,176.8906 765.2844,173.2188 Q765.2844,169.5469 766.8313,167.6094 Q768.3938,165.6563 771.3469,165.6563 Q772.175,165.6563 772.925,165.8281 Q773.6906,166 774.3625,166.3594 L774.3625,169.5625 Q773.6125,168.875 772.9094,168.5625 Q772.2219,168.25 771.4719,168.25 Q769.8938,168.25 769.0813,169.5 Q768.2844,170.75 768.2844,173.2188 Q768.2844,175.6875 769.0813,176.9375 Q769.8938,178.1875 771.4719,178.1875 Q772.2219,178.1875 772.9094,177.875 Q773.6125,177.5625 774.3625,176.875 L774.3625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="789.7" y="179.9238">State3</text><line style="stroke:#A80036;stroke-width:1.5;" x1="741" x2="873" y1="190" y2="190"/><ellipse cx="751" cy="201" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="761" y="212.5645">method1()</text><ellipse cx="751" cy="224.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="761" y="235.8457">method2()</text><path d="M176.5,167 L176.5,191.2813 L135,205.6406 L176.5,199.2813 L176.5,223.5625 A0,0 0 0 0 176.5,223.5625 L535.5,223.5625 A0,0 0 0 0 535.5,223.5625 L535.5,177 L525.5,167 L176.5,167 A0,0 0 0 0 176.5,167 " fill="#FBFB77" filter="url(#ff8qusgx5zdf7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M525.5,167 L525.5,177 L535.5,177 L525.5,167 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="151" x="182.5" y="190.5645">doSomething()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="338" x="182.5" y="213.8457">context.changeState(new State3)</text><!--MD5=[64495b8fbf9e79a080f449d41e5a6213]
link Context to State--><path codeLine="27" d="M833.62,307.37 C857.02,290.85 878.63,270.18 892,245 C910.55,210.06 911.38,190.48 892,156 C872.32,120.97 835.44,96.41 801.04,80.03 " fill="none" id="Context-to-State" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="789.02,74.58,792.8381,80.6973,799.9534,79.5258,796.1353,73.4084,789.02,74.58" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[71f52abdb5b06950f99f5bb2b50953ae]
link State1 to Context--><path codeLine="28" d="M661.18,245.23 C669.03,260.05 677.99,276.96 686.58,293.16 " fill="none" id="State1-to-Context" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="692.74,304.79,693.4654,297.6155,687.1217,294.1865,686.3963,301.361,692.74,304.79" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f5aef1594ceac193fa49fe2dd3328a39]
link State2 to Context--><path codeLine="29" d="M141.01,237.87 C147,240.49 153.06,242.92 159,245 C305.28,296.29 481.41,327.69 597.25,344.44 " fill="none" id="State2-to-Context" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="610.37,346.31,604.9975,341.5,598.4911,344.6093,603.8637,349.4192,610.37,346.31" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ada0ba5306651da939d6bd3b0eabab60]
link State3 to Context--><path codeLine="30" d="M783.55,245.23 C775.6,260.05 766.53,276.96 757.84,293.16 " fill="none" id="State3-to-Context" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="751.61,304.79,757.9704,301.3922,757.2803,294.2142,750.9199,297.612,751.61,304.79" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[66b0167828a6010fca56e2affda5d022]
reverse link State to State1--><path codeLine="32" d="M687.04,113.68 C678.93,127.88 670.45,142.7 662.88,155.96 " fill="none" id="State-backto-State1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="681.02,110.1,697.02,96.21,693.18,117.04,681.02,110.1" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d723ca8acf6686879b161e363a2a1b18]
reverse link State to State2--><path codeLine="33" d="M635.05,60.55 C522.72,72.73 322.22,100.56 159,156 C153.19,157.97 147.29,160.28 141.44,162.79 " fill="none" id="State-backto-State2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="634.35,53.59,654.97,58.46,635.82,67.51,634.35,53.59" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0e8ad03afc6f872c2e6a1f2b495cb124]
reverse link State to State3--><path codeLine="34" d="M757.38,113.68 C765.59,127.88 774.16,142.7 781.82,155.96 " fill="none" id="State-backto-State3" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="751.22,117.02,747.27,96.21,763.34,110.02,751.22,117.02" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f3da2519384748f583e7d529f8c8a759]
link State2 to State2$$$RIGHT--><!--MD5=[723e4d0afd2d8730f059de2d005617d8]
@startuml
skinparamlocked defaultFontSize 20
class Context {
    #changeState(State)
    +method1()
    +method2()
}

interface State {
    +method1()
    +method2()
}

class State1 {
    +method1()
    +method2()
}

class State2 {
    +method1()
    +method2()
}

class State3 {
    +method1()
    +method2()
}

Context -r-* State
State1 -d-o Context
State2 -d-o Context
State3 -d-o Context

State1 -u-|> State
State2 -u-|> State
State3 -u-|> State

note right of State2::method1()
    doSomething()
    context.changeState(new State3)
end note

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Замена большого switch-case
</span>
</li>
<li>
<span>
<code>Context</code> агрегирует объекты <code>State</code>
</span>
</li>
<li>
<span>
Каждый <code>State</code> может переключать состояние в <code>Context</code>
</span>
</li>
<li>
<span>
<code>State</code>-ы кое-что знают друг о друге
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>TCP-соединение, переключение окон на экране смартфона</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_strategy_стратегия">6.9. Strategy (стратегия)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="266px" preserveAspectRatio="none" style="width:508px;height:266px;background:#FFFFFF;" version="1.1" viewBox="0 0 508 266" width="508px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n4hp2cbwl809" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[377953f0e8c8c0131a700fca43c84158]
class Strategy--><rect codeLine="1" fill="#FEFECE" filter="url(#f1n4hp2cbwl809)" height="65.2813" id="Strategy" style="stroke:#A80036;stroke-width:1.5;" width="120" x="285.5" y="19"/><ellipse cx="301.5" cy="36" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M296.6875,31.4531 L296.6875,28.9219 L305.3594,28.9219 L305.3594,31.4531 L302.4688,31.4531 L302.4688,40.9531 L305.3594,40.9531 L305.3594,43.5 L296.6875,43.5 L296.6875,40.9531 L299.5781,40.9531 L299.5781,31.4531 L296.6875,31.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="86" x="316.5" y="42.9238">Strategy</text><line style="stroke:#A80036;stroke-width:1.5;" x1="286.5" x2="404.5" y1="53" y2="53"/><ellipse cx="296.5" cy="64" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="306.5" y="75.5645">do()</text><!--MD5=[d678f02e2d5bd6dca56adad3113a969b]
class Strategy1--><rect codeLine="5" fill="#FEFECE" filter="url(#f1n4hp2cbwl809)" height="96.5625" id="Strategy1" style="stroke:#A80036;stroke-width:1.5;" width="132" x="195.5" y="156"/><ellipse cx="211.5" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M214.5625,180.0781 Q213.875,180.4375 213.125,180.6094 Q212.375,180.7813 211.5469,180.7813 Q208.5938,180.7813 207.0313,178.8438 Q205.4844,176.8906 205.4844,173.2188 Q205.4844,169.5469 207.0313,167.6094 Q208.5938,165.6563 211.5469,165.6563 Q212.375,165.6563 213.125,165.8281 Q213.8906,166 214.5625,166.3594 L214.5625,169.5625 Q213.8125,168.875 213.1094,168.5625 Q212.4219,168.25 211.6719,168.25 Q210.0938,168.25 209.2813,169.5 Q208.4844,170.75 208.4844,173.2188 Q208.4844,175.6875 209.2813,176.9375 Q210.0938,178.1875 211.6719,178.1875 Q212.4219,178.1875 213.1094,177.875 Q213.8125,177.5625 214.5625,176.875 L214.5625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="226.5" y="179.9238">Strategy1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196.5" x2="326.5" y1="190" y2="190"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="201.5" y="212.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="196.5" x2="326.5" y1="221.2813" y2="221.2813"/><ellipse cx="206.5" cy="232.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="216.5" y="243.8457">do()</text><!--MD5=[bc790b966eae73bda6a7bf384de79ba2]
class Strategy2--><rect codeLine="10" fill="#FEFECE" filter="url(#f1n4hp2cbwl809)" height="96.5625" id="Strategy2" style="stroke:#A80036;stroke-width:1.5;" width="132" x="362.5" y="156"/><ellipse cx="378.5" cy="173" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M381.5625,180.0781 Q380.875,180.4375 380.125,180.6094 Q379.375,180.7813 378.5469,180.7813 Q375.5938,180.7813 374.0313,178.8438 Q372.4844,176.8906 372.4844,173.2188 Q372.4844,169.5469 374.0313,167.6094 Q375.5938,165.6563 378.5469,165.6563 Q379.375,165.6563 380.125,165.8281 Q380.8906,166 381.5625,166.3594 L381.5625,169.5625 Q380.8125,168.875 380.1094,168.5625 Q379.4219,168.25 378.6719,168.25 Q377.0938,168.25 376.2813,169.5 Q375.4844,170.75 375.4844,173.2188 Q375.4844,175.6875 376.2813,176.9375 Q377.0938,178.1875 378.6719,178.1875 Q379.4219,178.1875 380.1094,177.875 Q380.8125,177.5625 381.5625,176.875 L381.5625,180.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="393.5" y="179.9238">Strategy2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="363.5" x2="493.5" y1="190" y2="190"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="368.5" y="212.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="363.5" x2="493.5" y1="221.2813" y2="221.2813"/><ellipse cx="373.5" cy="232.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="383.5" y="243.8457">do()</text><!--MD5=[6754354365917abf8f1a56af1b7e344c]
class Context--><rect codeLine="15" fill="#FEFECE" filter="url(#f1n4hp2cbwl809)" height="88.5625" id="Context" style="stroke:#A80036;stroke-width:1.5;" width="243" x="7" y="7"/><ellipse cx="85" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M88.0625,31.0781 Q87.375,31.4375 86.625,31.6094 Q85.875,31.7813 85.0469,31.7813 Q82.0938,31.7813 80.5313,29.8438 Q78.9844,27.8906 78.9844,24.2188 Q78.9844,20.5469 80.5313,18.6094 Q82.0938,16.6563 85.0469,16.6563 Q85.875,16.6563 86.625,16.8281 Q87.3906,17 88.0625,17.3594 L88.0625,20.5625 Q87.3125,19.875 86.6094,19.5625 Q85.9219,19.25 85.1719,19.25 Q83.5938,19.25 82.7813,20.5 Q81.9844,21.75 81.9844,24.2188 Q81.9844,26.6875 82.7813,27.9375 Q83.5938,29.1875 85.1719,29.1875 Q85.9219,29.1875 86.6094,28.875 Q87.3125,28.5625 88.0625,27.875 L88.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="107" y="30.9238">Context</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="249" y1="41" y2="41"/><ellipse cx="18" cy="52" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="216" x="28" y="63.5645">setStrategy(Strategy)</text><ellipse cx="18" cy="75.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="28" y="86.8457">make()</text><!--MD5=[d7ae2fb1d2e7383bf211b48d4c302458]
reverse link Strategy to Strategy1--><path codeLine="20" d="M318.16,101.65 C308.49,119.03 297.63,138.55 288.03,155.81 " fill="none" id="Strategy-backto-Strategy1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="312.05,98.23,327.89,84.15,324.29,105.04,312.05,98.23" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d1c818ce3a6ca07844ad774c0917e5d5]
reverse link Strategy to Strategy2--><path codeLine="21" d="M372.67,101.92 C382.18,119.24 392.85,138.64 402.29,155.81 " fill="none" id="Strategy-backto-Strategy2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="366.4,105.05,362.9,84.15,378.67,98.31,366.4,105.05" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0a7be358f08202a33cfcf8e27bbb9c25]
link Context to Strategy--><path codeLine="22" d="M250.14,51.5 C257.43,51.5 264.73,51.5 272.02,51.5 " fill="none" id="Context-to-Strategy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="285.15,51.5,279.15,47.5,273.15,51.5,279.15,55.5,285.15,51.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[92cfb0259fcc44e5093608584e0fdf50]
@startuml
skinparamlocked defaultFontSize 20
interface Strategy {
    +do()
}

class Strategy1 {
    ...
    +do()
}

class Strategy2 {
    ...
    +do()
}

class Context {
    +setStrategy(Strategy)
    +make()
}

Strategy1 -u-|> Strategy
Strategy2 -u-|> Strategy
Context -r-o Strategy

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Все стратегии делают одно и то же разными способами
</span>
</li>
<li>
<span>
<code>Context</code> схож с мостом и немного адаптером
</span>
</li>
<li>
<span>
Пользователь выбирает стратегии, <code>Context</code> их только использует
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Построение маршрута из точки A в точку B для разных средств передвижения</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_template_method_шаблонный_метод">6.10. Template method (шаблонный метод)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="258px" preserveAspectRatio="none" style="width:519px;height:258px;background:#FFFFFF;" version="1.1" viewBox="0 0 519 258" width="519px" zoomAndPan="magnify"><defs><filter height="300%" id="f1taqw55t7pkpv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[8900b8126f988052b90f9f1b0582e804]
class Algorithm--><rect codeLine="1" fill="#FEFECE" filter="url(#f1taqw55t7pkpv)" height="135.125" id="Algorithm" style="stroke:#A80036;stroke-width:1.5;" width="209" x="162" y="109"/><ellipse cx="212" cy="126" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M215.0625,133.0781 Q214.375,133.4375 213.625,133.6094 Q212.875,133.7813 212.0469,133.7813 Q209.0938,133.7813 207.5313,131.8438 Q205.9844,129.8906 205.9844,126.2188 Q205.9844,122.5469 207.5313,120.6094 Q209.0938,118.6563 212.0469,118.6563 Q212.875,118.6563 213.625,118.8281 Q214.3906,119 215.0625,119.3594 L215.0625,122.5625 Q214.3125,121.875 213.6094,121.5625 Q212.9219,121.25 212.1719,121.25 Q210.5938,121.25 209.7813,122.5 Q208.9844,123.75 208.9844,126.2188 Q208.9844,128.6875 209.7813,129.9375 Q210.5938,131.1875 212.1719,131.1875 Q212.9219,131.1875 213.6094,130.875 Q214.3125,130.5625 215.0625,129.875 L215.0625,133.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="100" x="234" y="132.9238">Algorithm</text><line style="stroke:#A80036;stroke-width:1.5;" x1="163" x2="370" y1="143" y2="143"/><ellipse cx="173" cy="154" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="183" y="165.5645">templateMethod()</text><ellipse cx="173" cy="177.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="183" y="188.8457">step1()</text><ellipse cx="173" cy="200.5625" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="183" y="212.127">step2()</text><ellipse cx="173" cy="223.8438" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="183" y="235.4082">step3()</text><!--MD5=[04de3a55beb93e2bdf40d19808d8fbd9]
class Step1--><rect codeLine="8" fill="#FEFECE" filter="url(#f1taqw55t7pkpv)" height="88.5625" id="Step1" style="stroke:#A80036;stroke-width:1.5;" width="99" x="28" y="132"/><ellipse cx="46.7" cy="149" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M49.7625,156.0781 Q49.075,156.4375 48.325,156.6094 Q47.575,156.7813 46.7469,156.7813 Q43.7938,156.7813 42.2313,154.8438 Q40.6844,152.8906 40.6844,149.2188 Q40.6844,145.5469 42.2313,143.6094 Q43.7938,141.6563 46.7469,141.6563 Q47.575,141.6563 48.325,141.8281 Q49.0906,142 49.7625,142.3594 L49.7625,145.5625 Q49.0125,144.875 48.3094,144.5625 Q47.6219,144.25 46.8719,144.25 Q45.2938,144.25 44.4813,145.5 Q43.6844,146.75 43.6844,149.2188 Q43.6844,151.6875 44.4813,152.9375 Q45.2938,154.1875 46.8719,154.1875 Q47.6219,154.1875 48.3094,153.875 Q49.0125,153.5625 49.7625,152.875 L49.7625,156.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="62.3" y="155.9238">Step1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="29" x2="126" y1="166" y2="166"/><ellipse cx="39" cy="177" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="49" y="188.5645">step1()</text><ellipse cx="39" cy="200.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="49" y="211.8457">step2()</text><!--MD5=[973df8a55b42bbf784bca72d669f6bfd]
class Step2--><rect codeLine="13" fill="#FEFECE" filter="url(#f1taqw55t7pkpv)" height="88.5625" id="Step2" style="stroke:#A80036;stroke-width:1.5;" width="99" x="406" y="132"/><ellipse cx="424.7" cy="149" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M427.7625,156.0781 Q427.075,156.4375 426.325,156.6094 Q425.575,156.7813 424.7469,156.7813 Q421.7938,156.7813 420.2313,154.8438 Q418.6844,152.8906 418.6844,149.2188 Q418.6844,145.5469 420.2313,143.6094 Q421.7938,141.6563 424.7469,141.6563 Q425.575,141.6563 426.325,141.8281 Q427.0906,142 427.7625,142.3594 L427.7625,145.5625 Q427.0125,144.875 426.3094,144.5625 Q425.6219,144.25 424.8719,144.25 Q423.2938,144.25 422.4813,145.5 Q421.6844,146.75 421.6844,149.2188 Q421.6844,151.6875 422.4813,152.9375 Q423.2938,154.1875 424.8719,154.1875 Q425.6219,154.1875 426.3094,153.875 Q427.0125,153.5625 427.7625,152.875 L427.7625,156.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="440.3" y="155.9238">Step2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="407" x2="504" y1="166" y2="166"/><ellipse cx="417" cy="177" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="427" y="188.5645">step1()</text><ellipse cx="417" cy="200.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="427" y="211.8457">step3()</text><!--MD5=[6ccec7cdaf460f9406ea785ec0a74e8f]
class Algorithm1--><rect fill="#FEFECE" filter="url(#f1taqw55t7pkpv)" height="42" id="Algorithm1" style="stroke:#A80036;stroke-width:1.5;" width="147" x="7" y="7"/><ellipse cx="23" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M26.0625,31.0781 Q25.375,31.4375 24.625,31.6094 Q23.875,31.7813 23.0469,31.7813 Q20.0938,31.7813 18.5313,29.8438 Q16.9844,27.8906 16.9844,24.2188 Q16.9844,20.5469 18.5313,18.6094 Q20.0938,16.6563 23.0469,16.6563 Q23.875,16.6563 24.625,16.8281 Q25.3906,17 26.0625,17.3594 L26.0625,20.5625 Q25.3125,19.875 24.6094,19.5625 Q23.9219,19.25 23.1719,19.25 Q21.5938,19.25 20.7813,20.5 Q19.9844,21.75 19.9844,24.2188 Q19.9844,26.6875 20.7813,27.9375 Q21.5938,29.1875 23.1719,29.1875 Q23.9219,29.1875 24.6094,28.875 Q25.3125,28.5625 26.0625,27.875 L26.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="113" x="38" y="30.9238">Algorithm1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="153" y1="41" y2="41"/><!--MD5=[292bf992fef5401acf7031efc5eb98b9]
class Algorithm2--><rect fill="#FEFECE" filter="url(#f1taqw55t7pkpv)" height="42" id="Algorithm2" style="stroke:#A80036;stroke-width:1.5;" width="147" x="287" y="7"/><ellipse cx="303" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M306.0625,31.0781 Q305.375,31.4375 304.625,31.6094 Q303.875,31.7813 303.0469,31.7813 Q300.0938,31.7813 298.5313,29.8438 Q296.9844,27.8906 296.9844,24.2188 Q296.9844,20.5469 298.5313,18.6094 Q300.0938,16.6563 303.0469,16.6563 Q303.875,16.6563 304.625,16.8281 Q305.3906,17 306.0625,17.3594 L306.0625,20.5625 Q305.3125,19.875 304.6094,19.5625 Q303.9219,19.25 303.1719,19.25 Q301.5938,19.25 300.7813,20.5 Q299.9844,21.75 299.9844,24.2188 Q299.9844,26.6875 300.7813,27.9375 Q301.5938,29.1875 303.1719,29.1875 Q303.9219,29.1875 304.6094,28.875 Q305.3125,28.5625 306.0625,27.875 L306.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="113" x="318" y="30.9238">Algorithm2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="288" x2="433" y1="41" y2="41"/><!--MD5=[59cf075e6e24ee8398264b65d2c672e7]
link Algorithm1 to Algorithm--><path codeLine="18" d="M105.97,49.06 C121.9,61.61 143.57,78.67 165.82,96.2 " fill="none" id="Algorithm1-to-Algorithm" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="170.27,90.8,181.65,108.67,161.61,101.8,170.27,90.8" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c626b6447691e57b9e36ea763a3f6255]
link Algorithm1 to Step1--><path codeLine="19" d="M80.09,49.06 C79.76,65.32 79.27,89.17 78.8,111.78 " fill="none" id="Algorithm1-to-Step1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="85.8,112.09,78.39,131.95,71.8,111.81,85.8,112.09" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bf5198ab390b39f9ed5342e8edeb7de4]
link Algorithm2 to Algorithm--><path codeLine="21" d="M347.63,49.06 C340.28,60.52 330.51,75.74 320.31,91.64 " fill="none" id="Algorithm2-to-Algorithm" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="326.07,95.62,309.38,108.67,314.29,88.06,326.07,95.62" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5238ce769ce8650d582530ed4eed3531]
link Algorithm2 to Step2--><path codeLine="22" d="M373.51,49.06 C384.54,66.07 400.95,91.37 416.19,114.89 " fill="none" id="Algorithm2-to-Step2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="422.25,111.36,427.26,131.95,410.5,118.98,422.25,111.36" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[54ff795919d0af00b5a53eecb085d514]
@startuml
skinparamlocked defaultFontSize 20
class Algorithm {
    +templateMethod()
    +step1()
    +step2()
    +step3()
}

class Step1 {
    +step1()
    +step2()
}

class Step2 {
    +step1()
    +step3()
}

Algorithm1 - -|> Algorithm
Algorithm1 - -|> Step1

Algorithm2 - -|> Algorithm
Algorithm2 - -|> Step2

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Множественное наследование
</span>
</li>
<li>
<span>
Алгоритм разбивается на шаги, которые реализованы отдельно
</span>
</li>
<li>
<span>
Все шаги комбинируются и жёстко прописаны в <code>templateMethod</code>
</span>
</li>
<li>
<span>
<code>templateMethod</code> не переопределяется
</span>
</li>
<li>
<span>
Схож со стратегиями, где композиция заменена наследованием
</span>
</li>
<li>
<span>
Невозможно переопределять шаги во время исполнения
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Общий ИИ для разных персонажей игры</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_visitor_посетитель">6.11. Visitor (посетитель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="509px" preserveAspectRatio="none" style="width:606px;height:509px;background:#FFFFFF;" version="1.1" viewBox="0 0 606 509" width="606px" zoomAndPan="magnify"><defs><filter height="300%" id="fkgn7un6iqrof" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[53bf68ed638bcf4718423098b3d480ea]
class Visitor--><rect codeLine="1" fill="#FEFECE" filter="url(#fkgn7un6iqrof)" height="88.5625" id="Visitor" style="stroke:#A80036;stroke-width:1.5;" width="163" x="205" y="257"/><ellipse cx="250.25" cy="274" fill="#B4A7E5" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M245.4375,269.4531 L245.4375,266.9219 L254.1094,266.9219 L254.1094,269.4531 L251.2188,269.4531 L251.2188,278.9531 L254.1094,278.9531 L254.1094,281.5 L245.4375,281.5 L245.4375,278.9531 L248.3281,278.9531 L248.3281,269.4531 L245.4375,269.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="64" x="271.75" y="280.9238">Visitor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="206" x2="367" y1="291" y2="291"/><ellipse cx="216" cy="302" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="313.5645">visit(Object1)</text><ellipse cx="216" cy="325.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="336.8457">visit(Object2)</text><!--MD5=[bc6245a366f3ac2fa24f54c34784dfce]
class Visitor1--><rect codeLine="6" fill="#FEFECE" filter="url(#fkgn7un6iqrof)" height="88.5625" id="Visitor1" style="stroke:#A80036;stroke-width:1.5;" width="163" x="7" y="407"/><ellipse cx="46.4" cy="424" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M49.4625,431.0781 Q48.775,431.4375 48.025,431.6094 Q47.275,431.7813 46.4469,431.7813 Q43.4938,431.7813 41.9313,429.8438 Q40.3844,427.8906 40.3844,424.2188 Q40.3844,420.5469 41.9313,418.6094 Q43.4938,416.6563 46.4469,416.6563 Q47.275,416.6563 48.025,416.8281 Q48.7906,417 49.4625,417.3594 L49.4625,420.5625 Q48.7125,419.875 48.0094,419.5625 Q47.3219,419.25 46.5719,419.25 Q44.9938,419.25 44.1813,420.5 Q43.3844,421.75 43.3844,424.2188 Q43.3844,426.6875 44.1813,427.9375 Q44.9938,429.1875 46.5719,429.1875 Q47.3219,429.1875 48.0094,428.875 Q48.7125,428.5625 49.4625,427.875 L49.4625,431.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="66.6" y="430.9238">Visitor1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="169" y1="441" y2="441"/><ellipse cx="18" cy="452" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="28" y="463.5645">visit(Object1)</text><ellipse cx="18" cy="475.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="28" y="486.8457">visit(Object2)</text><!--MD5=[903a14741be4cb55d84cc36a7954d495]
class Visitor2--><rect codeLine="11" fill="#FEFECE" filter="url(#fkgn7un6iqrof)" height="88.5625" id="Visitor2" style="stroke:#A80036;stroke-width:1.5;" width="163" x="205" y="407"/><ellipse cx="244.4" cy="424" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M247.4625,431.0781 Q246.775,431.4375 246.025,431.6094 Q245.275,431.7813 244.4469,431.7813 Q241.4938,431.7813 239.9313,429.8438 Q238.3844,427.8906 238.3844,424.2188 Q238.3844,420.5469 239.9313,418.6094 Q241.4938,416.6563 244.4469,416.6563 Q245.275,416.6563 246.025,416.8281 Q246.7906,417 247.4625,417.3594 L247.4625,420.5625 Q246.7125,419.875 246.0094,419.5625 Q245.3219,419.25 244.5719,419.25 Q242.9938,419.25 242.1813,420.5 Q241.3844,421.75 241.3844,424.2188 Q241.3844,426.6875 242.1813,427.9375 Q242.9938,429.1875 244.5719,429.1875 Q245.3219,429.1875 246.0094,428.875 Q246.7125,428.5625 247.4625,427.875 L247.4625,431.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="264.6" y="430.9238">Visitor2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="206" x2="367" y1="441" y2="441"/><ellipse cx="216" cy="452" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="463.5645">visit(Object1)</text><ellipse cx="216" cy="475.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="486.8457">visit(Object2)</text><!--MD5=[10abd806680aae5d024e6af22c6176ab]
class Visitor3--><rect codeLine="16" fill="#FEFECE" filter="url(#fkgn7un6iqrof)" height="88.5625" id="Visitor3" style="stroke:#A80036;stroke-width:1.5;" width="163" x="403" y="407"/><ellipse cx="442.4" cy="424" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M445.4625,431.0781 Q444.775,431.4375 444.025,431.6094 Q443.275,431.7813 442.4469,431.7813 Q439.4938,431.7813 437.9313,429.8438 Q436.3844,427.8906 436.3844,424.2188 Q436.3844,420.5469 437.9313,418.6094 Q439.4938,416.6563 442.4469,416.6563 Q443.275,416.6563 444.025,416.8281 Q444.7906,417 445.4625,417.3594 L445.4625,420.5625 Q444.7125,419.875 444.0094,419.5625 Q443.3219,419.25 442.5719,419.25 Q440.9938,419.25 440.1813,420.5 Q439.3844,421.75 439.3844,424.2188 Q439.3844,426.6875 440.1813,427.9375 Q440.9938,429.1875 442.5719,429.1875 Q443.3219,429.1875 444.0094,428.875 Q444.7125,428.5625 445.4625,427.875 L445.4625,431.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="462.6" y="430.9238">Visitor3</text><line style="stroke:#A80036;stroke-width:1.5;" x1="404" x2="565" y1="441" y2="441"/><ellipse cx="414" cy="452" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="424" y="463.5645">visit(Object1)</text><ellipse cx="414" cy="475.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="424" y="486.8457">visit(Object2)</text><!--MD5=[7a1a18227f0381d0e6f0aa1a4d364acd]
class Object1--><rect codeLine="25" fill="#FEFECE" filter="url(#fkgn7un6iqrof)" height="96.5625" id="Object1" style="stroke:#A80036;stroke-width:1.5;" width="160" x="109.5" y="7"/><ellipse cx="146.65" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M149.7125,31.0781 Q149.025,31.4375 148.275,31.6094 Q147.525,31.7813 146.6969,31.7813 Q143.7438,31.7813 142.1813,29.8438 Q140.6344,27.8906 140.6344,24.2188 Q140.6344,20.5469 142.1813,18.6094 Q143.7438,16.6563 146.6969,16.6563 Q147.525,16.6563 148.275,16.8281 Q149.0406,17 149.7125,17.3594 L149.7125,20.5625 Q148.9625,19.875 148.2594,19.5625 Q147.5719,19.25 146.8219,19.25 Q145.2438,19.25 144.4313,20.5 Q143.6344,21.75 143.6344,24.2188 Q143.6344,26.6875 144.4313,27.9375 Q145.2438,29.1875 146.8219,29.1875 Q147.5719,29.1875 148.2594,28.875 Q148.9625,28.5625 149.7125,27.875 L149.7125,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="166.35" y="30.9238">Object1</text><line style="stroke:#A80036;stroke-width:1.5;" x1="110.5" x2="268.5" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="115.5" y="63.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="110.5" x2="268.5" y1="72.2813" y2="72.2813"/><ellipse cx="120.5" cy="83.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="133" x="130.5" y="94.8457">accept(self&amp;)</text><!--MD5=[7c73e783ae5e467bbefeded3c9c5ec39]
class Object2--><rect codeLine="30" fill="#FEFECE" filter="url(#fkgn7un6iqrof)" height="96.5625" id="Object2" style="stroke:#A80036;stroke-width:1.5;" width="160" x="304.5" y="7"/><ellipse cx="341.65" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#A80036;stroke-width:1.0;"/><path d="M344.7125,31.0781 Q344.025,31.4375 343.275,31.6094 Q342.525,31.7813 341.6969,31.7813 Q338.7438,31.7813 337.1813,29.8438 Q335.6344,27.8906 335.6344,24.2188 Q335.6344,20.5469 337.1813,18.6094 Q338.7438,16.6563 341.6969,16.6563 Q342.525,16.6563 343.275,16.8281 Q344.0406,17 344.7125,17.3594 L344.7125,20.5625 Q343.9625,19.875 343.2594,19.5625 Q342.5719,19.25 341.8219,19.25 Q340.2438,19.25 339.4313,20.5 Q338.6344,21.75 338.6344,24.2188 Q338.6344,26.6875 339.4313,27.9375 Q340.2438,29.1875 341.8219,29.1875 Q342.5719,29.1875 343.2594,28.875 Q343.9625,28.5625 344.7125,27.875 L344.7125,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="361.35" y="30.9238">Object2</text><line style="stroke:#A80036;stroke-width:1.5;" x1="305.5" x2="463.5" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="310.5" y="63.5645">...</text><line style="stroke:#A80036;stroke-width:1.5;" x1="305.5" x2="463.5" y1="72.2813" y2="72.2813"/><ellipse cx="315.5" cy="83.2813" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="133" x="325.5" y="94.8457">accept(self&amp;)</text><!--MD5=[168c5c270808fbbe24a96d8b4f6f9449]
reverse link Visitor to Visitor1--><path codeLine="21" d="M212.05,358.15 C190.46,374.29 167.21,391.67 146.76,406.95 " fill="none" id="Visitor-backto-Visitor1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="207.95,352.47,228.16,346.1,216.34,363.69,207.95,352.47" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[46de6f6dfc4aeb6bd45b19ebb2e46508]
reverse link Visitor to Visitor2--><path codeLine="22" d="M286.5,366.31 C286.5,380.02 286.5,394.22 286.5,406.95 " fill="none" id="Visitor-backto-Visitor2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="279.5,366.1,286.5,346.1,293.5,366.1,279.5,366.1" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7a1ecc9993348f3c70183bc781560d5b]
reverse link Visitor to Visitor3--><path codeLine="23" d="M360.95,358.15 C382.54,374.29 405.79,391.67 426.24,406.95 " fill="none" id="Visitor-backto-Visitor3" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="356.66,363.69,344.84,346.1,365.05,352.47,356.66,363.69" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8a1e792b19af60836a040bc707fa14c5]
link Object1 to Visitor--><path codeLine="35" d="M208.43,104.12 C224.44,144.39 247.4,202.14 264.27,244.59 " fill="none" id="Object1-to-Visitor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="269.08,256.69,270.5756,249.6357,264.6392,245.5419,263.1436,252.5962,269.08,256.69" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2a8f8b988911036dc8b69a4a7438d20e]
link Object2 to Visitor--><path codeLine="36" d="M365.37,104.12 C349.2,144.39 326.01,202.14 308.95,244.59 " fill="none" id="Object2-to-Visitor" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="304.1,256.69,310.0464,252.6108,308.568,245.5528,302.6216,249.6321,304.1,256.69" style="stroke:#A80036;stroke-width:1.0;"/><path d="M357.5,139 L357.5,218 L597.5,218 L597.5,149 L587.5,139 L357.5,139 " fill="#FBFB77" filter="url(#fkgn7un6iqrof)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M587.5,139 L587.5,149 L597.5,149 L587.5,139 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="215" x="363.5" y="162.5645">visitor = new Visitor1</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="363.5" y="185.8457">foreach obj in Objects</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="155" x="387.5" y="209.127">obj.visit(visitor)</text><!--MD5=[f0aeeb1a815057525991337ff2a1099e]
@startuml
skinparamlocked defaultFontSize 20
interface Visitor {
    +visit(Object1)
    +visit(Object2)
}

class Visitor1 {
    +visit(Object1)
    +visit(Object2)
}

class Visitor2 {
    +visit(Object1)
    +visit(Object2)
}

class Visitor3 {
    +visit(Object1)
    +visit(Object2)
}

Visitor1 -u-|> Visitor
Visitor2 -u-|> Visitor
Visitor3 -u-|> Visitor

class Object1 {
    ...
    +accept(self&)
}

class Object2 {
    ...
    +accept(self&)
}

Object1 - -o Visitor
Object2 - -o Visitor

note on link
    visitor = new Visitor1
    foreach obj in Objects
        obj.visit(visitor)
end note

hide empty fields
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Обход всех компонентов рекурсивно
</span>
</li>
<li>
<span>
Совмещает работу компоновщика и итератор
</span>
</li>
<li>
<span>
Сколько объектов <code>Objects</code>, столько должно быть функций <code>visit</code> в интерфейсе <code>Visitor</code>
</span>
</li>
<li>
<span>
Каждый <code>Visitor</code> нужен для реализации какой-то части логики
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Рекурсивная сериализация в разные форматы (каждый формат&#8201;&#8212;&#8201;это новый объект <code>Visitor</code>)</p></div>
</div></div>
</body>
</html>
