<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
<title>Master programming. <br> Лекция №10 (Паттерны проектирования)</title>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="copyright" content="Copyright &#169; Игорь Шаронов" />
<meta name="generator" content="AsciiDoc 10.2.0" />
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
/* slidy.css

   Copyright (c) 2005-2010 W3C (MIT, ERCIM, Keio), All Rights Reserved.
   W3C liability, trademark, document use and software licensing
   rules apply, see:

   http://www.w3.org/Consortium/Legal/copyright-documents
   http://www.w3.org/Consortium/Legal/copyright-software
*/

/*
   SJR: 2010-09-29: Modified for AsciiDoc slidy backend.
   Mostly just commented out stuff that is handled by AsciiDoc's CSS files.
*/

body
{
  margin: 0 0 0 0;
  padding: 0 0 0 0;
  width: 100%;
  height: 100%;
  color: black;
  background-color: white;
/*
  font-family: "Gill Sans MT", "Gill Sans", GillSans, sans-serif;
*/
  font-size: 14pt;
}

div.toolbar {
  position: fixed; z-index: 200;
  top: auto; bottom: 0; left: 0; right: 0;
  height: 1.2em; text-align: right;
  padding-left: 1em;
  padding-right: 1em;
  font-size: 60%;
  color: red;
  background-color: rgb(240,240,240);
  border-top: solid 1px rgb(180,180,180);
}

div.toolbar span.copyright {
  color: black;
  margin-left: 0.5em;
}

div.initial_prompt {
  position: absolute;
  z-index: 1000;
  bottom: 1.2em;
  width: 90%;
  background-color: rgb(200,200,200);
  opacity: 0.35;
  background-color: rgb(200,200,200, 0.35);
  cursor: pointer;
}

div.initial_prompt p.help {
  text-align: center;
}

div.initial_prompt p.close {
  text-align: right;
  font-style: italic;
}

div.slidy_toc {
  position: absolute;
  z-index: 300;
  width: 60%;
  max-width: 30em;
  height: 30em;
  overflow: auto;
  top: auto;
  right: auto;
  left: 4em;
  bottom: 4em;
  padding: 1em;
  background: rgb(240,240,240);
  border-style: solid;
  border-width: 2px;
  font-size: 60%;
}

div.slidy_toc .toc_heading {
  text-align: center;
  width: 100%;
  margin: 0;
  margin-bottom: 1em;
  border-bottom-style: solid;
  border-bottom-color: rgb(180,180,180);
  border-bottom-width: 1px;
}

div.slide {
  z-index: 20;
  margin: 0 0 0 0;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 20px;
  padding-right: 20px;
  border-width: 0;
  clear: both;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  line-height: 120%;
  background-color: transparent;
}

div.background {
  display: none;
}

div.handout {
  margin-left: 20px;
  margin-right: 20px;
}

div.slide.titlepage {
  text-align: center;
}

div.slide.titlepage.h1 {
  padding-top: 10%;
}

div.slide h1 {
  padding-left: 0;
  padding-right: 20pt;
  padding-top: 4pt;
  padding-bottom: 4pt;
  margin-top: 0;
  margin-left: 0;
  margin-right: 60pt;
  margin-bottom: 0.5em;
  display: block;
  font-size: 160%;
  line-height: 1.2em;
  background: transparent;
}

div.toc {
  position: absolute;
  top: auto;
  bottom: 4em;
  left: 4em;
  right: auto;
  width: 60%;
  max-width: 30em;
  height: 30em;
  border: solid thin black;
  padding: 1em;
  background: rgb(240,240,240);
  color: black;
  z-index: 300;
  overflow: auto;
  display: block;
  visibility: visible;
}

div.toc-heading {
  width: 100%;
  border-bottom: solid 1px rgb(180,180,180);
  margin-bottom: 1em;
  text-align: center;
}

/*
pre {
 font-size: 80%;
 font-weight: bold;
 line-height: 120%;
 padding-top: 0.2em;
 padding-bottom: 0.2em;
 padding-left: 1em;
 padding-right: 1em;
 border-style: solid;
 border-left-width: 1em;
 border-top-width: thin;
 border-right-width: thin;
 border-bottom-width: thin;
 border-color: #95ABD0;
 color: #00428C;
 background-color: #E4E5E7;
}
*/

/*
li pre { margin-left: 0; }

blockquote { font-style: italic }

img { background-color: transparent }

p.copyright { font-size: smaller }
*/

.center { text-align: center }
.footnote { font-size: smaller; margin-left: 2em; }

/*
a img { border-width: 0; border-style: none }
*/

a:visited { color: navy }
a:link { color: navy }
a:hover { color: red; text-decoration: underline }
a:active { color: red; text-decoration: underline }

a {text-decoration: none}
.navbar a:link {color: white}
.navbar a:visited {color: yellow}
.navbar a:active {color: red}
.navbar a:hover {color: red}

/*
ul { list-style-type: square; }
ul ul { list-style-type: disc; }
ul ul ul { list-style-type: circle; }
ul ul ul ul { list-style-type: disc; }
li { margin-left: 0.5em; margin-top: 0.5em; }
li li { font-size: 85%; font-style: italic }
li li li { font-size: 85%; font-style: normal }
*/

div dt
{
  margin-left: 0;
  margin-top: 1em;
  margin-bottom: 0.5em;
  font-weight: bold;
}
div dd
{
  margin-left: 2em;
  margin-bottom: 0.5em;
}


/*
p,pre,ul,ol,blockquote,h2,h3,h4,h5,h6,dl,table {
  margin-left: 1em;
  margin-right: 1em;
}
*/

p.subhead { font-weight: bold; margin-top: 2em; }

.smaller { font-size: smaller }
.bigger { font-size: 130% }

/*
td,th { padding: 0.2em }
*/

ul {
  margin: 0.5em 1.5em 0.5em 1.5em;
  padding: 0;
}

ol {
  margin: 0.5em 1.5em 0.5em 1.5em;
  padding: 0;
}

ul { list-style-type: square; }
ul ul { list-style-type: disc; }
ul ul ul { list-style-type: circle; }
ul ul ul ul { list-style-type: disc; }

/*
ul li {
  list-style: square;
  margin: 0.1em 0em 0.6em 0;
  padding: 0 0 0 0;
  line-height: 140%;
}

ol li {
  margin: 0.1em 0em 0.6em 1.5em;
  padding: 0 0 0 0px;
  line-height: 140%;
  list-style-type: decimal;
}

li ul li {
  font-size: 85%;
  font-style: italic;
  list-style-type: disc;
  background: transparent;
  padding: 0 0 0 0;
}
li li ul li {
  font-size: 85%;
  font-style: normal;
  list-style-type: circle;
  background: transparent;
  padding: 0 0 0 0;
}
li li li ul li {
  list-style-type: disc;
  background: transparent;
  padding: 0 0 0 0;
}

li ol li {
  list-style-type: decimal;
}


li li ol li {
  list-style-type: decimal;
}
*/

/*
 setting class="outline" on ol or ul makes it behave as an
 ouline list where blocklevel content in li elements is
 hidden by default and can be expanded or collapsed with
 mouse click. Set class="expand" on li to override default
*/

ol.outline li:hover { cursor: pointer }
ol.outline li.nofold:hover { cursor: default }

ul.outline li:hover { cursor: pointer }
ul.outline li.nofold:hover { cursor: default }

ol.outline { list-style:decimal; }
ol.outline ol { list-style-type:lower-alpha }

ol.outline li.nofold {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/nofold-dim.gif) no-repeat 0px 0.5em;
}
ol.outline li.unfolded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold-dim.gif) no-repeat 0px 0.5em;
}
ol.outline li.folded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold-dim.gif) no-repeat 0px 0.5em;
}
ol.outline li.unfolded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold.gif) no-repeat 0px 0.5em;
}
ol.outline li.folded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold.gif) no-repeat 0px 0.5em;
}

ul.outline li.nofold {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/nofold-dim.gif) no-repeat 0px 0.5em;
}
ul.outline li.unfolded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold-dim.gif) no-repeat 0px 0.5em;
}
ul.outline li.folded {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold-dim.gif) no-repeat 0px 0.5em;
}
ul.outline li.unfolded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/fold.gif) no-repeat 0px 0.5em;
}
ul.outline li.folded:hover {
  padding: 0 0 0 20px;
  background: transparent url(../graphics/unfold.gif) no-repeat 0px 0.5em;
}

/* for slides with class "title" in table of contents */
a.titleslide { font-weight: bold; font-style: italic }

/*
 hide images for work around for save as bug
 where browsers fail to save images used by CSS
*/
img.hidden { display: none; visibility: hidden }
div.initial_prompt { display: none; visibility: hidden }

  div.slide {
     visibility: visible;
     position: inherit;
  }
  div.handout {
     border-top-style: solid;
     border-top-width: thin;
     border-top-color: black;
  }

@media screen {
  .hidden { display: none; visibility: visible }

  div.slide.hidden { display: block; visibility: visible }
  div.handout.hidden { display: block; visibility: visible }
  div.background { display: none; visibility: hidden }
  body.single_slide div.initial_prompt { display: block; visibility: visible }
  body.single_slide div.background { display: block; visibility: visible }
  body.single_slide div.background.hidden { display: none; visibility: hidden }
  body.single_slide .invisible { visibility: hidden }
  body.single_slide .hidden { display: none; visibility: hidden }
  body.single_slide div.slide { position: absolute }
  body.single_slide div.handout { display: none; visibility: hidden }
}

@media print {
  .hidden { display: block; visibility: visible }

/*
  div.slide pre { font-size: 60%; padding-left: 0.5em; }
*/
  div.toolbar { display: none; visibility: hidden; }
  div.slidy_toc { display: none; visibility: hidden; }
  div.background { display: none; visibility: hidden; }
  div.slide { page-break-before: always }
  /* :first-child isn't reliable for print media */
  div.slide.first-slide { page-break-before: avoid }
}


/* SJR: AsciiDoc slidy backend tweaks */

ol, ul {
  margin: 0.8em 1.5em 0.8em 1.8em;
}
li > ul, li > ol {
  margin-top: 0.5em;
}

.outline > li.folded,
.outline > li.unfolded {
  color: #527bbd;
}
ul > li{ color: #aaa; }
ul > li > *, ol > li > * { color: black; }

li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}


/* Slidy custom CSS */

a:link { color: navy; text-decoration: underline }
</style>
<script type="text/javascript">
/*<![CDATA[*/
/* slidy.js

   Copyright (c) 2005-2010 W3C (MIT, ERCIM, Keio), All Rights Reserved.
   W3C liability, trademark, document use and software licensing
   rules apply, see:

   http://www.w3.org/Consortium/Legal/copyright-documents
   http://www.w3.org/Consortium/Legal/copyright-software
*/

// the slidy object implementation
var w3c_slidy = {
  // classify which kind of browser we're running under
  ns_pos: (typeof window.pageYOffset!='undefined'),
  khtml: ((navigator.userAgent).indexOf("KHTML") >= 0 ? true : false),
  opera: ((navigator.userAgent).indexOf("Opera") >= 0 ? true : false),
  ipad: ((navigator.userAgent).indexOf("iPad") >= 0 ? true : false),
  iphone: ((navigator.userAgent).indexOf("iPhone") >= 0 ? true : false),
  ie: (typeof document.all != "undefined" && !this.opera),
  ie6: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 6") != -1),
  ie7: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 7") != -1),
  ie8: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 8") != -1),
  ie9: (!this.ns_pos && navigator.userAgent.indexOf("MSIE 9") != -1),
  keyboardless: (this.ipad || this.iphone),

  // are we running as XHTML? (doesn't work on Opera)
  is_xhtml: /xml/.test(document.contentType),

  slide_number: 0, // integer slide count: 0, 1, 2, ...
  slide_number_element: null, // element containing slide number
  slides: [], // set to array of slide div's
  notes: [], // set to array of handout div's
  backgrounds: [], // set to array of background div's
  toolbar: null, // element containing toolbar
  title: null, // document title
  last_shown: null, // last incrementally shown item
  eos: null,  // span element for end of slide indicator
  toc: null, // table of contents
  outline: null, // outline element with the focus
  selected_text_len: 0, // length of drag selection on document
  view_all: 0,  // 1 to view all slides + handouts
  want_toolbar: true,  // user preference to show/hide toolbar
  mouse_click_enabled: true, // enables left click for next slide
  scroll_hack: 0, // IE work around for position: fixed
  disable_slide_click: false,  // used by clicked anchors

  lang: "en", // updated to language specified by html file

  help_anchor: null, // used for keyboard focus hack in showToolbar()
  help_page: "http://www.w3.org/Talks/Tools/Slidy2/help/help.html",
  help_text: "Navigate with mouse click, space bar, Cursor Left/Right, " +
             "or Pg Up and Pg Dn. Use S and B to change font size.",

  size_index: 0,
  size_adjustment: 0,
  sizes:  new Array("10pt", "12pt", "14pt", "16pt", "18pt", "20pt",
                    "22pt", "24pt", "26pt", "28pt", "30pt", "32pt"),

  // needed for efficient resizing
  last_width: 0,
  last_height: 0,


  // Needed for cross browser support for relative width/height on
  // object elements. The work around is to save width/height attributes
  // and then to recompute absolute width/height dimensions on resizing
   objects: [],

  // attach initialiation event handlers
  set_up: function () {
    var init = function() { w3c_slidy.init(); };
    if (typeof window.addEventListener != "undefined")
      window.addEventListener("load", init, false);
    else
      window.attachEvent("onload", init);
  },

  hide_slides: function () {
    if (document.body && !w3c_slidy.initialized)
      document.body.style.visibility = "hidden";
    else
      setTimeout(w3c_slidy.hide_slides, 50);
  },

  // hack to persuade IE to compute correct document height
  // as needed for simulating fixed positioning of toolbar
  ie_hack: function () {
    window.resizeBy(0,-1);
    window.resizeBy(0, 1);
  },

  init: function () {
    //alert("slidy starting test 10");
    document.body.style.visibility = "visible";
    w3c_slidy_i18n.init();
    this.add_toolbar();
    this.wrap_implicit_slides();
    this.collect_slides();
    this.collect_notes();
    this.collect_backgrounds();
    this.objects = document.body.getElementsByTagName("object");
    this.patch_anchors();
    this.slide_number = this.find_slide_number(location.href);
    window.offscreenbuffering = true;
    this.size_adjustment = this.find_size_adjust();
    this.time_left = this.find_duration();
    this.hide_image_toolbar();  // suppress IE image toolbar popup
    this.init_outliner();  // activate fold/unfold support
    this.title = document.title;

    // work around for opera bug
    this.is_xhtml = (document.body.tagName == "BODY" ? false : true);

    if (this.slides.length > 0)
    {
      var slide = this.slides[this.slide_number];

      if (this.slide_number > 0)
      {
        this.set_visibility_all_incremental("visible");
        this.last_shown = this.previous_incremental_item(null);
        this.set_eos_status(true);
      }
      else
      {
        this.last_shown = null;
        this.set_visibility_all_incremental("hidden");
        this.set_eos_status(!this.next_incremental_item(this.last_shown));
      }

      this.set_location();
      this.add_class(this.slides[0], "first-slide");
      w3c_slidy.show_slide(slide);
    }

    this.toc = this.table_of_contents();

    this.add_initial_prompt();

    // bind event handlers without interfering with custom page scripts
    // Tap events behave too weirdly to support clicks reliably on
    // iPhone and iPad, so exclude these from click handler

    if (!this.keyboardless)
      this.add_listener(document.body, "click", this.mouse_button_click);

    this.add_listener(document, "keydown", this.key_down);
    this.add_listener(document, "keypress", this.key_press);
    this.add_listener(window, "resize", this.resized);
    this.add_listener(window, "scroll", this.scrolled);
    this.add_listener(window, "unload", this.unloaded);

    if (!document.body.onclick)
      document.body.onclick = function () { };

    this.single_slide_view();

    //this.set_location();

    this.resized();

    if (this.ie7)
      setTimeout(w3c_slidy.ie_hack, 100);

    this.show_toolbar();

    // for back button detection
    setInterval(function () { w3c_slidy.check_location(); }, 200);
    w3c_slidy.initialized = true;
  },

  // create div element with links to each slide
  table_of_contents: function () {
    var toc = this.create_element("div");
    this.add_class(toc, "slidy_toc hidden");
    //toc.setAttribute("tabindex", "0");

    var heading = this.create_element("div");
    this.add_class(heading, "toc-heading");
    heading.innerHTML = "Table of Contents".localize();

    toc.appendChild(heading);
    var previous = null;

    for (var i = 0; i < this.slides.length; ++i)
    {
      var title = this.has_class(this.slides[i], "title");
      var num = document.createTextNode((i + 1) + ". ");

      toc.appendChild(num);

      var a = this.create_element("a");
      a.setAttribute("href", "#(" + (i+1) + ")");

      if (title)
        this.add_class(a, "titleslide");

      var name = document.createTextNode(this.slide_name(i));
      a.appendChild(name);
      a.onclick = w3c_slidy.toc_click;
      a.onkeydown = w3c_slidy.toc_keydown;
      a.previous = previous;

      if (previous)
        previous.next = a;

      toc.appendChild(a);

      if (i == 0)
        toc.first = a;

      if (i < this.slides.length - 1)
      {
        var br = this.create_element("br");
        toc.appendChild(br);
      }

      previous = a;
    }

    toc.focus = function () {
      if (this.first)
        this.first.focus();
    }

    toc.onmouseup = w3c_slidy.mouse_button_up;

    toc.onclick = function (e) {
      e||(e=window.event);

      if (w3c_slidy.selected_text_len <= 0)
         w3c_slidy.hide_table_of_contents();

      w3c_slidy.stop_propagation(e);

      if (e.cancel != undefined)
        e.cancel = true;

      if (e.returnValue != undefined)
        e.returnValue = false;

      return false;
    };

    document.body.insertBefore(toc, document.body.firstChild);
    return toc;
  },

  is_shown_toc: function () {
    return !w3c_slidy.has_class(w3c_slidy.toc, "hidden");
  },

  show_table_of_contents: function () {
    w3c_slidy.remove_class(w3c_slidy.toc, "hidden");
    var toc = w3c_slidy.toc;
    toc.focus();

    if (w3c_slidy.ie7 && w3c_slidy.slide_number == 0)
      setTimeout(w3c_slidy.ie_hack, 100);
  },

  hide_table_of_contents: function () {
    w3c_slidy.add_class(w3c_slidy.toc, "hidden");

    if (!w3c_slidy.opera)
      w3c_slidy.help_anchor.focus();
  },

  toggle_table_of_contents: function () {
    if (w3c_slidy.is_shown_toc())
      w3c_slidy.hide_table_of_contents();
    else
      w3c_slidy.show_table_of_contents();
  },

  // called on clicking toc entry
  toc_click: function (e) {
    if (!e)
      e = window.event;

    var target = w3c_slidy.get_target(e);

    if (target && target.nodeType == 1)
    {
      var uri = target.getAttribute("href");

      if (uri)
      {
        //alert("going to " + uri);
        var slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.hide_slide(slide);
        w3c_slidy.slide_number = w3c_slidy.find_slide_number(uri);
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.last_shown = null;
        w3c_slidy.set_location();
        w3c_slidy.set_visibility_all_incremental("hidden");
        w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
        w3c_slidy.show_slide(slide);
        //target.focus();

        try
        {
          if (!w3c_slidy.opera)
            w3c_slidy.help_anchor.focus();
        }
        catch (e)
        {
        }
      }
    }

    w3c_slidy.hide_table_of_contents(e);
    if (w3c_slidy.ie7) w3c_slidy.ie_hack();
    w3c_slidy.stop_propagation(e);
    return w3c_slidy.cancel(e);
  },

  // called onkeydown for toc entry
  toc_keydown: function (event) {
    var key;

    if (!event)
      var event = window.event;

    // kludge around NS/IE differences
    if (window.event)
      key = window.event.keyCode;
    else if (event.which)
      key = event.which;
    else
      return true; // Yikes! unknown browser

    // ignore event if key value is zero
    // as for alt on Opera and Konqueror
    if (!key)
      return true;

    // check for concurrent control/command/alt key
    // but are these only present on mouse events?

    if (event.ctrlKey || event.altKey)
      return true;

    if (key == 13)
    {
      var uri = this.getAttribute("href");

      if (uri)
      {
        //alert("going to " + uri);
       var slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.hide_slide(slide);
        w3c_slidy.slide_number = w3c_slidy.find_slide_number(uri);
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.last_shown = null;
        w3c_slidy.set_location();
        w3c_slidy.set_visibility_all_incremental("hidden");
        w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
        w3c_slidy.show_slide(slide);
        //target.focus();

        try
        {
          if (!w3c_slidy.opera)
            w3c_slidy.help_anchor.focus();
        }
        catch (e)
        {
        }
      }

      w3c_slidy.hide_table_of_contents();

      if (self.ie7)
       w3c_slidy.ie_hack();

      return w3c_slidy.cancel(event);
    }

    if (key == 40 && this.next)
    {
      this.next.focus();
      return w3c_slidy.cancel(event);
    }

    if (key == 38 && this.previous)
    {
      this.previous.focus();
      return w3c_slidy.cancel(event);
    }

    return true;
  },


  // ### OBSOLETE ###
  before_print: function () {
    this.show_all_slides();
    this.hide_toolbar();
    alert("before print");
  },

  // ### OBSOLETE ###
  after_print: function () {
    if (!this.view_all)
    {
      this.single_slide_view();
      this.show_toolbar();
    }
    alert("after print");
  },

  // ### OBSOLETE ###
  print_slides: function () {
    this.before_print();
    window.print();
    this.after_print();
  },

  // ### OBSOLETE ?? ###
  toggle_view: function () {
    if (this.view_all)
    {
      this.single_slide_view();
      this.show_toolbar();
      this.view_all = 0;
    }
    else
    {
      this.show_all_slides();
      this.hide_toolbar();
      this.view_all = 1;
    }
  },

  // prepare for printing  ### OBSOLETE ###
  show_all_slides: function () {
    this.remove_class(document.body, "single_slide");
    this.set_visibility_all_incremental("visible");
  },

  // restore after printing  ### OBSOLETE ###
  single_slide_view: function () {
    this.add_class(document.body, "single_slide");
    this.set_visibility_all_incremental("visible");
    this.last_shown = this.previous_incremental_item(null);
  },

  // suppress IE's image toolbar pop up
  hide_image_toolbar: function () {
    if (!this.ns_pos)
    {
      var images = document.getElementsByTagName("IMG");

      for (var i = 0; i < images.length; ++i)
        images[i].setAttribute("galleryimg", "no");
    }
  },

  unloaded: function (e) {
    //alert("unloaded");
  },

  // Safari and Konqueror don't yet support getComputedStyle()
  // and they always reload page when location.href is updated
  is_KHTML: function () {
    var agent = navigator.userAgent;
    return (agent.indexOf("KHTML") >= 0 ? true : false);
  },

  // find slide name from first h1 element
  // default to document title + slide number
  slide_name: function (index) {
    var name = null;
    var slide = this.slides[index];

    var heading = this.find_heading(slide);

    if (heading)
      name = this.extract_text(heading);

    if (!name)
      name = this.title + "(" + (index + 1) + ")";

    name.replace(/\&/g, "&amp;");
    name.replace(/\</g, "&lt;");
    name.replace(/\>/g, "&gt;");

    return name;
  },

  // find first h1 element in DOM tree
  find_heading: function (node) {
    if (!node || node.nodeType != 1)
      return null;

    if (node.nodeName == "H1" || node.nodeName == "h1")
      return node;

    var child = node.firstChild;

    while (child)
    {
      node = this.find_heading(child);

      if (node)
        return node;

      child = child.nextSibling;
    }

    return null;
  },

  // recursively extract text from DOM tree
  extract_text: function (node) {
    if (!node)
      return "";

    // text nodes
    if (node.nodeType == 3)
      return node.nodeValue;

    // elements
    if (node.nodeType == 1)
    {
      node = node.firstChild;
      var text = "";

      while (node)
      {
        text = text + this.extract_text(node);
        node = node.nextSibling;
      }

      return text;
    }

    return "";
  },

  // find copyright text from meta element
  find_copyright: function () {
    var name, content;
    var meta = document.getElementsByTagName("meta");

    for (var i = 0; i < meta.length; ++i)
    {
      name = meta[i].getAttribute("name");
      content = meta[i].getAttribute("content");

      if (name == "copyright")
        return content;
    }

    return null;
  },

  find_size_adjust: function () {
    var name, content, offset;
    var meta = document.getElementsByTagName("meta");

    for (var i = 0; i < meta.length; ++i)
    {
      name = meta[i].getAttribute("name");
      content = meta[i].getAttribute("content");

      if (name == "font-size-adjustment")
        return 1 * content;
    }

    return 1;
  },

  // <meta name="duration" content="20" />  for 20 minutes
  find_duration: function () {
    var name, content, offset;
    var meta = document.getElementsByTagName("meta");

    for (var i = 0; i < meta.length; ++i)
    {
      name = meta[i].getAttribute("name");
      content = meta[i].getAttribute("content");

      if (name == "duration")
        return 60000 * content;
    }

    return null;
  },

  replace_by_non_breaking_space: function (str) {
    for (var i = 0; i < str.length; ++i)
      str[i] = 160;
  },

  // ### CHECK ME ### is use of "li" okay for text/html?
  // for XHTML do we also need to specify namespace?
  init_outliner: function () {
    var items = document.getElementsByTagName("li");

    for (var i = 0; i < items.length; ++i)
    {
      var target = items[i];

      if (!this.has_class(target.parentNode, "outline"))
        continue;

      target.onclick = this.outline_click;
/* ### more work needed for IE6
      if (!this.ns_pos)
      {
        target.onmouseover = this.hover_outline;
        target.onmouseout = this.unhover_outline;
      }
*/
      if (this.foldable(target))
      {
        target.foldable = true;
        target.onfocus = function () {w3c_slidy.outline = this;};
        target.onblur = function () {w3c_slidy.outline = null;};

        if (!target.getAttribute("tabindex"))
          target.setAttribute("tabindex", "0");

        if (this.has_class(target, "expand"))
          this.unfold(target);
        else
          this.fold(target);
      }
      else
      {
        this.add_class(target, "nofold");
        target.visible = true;
        target.foldable = false;
      }
    }
  },

  foldable: function (item) {
    if (!item || item.nodeType != 1)
      return false;

    var node = item.firstChild;

    while (node)
    {
      if (node.nodeType == 1 && this.is_block(node))
        return true;

      node = node.nextSibling;
    }

    return false;
  },

  // ### CHECK ME ### switch to add/remove "hidden" class
  fold: function (item) {
    if (item)
    {
      this.remove_class(item, "unfolded");
      this.add_class(item, "folded");
    }

    var node = item ? item.firstChild : null;

    while (node)
    {
      if (node.nodeType == 1 && this.is_block(node)) // element
      {
         w3c_slidy.add_class(node, "hidden");
      }

      node = node.nextSibling;
    }

    item.visible = false;
  },

  // ### CHECK ME ### switch to add/remove "hidden" class
  unfold: function (item) {
    if (item)
    {
      this.add_class(item, "unfolded");
      this.remove_class(item, "folded");
    }

    var node = item ? item.firstChild : null;

    while (node)
    {
      if (node.nodeType == 1 && this.is_block(node)) // element
      {
        w3c_slidy.remove_class(node, "hidden");
      }

      node = node.nextSibling;
    }

    item.visible = true;
  },

  outline_click: function (e) {
    if (!e)
      e = window.event;

    var rightclick = false;
    var target = w3c_slidy.get_target(e);

    while (target && target.visible == undefined)
      target = target.parentNode;

    if (!target)
      return true;

    if (e.which)
      rightclick = (e.which == 3);
    else if (e.button)
      rightclick = (e.button == 2);

    if (!rightclick && target.visible != undefined)
    {
      if (target.foldable)
      {
        if (target.visible)
          w3c_slidy.fold(target);
        else
          w3c_slidy.unfold(target);
      }

      w3c_slidy.stop_propagation(e);
      e.cancel = true;
      e.returnValue = false;
    }

    return false;
  },

  add_initial_prompt: function () {
    var prompt = this.create_element("div");
    prompt.setAttribute("class", "initial_prompt");

    var p1 = this.create_element("p");
    prompt.appendChild(p1);
    p1.setAttribute("class", "help");

    if (this.keyboardless)
      p1.innerHTML = "Tap footer to move to next slide";
    else
      p1.innerHTML = "Space or Right Arrow to move to next " +
                     "slide, click help below for more details";

    this.add_listener(prompt, "click", function (e) {
      document.body.removeChild(prompt);
      w3c_slidy.stop_propagation(e);

      if (e.cancel != undefined)
        e.cancel = true;

      if (e.returnValue != undefined)
        e.returnValue = false;

      return false;
    });

    document.body.appendChild(prompt);
    this.initial_prompt = prompt;
    setTimeout(function() {document.body.removeChild(prompt);}, 5000);
  },

  add_toolbar: function () {
    var counter, page;

     this.toolbar = this.create_element("div");
     this.toolbar.setAttribute("class", "toolbar");

     // a reasonably behaved browser
     if (this.ns_pos || !this.ie6)
     {
       var right = this.create_element("div");
       right.setAttribute("style", "float: right; text-align: right");

       counter = this.create_element("span")
       counter.innerHTML = "slide".localize() + " n/m";
       right.appendChild(counter);
       this.toolbar.appendChild(right);

       var left = this.create_element("div");
       left.setAttribute("style", "text-align: left");

       // global end of slide indicator
       this.eos = this.create_element("span");
       this.eos.innerHTML = "* ";
       left.appendChild(this.eos);

       var help = this.create_element("a");
       help.setAttribute("href", this.help_page);
       help.setAttribute("title", this.help_text.localize());
       help.innerHTML = "help?".localize();
       left.appendChild(help);
       this.help_anchor = help;  // save for focus hack

       var gap1 = document.createTextNode(" ");
       left.appendChild(gap1);

       var contents = this.create_element("a");
       contents.setAttribute("href", "javascript:w3c_slidy.toggle_table_of_contents()");
       contents.setAttribute("title", "table of contents".localize());
       contents.innerHTML = "contents?".localize();
       left.appendChild(contents);

       var gap2 = document.createTextNode(" ");
       left.appendChild(gap2);

       var copyright = this.find_copyright();

       if (copyright)
       {
         var span = this.create_element("span");
         span.className = "copyright";
         span.innerHTML = copyright;
         left.appendChild(span);
       }

       this.toolbar.setAttribute("tabindex", "0");
       this.toolbar.appendChild(left);
     }
     else // IE6 so need to work around its poor CSS support
     {
       this.toolbar.style.position = (this.ie7 ? "fixed" : "absolute");
       this.toolbar.style.zIndex = "200";
       this.toolbar.style.width = "99.9%";
       this.toolbar.style.height = "1.2em";
       this.toolbar.style.top = "auto";
       this.toolbar.style.bottom = "0";
       this.toolbar.style.left = "0";
       this.toolbar.style.right = "0";
       this.toolbar.style.textAlign = "left";
       this.toolbar.style.fontSize = "60%";
       this.toolbar.style.color = "red";
       this.toolbar.borderWidth = 0;
       this.toolbar.className = "toolbar";
       this.toolbar.style.background = "rgb(240,240,240)";

       // would like to have help text left aligned
       // and page counter right aligned, floating
       // div's don't work, so instead use nested
       // absolutely positioned div's.

       var sp = this.create_element("span");
       sp.innerHTML = "&nbsp;&nbsp;*&nbsp;";
       this.toolbar.appendChild(sp);
       this.eos = sp;  // end of slide indicator

       var help = this.create_element("a");
       help.setAttribute("href", this.help_page);
       help.setAttribute("title", this.help_text.localize());
       help.innerHTML = "help?".localize();
       this.toolbar.appendChild(help);
       this.help_anchor = help;  // save for focus hack

       var gap1 = document.createTextNode(" ");
       this.toolbar.appendChild(gap1);

       var contents = this.create_element("a");
       contents.setAttribute("href", "javascript:toggleTableOfContents()");
       contents.setAttribute("title", "table of contents".localize());
       contents.innerHTML = "contents?".localize();
       this.toolbar.appendChild(contents);

       var gap2 = document.createTextNode(" ");
       this.toolbar.appendChild(gap2);

       var copyright = this.find_copyright();

       if (copyright)
       {
         var span = this.create_element("span");
         span.innerHTML = copyright;
         span.style.color = "black";
         span.style.marginLeft = "0.5em";
         this.toolbar.appendChild(span);
       }

       counter = this.create_element("div")
       counter.style.position = "absolute";
       counter.style.width = "auto"; //"20%";
       counter.style.height = "1.2em";
       counter.style.top = "auto";
       counter.style.bottom = 0;
       counter.style.right = "0";
       counter.style.textAlign = "right";
       counter.style.color = "red";
       counter.style.background = "rgb(240,240,240)";

       counter.innerHTML = "slide".localize() + " n/m";
       this.toolbar.appendChild(counter);
     }

     // ensure that click isn't passed through to the page
     this.toolbar.onclick =
         function (e) {
           if (!e)
             e = window.event;

           var target = e.target;

           if (!target && e.srcElement)
             target = e.srcElement;

           // work around Safari bug
           if (target && target.nodeType == 3)
             target = target.parentNode;

           w3c_slidy.stop_propagation(e);

           if (target && target.nodeName.toLowerCase() != "a")
             w3c_slidy.mouse_button_click(e);
         };

     this.slide_number_element = counter;
     this.set_eos_status(false);
     document.body.appendChild(this.toolbar);
  },

  // wysiwyg editors make it hard to use div elements
  // e.g. amaya loses the div when you copy and paste
  // this function wraps div elements around implicit
  // slides which start with an h1 element and continue
  // up to the next heading or div element
  wrap_implicit_slides: function () {
    var i, heading, node, next, div;
    var headings = document.getElementsByTagName("h1");

    if (!headings)
      return;

    for (i = 0; i < headings.length; ++i)
    {
      heading = headings[i];

      if (heading.parentNode != document.body)
        continue;

      node = heading.nextSibling;

      div = document.createElement("div");
      this.add_class(div, "slide");
      document.body.replaceChild(div, heading);
      div.appendChild(heading);

      while (node)
      {
        if (node.nodeType == 1 &&    // an element
             (node.nodeName == "H1" ||
              node.nodeName == "h1" ||
              node.nodeName == "DIV" ||
              node.nodeName == "div"))
          break;

        next = node.nextSibling;
        node = document.body.removeChild(node);
        div.appendChild(node);
        node = next;
      }
    }
  },

// return new array of all slides
  collect_slides: function () {
    var slides = new Array();
    var divs = document.body.getElementsByTagName("div");

    for (var i = 0; i < divs.length; ++i)
    {
      div = divs.item(i);

      if (this.has_class(div, "slide"))
      {
        // add slide to collection
        slides[slides.length] = div;

        // hide each slide as it is found
        this.add_class(div, "hidden");

        // add dummy <br/> at end for scrolling hack
        var node1 = document.createElement("br");
        div.appendChild(node1);
        var node2 = document.createElement("br");
        div.appendChild(node2);
      }
      else if (this.has_class(div, "background"))
      {  // work around for Firefox SVG reload bug
        // which otherwise replaces 1st SVG graphic with 2nd
        div.style.display = "block";
      }
    }

    this.slides = slides;
  },

  // return new array of all <div class="handout">
  collect_notes: function () {
    var notes = new Array();
    var divs = document.body.getElementsByTagName("div");

    for (var i = 0; i < divs.length; ++i)
    {
      div = divs.item(i);

      if (this.has_class(div, "handout"))
      {
        // add note to collection
        notes[notes.length] = div;

        // and hide it
        this.add_class(div, "hidden");
      }
    }

    this.notes = notes;
  },

  // return new array of all <div class="background">
  // including named backgrounds e.g. class="background titlepage"
  collect_backgrounds: function () {
    var backgrounds = new Array();
    var divs = document.body.getElementsByTagName("div");

    for (var i = 0; i < divs.length; ++i)
    {
      div = divs.item(i);

      if (this.has_class(div, "background"))
      {
        // add background to collection
        backgrounds[backgrounds.length] = div;

        // and hide it
        this.add_class(div, "hidden");
      }
    }

    this.backgrounds = backgrounds;
  },

  // set click handlers on all anchors
  patch_anchors: function () {
    var self = w3c_slidy;
    var handler = function (event) {
      // compare this.href with location.href
      // for link to another slide in this doc

      if (self.page_address(this.href) == self.page_address(location.href))
      {
        // yes, so find new slide number
        var newslidenum = self.find_slide_number(this.href);

        if (newslidenum != self.slide_number)
        {
          var slide = self.slides[self.slide_number];
          self.hide_slide(slide);
          self.slide_number = newslidenum;
          slide = self.slides[self.slide_number];
          self.show_slide(slide);
          self.set_location();
        }
      }
      else if (this.target == null)
        location.href = this.href;

      this.blur();
      self.disable_slide_click = true;
    };

    var anchors = document.body.getElementsByTagName("a");

    for (var i = 0; i < anchors.length; ++i)
    {
      if (window.addEventListener)
        anchors[i].addEventListener("click", handler, false);
      else
        anchors[i].attachEvent("onclick", handler);
    }
  },

  // ### CHECK ME ### see which functions are invoked via setTimeout
  // either directly or indirectly for use of w3c_slidy vs this
  show_slide_number: function () {
    var timer = w3c_slidy.get_timer();
    w3c_slidy.slide_number_element.innerHTML = timer + "slide".localize() + " " +
           (w3c_slidy.slide_number + 1) + "/" + w3c_slidy.slides.length;
  },

  // every 200mS check if the location has been changed as a
  // result of the user activating the Back button/menu item
  // doesn't work for Opera < 9.5
  check_location: function () {
    var hash = location.hash;

    if (w3c_slidy.slide_number > 0 && (hash == "" || hash == "#"))
      w3c_slidy.goto_slide(0);
    else if (hash.length > 2 && hash != "#("+(w3c_slidy.slide_number+1)+")")
    {
      var num = parseInt(location.hash.substr(2));

      if (!isNaN(num))
        w3c_slidy.goto_slide(num-1);
    }

    if (w3c_slidy.time_left && w3c_slidy.slide_number > 0)
    {
      w3c_slidy.show_slide_number();

      if (w3c_slidy.time_left > 0)
        w3c_slidy.time_left -= 200;
    }
  },

  get_timer: function () {
    var timer = "";
    if (w3c_slidy.time_left)
    {
      var mins, secs;
      secs = Math.floor(w3c_slidy.time_left/1000);
      mins = Math.floor(secs / 60);
      secs = secs % 60;
      timer = (mins ? mins+"m" : "") + secs + "s ";
    }

    return timer;
  },

  // this doesn't push location onto history stack for IE
  // for which a hidden iframe hack is needed: load page into
  // the iframe with script that set's parent's location.hash
  // but that won't work for standalone use unless we can
  // create the page dynamically via a javascript: URL
  set_location: function () {
     var uri = w3c_slidy.page_address(location.href);
     var hash = "#(" + (w3c_slidy.slide_number+1) + ")";

     if (w3c_slidy.slide_number >= 0)
       uri = uri + hash;

     if (w3c_slidy.ie && !w3c_slidy.ie8)
       w3c_slidy.push_hash(hash);

     if (uri != location.href) // && !khtml
        location.href = uri;

     if (this.khtml)
        hash = "(" + (w3c_slidy.slide_number+1) + ")";

     if (!this.ie && location.hash != hash && location.hash != "")
       location.hash = hash;

     document.title = w3c_slidy.title + " (" + (w3c_slidy.slide_number+1) + ")";
     w3c_slidy.show_slide_number();
  },

  page_address: function (uri) {
    var i = uri.indexOf("#");

    if (i < 0)
      i = uri.indexOf("%23");

    // check if anchor is entire page

    if (i < 0)
      return uri;  // yes

    return uri.substr(0, i);
  },

  // only used for IE6 and IE7
  on_frame_loaded: function (hash) {
    location.hash = hash;
    var uri = w3c_slidy.page_address(location.href);
    location.href = uri + hash;
  },

  // history hack with thanks to Bertrand Le Roy
  push_hash: function (hash) {
    if (hash == "") hash = "#(1)";
      window.location.hash = hash;

    var doc = document.getElementById("historyFrame").contentWindow.document;
    doc.open("javascript:'<html></html>'");
    // PWL modified this string literal to break the close script tag
    // which otherwise gets parsed when incorporated
    doc.write("<html><head><script type=\"text/javascript\">window.parent.w3c_slidy.on_frame_loaded('"+
      (hash) + "');</" + "script></head><body>hello mum</body></html>");
    doc.close();
    },

  // find current slide based upon location
  // first find target anchor and then look
  // for associated div element enclosing it
  // finally map that to slide number
  find_slide_number: function (uri) {
    // first get anchor from page location

    var i = uri.indexOf("#");

    // check if anchor is entire page
    if (i < 0)
      return 0;  // yes

    var anchor = unescape(uri.substr(i+1));

    // now use anchor as XML ID to find target
    var target = document.getElementById(anchor);

    if (!target)
    {
      // does anchor look like "(2)" for slide 2 ??
      // where first slide is (1)
      var re = /\((\d)+\)/;

      if (anchor.match(re))
      {
        var num = parseInt(anchor.substring(1, anchor.length-1));

        if (num > this.slides.length)
          num = 1;

        if (--num < 0)
          num = 0;

        return num;
      }

      // accept [2] for backwards compatibility
      re = /\[(\d)+\]/;

      if (anchor.match(re))
      {
         var num = parseInt(anchor.substring(1, anchor.length-1));

         if (num > this.slides.length)
            num = 1;

         if (--num < 0)
            num = 0;

         return num;
      }

      // oh dear unknown anchor
      return 0;
    }

    // search for enclosing slide

    while (true)
    {
      // browser coerces html elements to uppercase!
      if (target.nodeName.toLowerCase() == "div" &&
            this.has_class(target, "slide"))
      {
        // found the slide element
        break;
      }

      // otherwise try parent element if any

      target = target.parentNode;

      if (!target)
      {
        return 0;   // no luck!
      }
    };

    for (i = 0; i < slides.length; ++i)
    {
      if (slides[i] == target)
        return i;  // success
    }

    // oh dear still no luck
    return 0;
  },

  previous_slide: function (incremental) {
    if (!w3c_slidy.view_all)
    {
      var slide;

      if ((incremental || w3c_slidy.slide_number == 0) && w3c_slidy.last_shown != null)
      {
        w3c_slidy.last_shown = w3c_slidy.hide_previous_item(w3c_slidy.last_shown);
        w3c_slidy.set_eos_status(false);
      }
      else if (w3c_slidy.slide_number > 0)
      {
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.hide_slide(slide);

        w3c_slidy.slide_number = w3c_slidy.slide_number - 1;
        slide = w3c_slidy.slides[w3c_slidy.slide_number];
        w3c_slidy.set_visibility_all_incremental("visible");
        w3c_slidy.last_shown = w3c_slidy.previous_incremental_item(null);
        w3c_slidy.set_eos_status(true);
        w3c_slidy.show_slide(slide);
      }

      w3c_slidy.set_location();

      if (!w3c_slidy.ns_pos)
        w3c_slidy.refresh_toolbar(200);
    }
  },

  next_slide: function (incremental) {
    if (!w3c_slidy.view_all)
    {
      var slide, last = w3c_slidy.last_shown;

      if (incremental || w3c_slidy.slide_number == w3c_slidy.slides.length - 1)
         w3c_slidy.last_shown = w3c_slidy.reveal_next_item(w3c_slidy.last_shown);

      if ((!incremental || w3c_slidy.last_shown == null) &&
             w3c_slidy.slide_number < w3c_slidy.slides.length - 1)
      {
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);

         w3c_slidy.slide_number = w3c_slidy.slide_number + 1;
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.last_shown = null;
         w3c_slidy.set_visibility_all_incremental("hidden");
         w3c_slidy.show_slide(slide);
      }
      else if (!w3c_slidy.last_shown)
      {
         if (last && incremental)
           w3c_slidy.last_shown = last;
      }

      w3c_slidy.set_location();

      w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));

      if (!w3c_slidy.ns_pos)
         w3c_slidy.refresh_toolbar(200);
     }
  },

  // to first slide with nothing revealed
  // i.e. state at start of presentation
  first_slide: function () {
     if (!w3c_slidy.view_all)
     {
       var slide;

       if (w3c_slidy.slide_number != 0)
       {
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);

         w3c_slidy.slide_number = 0;
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.last_shown = null;
         w3c_slidy.set_visibility_all_incremental("hidden");
         w3c_slidy.show_slide(slide);
       }

       w3c_slidy.set_eos_status(
         !w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
       w3c_slidy.set_location();
     }
  },

  // goto last slide with everything revealed
  // i.e. state at end of presentation
  last_slide: function () {
    if (!w3c_slidy.view_all)
    {
      var slide;

      w3c_slidy.last_shown = null; //revealNextItem(lastShown);

      if (w3c_slidy.last_shown == null &&
          w3c_slidy.slide_number < w3c_slidy.slides.length - 1)
      {
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);
         w3c_slidy.slide_number = w3c_slidy.slides.length - 1;
         slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.set_visibility_all_incremental("visible");
         w3c_slidy.last_shown = w3c_slidy.previous_incremental_item(null);

         w3c_slidy.show_slide(slide);
      }
      else
      {
         w3c_slidy.set_visibility_all_incremental("visible");
         w3c_slidy.last_shown = w3c_slidy.previous_incremental_item(null);
      }

      w3c_slidy.set_eos_status(true);
      w3c_slidy.set_location();
    }
  },


  // ### check this and consider add/remove class
  set_eos_status: function (state) {
    if (this.eos)
      this.eos.style.color = (state ? "rgb(240,240,240)" : "red");
  },

  // first slide is 0
  goto_slide: function (num) {
    //alert("going to slide " + (num+1));
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.hide_slide(slide);
    w3c_slidy.slide_number = num;
    slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.last_shown = null;
    w3c_slidy.set_visibility_all_incremental("hidden");
    w3c_slidy.set_eos_status(!w3c_slidy.next_incremental_item(w3c_slidy.last_shown));
    document.title = w3c_slidy.title + " (" + (w3c_slidy.slide_number+1) + ")";
    w3c_slidy.show_slide(slide);
    w3c_slidy.show_slide_number();
  },


  show_slide: function (slide) {
    this.sync_background(slide);
    window.scrollTo(0,0);
    this.remove_class(slide, "hidden");
  },

  hide_slide: function (slide) {
    this.add_class(slide, "hidden");
  },

  // show just the backgrounds pertinent to this slide
  // when slide background-color is transparent
  // this should now work with rgba color values
  sync_background: function (slide) {
    var background;
    var bgColor;

    if (slide.currentStyle)
      bgColor = slide.currentStyle["backgroundColor"];
    else if (document.defaultView)
    {
      var styles = document.defaultView.getComputedStyle(slide,null);

      if (styles)
        bgColor = styles.getPropertyValue("background-color");
      else // broken implementation probably due Safari or Konqueror
      {
        //alert("defective implementation of getComputedStyle()");
        bgColor = "transparent";
      }
    }
    else
      bgColor == "transparent";

    if (bgColor == "transparent" ||
        bgColor.indexOf("rgba") >= 0 ||
        bgColor.indexOf("opacity") >= 0)
    {
      var slideClass = this.get_class_list(slide);

      for (var i = 0; i < this.backgrounds.length; i++)
      {
        background = this.backgrounds[i];

        var bgClass = this.get_class_list(background);

        if (this.matching_background(slideClass, bgClass))
          this.remove_class(background, "hidden");
        else
          this.add_class(background, "hidden");
      }
    }
    else // forcibly hide all backgrounds
      this.hide_backgrounds();
  },

  hide_backgrounds: function () {
    for (var i = 0; i < this.backgrounds.length; i++)
    {
      background = this.backgrounds[i];
      this.add_class(background, "hidden");
    }
  },

  // compare classes for slide and background
  matching_background: function (slideClass, bgClass) {
    var i, count, pattern, result;

    // define pattern as regular expression
    pattern = /\w+/g;

    // check background class names
    result = bgClass.match(pattern);

    for (i = count = 0; i < result.length; i++)
    {
      if (result[i] == "hidden")
        continue;

      if (result[i] == "background")
	continue;

      ++count;
    }

    if (count == 0)  // default match
      return true;

    // check for matches and place result in array
    result = slideClass.match(pattern);

    // now check if desired name is present for background
    for (i = count = 0; i < result.length; i++)
    {
      if (result[i] == "hidden")
        continue;

      if (this.has_token(bgClass, result[i]))
        return true;
    }

    return false;
  },

  resized: function () {
     var width = 0;

     if ( typeof( window.innerWidth ) == 'number' )
       width = window.innerWidth;  // Non IE browser
     else if (document.documentElement && document.documentElement.clientWidth)
       width = document.documentElement.clientWidth;  // IE6
     else if (document.body && document.body.clientWidth)
       width = document.body.clientWidth; // IE4

     var height = 0;

     if ( typeof( window.innerHeight ) == 'number' )
       height = window.innerHeight;  // Non IE browser
     else if (document.documentElement && document.documentElement.clientHeight)
       height = document.documentElement.clientHeight;  // IE6
     else if (document.body && document.body.clientHeight)
       height = document.body.clientHeight; // IE4

     if (height && (width/height > 1.05*1024/768))
     {
       width = height * 1024.0/768;
     }

     // IE fires onresize even when only font size is changed!
     // so we do a check to avoid blocking < and > actions
     if (width != w3c_slidy.last_width || height != w3c_slidy.last_height)
     {
       if (width >= 1100)
         w3c_slidy.size_index = 5;    // 4
       else if (width >= 1000)
         w3c_slidy.size_index = 4;    // 3
       else if (width >= 800)
         w3c_slidy.size_index = 3;    // 2
       else if (width >= 600)
         w3c_slidy.size_index = 2;    // 1
       else if (width)
         w3c_slidy.size_index = 0;

       // add in font size adjustment from meta element e.g.
       // <meta name="font-size-adjustment" content="-2" />
       // useful when slides have too much content ;-)

       if (0 <= w3c_slidy.size_index + w3c_slidy.size_adjustment &&
             w3c_slidy.size_index + w3c_slidy.size_adjustment < w3c_slidy.sizes.length)
         w3c_slidy.size_index = w3c_slidy.size_index + w3c_slidy.size_adjustment;

       // enables cross browser use of relative width/height
       // on object elements for use with SVG and Flash media
       w3c_slidy.adjust_object_dimensions(width, height);

       if (document.body.style.fontSize != w3c_slidy.sizes[w3c_slidy.size_index])
       {
         document.body.style.fontSize = w3c_slidy.sizes[w3c_slidy.size_index];
       }

       w3c_slidy.last_width = width;
       w3c_slidy.last_height = height;

       // force reflow to work around Mozilla bug
       if (w3c_slidy.ns_pos)
       {
         var slide = w3c_slidy.slides[w3c_slidy.slide_number];
         w3c_slidy.hide_slide(slide);
         w3c_slidy.show_slide(slide);
       }

       // force correct positioning of toolbar
       w3c_slidy.refresh_toolbar(200);
     }
  },

  scrolled: function () {
    if (w3c_slidy.toolbar && !w3c_slidy.ns_pos && !w3c_slidy.ie7)
    {
      w3c_slidy.hack_offset = w3c_slidy.scroll_x_offset();
      // hide toolbar
      w3c_slidy.toolbar.style.display = "none";

      // make it reappear later
      if (w3c_slidy.scrollhack == 0 && !w3c_slidy.view_all)
      {
        setTimeout(function () {w3c_slidy.show_toolbar(); }, 1000);
        w3c_slidy.scrollhack = 1;
      }
    }
  },

  hide_toolbar: function () {
    w3c_slidy.add_class(w3c_slidy.toolbar, "hidden");
    window.focus();
  },

  // used to ensure IE refreshes toolbar in correct position
  refresh_toolbar: function (interval) {
    if (!w3c_slidy.ns_pos && !w3c_slidy.ie7)
    {
      w3c_slidy.hide_toolbar();
      setTimeout(function () {w3c_slidy.show_toolbar(); }, interval);
    }
  },

  // restores toolbar after short delay
  show_toolbar: function () {
    if (w3c_slidy.want_toolbar)
    {
      w3c_slidy.toolbar.style.display = "block";

      if (!w3c_slidy.ns_pos)
      {
        // adjust position to allow for scrolling
        var xoffset = w3c_slidy.scroll_x_offset();
        w3c_slidy.toolbar.style.left = xoffset;
        w3c_slidy.toolbar.style.right = xoffset;

        // determine vertical scroll offset
        //var yoffset = scrollYOffset();

        // bottom is doc height - window height - scroll offset
        //var bottom = documentHeight() - lastHeight - yoffset

        //if (yoffset > 0 || documentHeight() > lastHeight)
        //   bottom += 16;  // allow for height of scrollbar

        w3c_slidy.toolbar.style.bottom = 0; //bottom;
      }

      w3c_slidy.remove_class(w3c_slidy.toolbar, "hidden");
    }

    w3c_slidy.scrollhack = 0;


    // set the keyboard focus to the help link on the
    // toolbar to ensure that document has the focus
    // IE doesn't always work with window.focus()
    // and this hack has benefit of Enter for help

    try
    {
      if (!w3c_slidy.opera)
        w3c_slidy.help_anchor.focus();
    }
    catch (e)
    {
    }
  },

// invoked via F key
  toggle_toolbar: function () {
    if (!w3c_slidy.view_all)
    {
      if (w3c_slidy.has_class(w3c_slidy.toolbar, "hidden"))
      {
        w3c_slidy.remove_class(w3c_slidy.toolbar, "hidden")
        w3c_slidy.want_toolbar = 1;
      }
      else
      {
        w3c_slidy.add_class(w3c_slidy.toolbar, "hidden")
        w3c_slidy.want_toolbar = 0;
      }
    }
  },

  scroll_x_offset: function () {
    if (window.pageXOffset)
      return self.pageXOffset;

    if (document.documentElement &&
             document.documentElement.scrollLeft)
      return document.documentElement.scrollLeft;

    if (document.body)
      return document.body.scrollLeft;

    return 0;
  },

  scroll_y_offset: function () {
    if (window.pageYOffset)
      return self.pageYOffset;

    if (document.documentElement &&
             document.documentElement.scrollTop)
      return document.documentElement.scrollTop;

    if (document.body)
      return document.body.scrollTop;

    return 0;
  },

  // looking for a way to determine height of slide content
  // the slide itself is set to the height of the window
  optimize_font_size: function () {
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];

    //var dh = documentHeight(); //getDocHeight(document);
    var dh = slide.scrollHeight;
    var wh = getWindowHeight();
    var u = 100 * dh / wh;

    alert("window utilization = " + u + "% (doc "
      + dh + " win " + wh + ")");
  },

  // from document object
  get_doc_height: function (doc) {
    if (!doc)
      doc = document;

    if (doc && doc.body && doc.body.offsetHeight)
      return doc.body.offsetHeight;  // ns/gecko syntax

    if (doc && doc.body && doc.body.scrollHeight)
      return doc.body.scrollHeight;

    alert("couldn't determine document height");
  },

  get_window_height: function () {
    if ( typeof( window.innerHeight ) == 'number' )
      return window.innerHeight;  // Non IE browser

    if (document.documentElement && document.documentElement.clientHeight)
      return document.documentElement.clientHeight;  // IE6

    if (document.body && document.body.clientHeight)
      return document.body.clientHeight; // IE4
  },

  document_height: function () {
    var sh, oh;

    sh = document.body.scrollHeight;
    oh = document.body.offsetHeight;

    if (sh && oh)
    {
      return (sh > oh ? sh : oh);
    }

    // no idea!
    return 0;
  },

  smaller: function () {
    if (w3c_slidy.size_index > 0)
    {
      --w3c_slidy.size_index;
    }

    w3c_slidy.toolbar.style.display = "none";
    document.body.style.fontSize = w3c_slidy.sizes[w3c_slidy.size_index];
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.hide_slide(slide);
    w3c_slidy.show_slide(slide);
    setTimeout(function () {w3c_slidy.show_toolbar(); }, 50);
  },

  bigger: function () {
    if (w3c_slidy.size_index < w3c_slidy.sizes.length - 1)
    {
      ++w3c_slidy.size_index;
    }

    w3c_slidy.toolbar.style.display = "none";
    document.body.style.fontSize = w3c_slidy.sizes[w3c_slidy.size_index];
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];
    w3c_slidy.hide_slide(slide);
    w3c_slidy.show_slide(slide);
    setTimeout(function () {w3c_slidy.show_toolbar(); }, 50);
  },

  // enables cross browser use of relative width/height
  // on object elements for use with SVG and Flash media
  // with thanks to Ivan Herman for the suggestion
  adjust_object_dimensions: function (width, height) {
    for( var i = 0; i < w3c_slidy.objects.length; i++ )
    {
      var obj = this.objects[i];
      var mimeType = obj.getAttribute("type");

      if (mimeType == "image/svg+xml" || mimeType == "application/x-shockwave-flash")
      {
        if ( !obj.initialWidth )
          obj.initialWidth = obj.getAttribute("width");

        if ( !obj.initialHeight )
          obj.initialHeight = obj.getAttribute("height");

        if ( obj.initialWidth && obj.initialWidth.charAt(obj.initialWidth.length-1) == "%" )
        {
          var w = parseInt(obj.initialWidth.slice(0, obj.initialWidth.length-1));
          var newW = width * (w/100.0);
          obj.setAttribute("width",newW);
        }

        if ( obj.initialHeight &&
             obj.initialHeight.charAt(obj.initialHeight.length-1) == "%" )
        {
          var h = parseInt(obj.initialHeight.slice(0, obj.initialHeight.length-1));
          var newH = height * (h/100.0);
          obj.setAttribute("height", newH);
        }
      }
    }
  },

  // needed for Opera to inhibit default behavior
  // since Opera delivers keyPress even if keyDown
  // was cancelled
  key_press: function (event) {
    if (!event)
      event = window.event;

    if (!w3c_slidy.key_wanted)
      return w3c_slidy.cancel(event);

    return true;
  },

  //  See e.g. http://www.quirksmode.org/js/events/keys.html for keycodes
  key_down: function (event) {
    var key;

    w3c_slidy.key_wanted = true;

    if (!event)
      event = window.event;

    // kludge around NS/IE differences
    if (window.event)
      key = window.event.keyCode;
    else if (event.which)
      key = event.which;
    else
      return true; // Yikes! unknown browser

    // ignore event if key value is zero
    // as for alt on Opera and Konqueror
    if (!key)
       return true;

    // check for concurrent control/command/alt key
    // but are these only present on mouse events?

    if (event.ctrlKey || event.altKey || event.metaKey)
       return true;

    // dismiss table of contents if visible
    if (w3c_slidy.is_shown_toc() && key != 9 && key != 16 && key != 38 && key != 40)
    {
      w3c_slidy.hide_table_of_contents();

      if (key == 27 || key == 84 || key == 67)
        return w3c_slidy.cancel(event);
    }

    if (key == 34) // Page Down
    {
      if (w3c_slidy.view_all)
        return true;

      w3c_slidy.next_slide(false);
      return w3c_slidy.cancel(event);
    }
    else if (key == 33) // Page Up
    {
      if (w3c_slidy.view_all)
        return true;

      w3c_slidy.previous_slide(false);
      return w3c_slidy.cancel(event);
    }
    else if (key == 32) // space bar
    {
      w3c_slidy.next_slide(true);
      return w3c_slidy.cancel(event);
    }
    else if (key == 37) // Left arrow
    {
      w3c_slidy.previous_slide(!event.shiftKey);
      return w3c_slidy.cancel(event);
    }
    else if (key == 36) // Home
    {
      w3c_slidy.first_slide();
      return w3c_slidy.cancel(event);
    }
    else if (key == 35) // End
    {
      w3c_slidy.last_slide();
      return w3c_slidy.cancel(event);
    }
    else if (key == 39) // Right arrow
    {
      w3c_slidy.next_slide(!event.shiftKey);
      return w3c_slidy.cancel(event);
    }
    else if (key == 13) // Enter
    {
      if (w3c_slidy.outline)
      {
        if (w3c_slidy.outline.visible)
          w3c_slidy.fold(w3c_slidy.outline);
        else
          w3c_slidy.unfold(w3c_slidy.outline);

       return w3c_slidy.cancel(event);
      }
    }
    else if (key == 188)  // < for smaller fonts
    {
      w3c_slidy.smaller();
      return w3c_slidy.cancel(event);
    }
    else if (key == 190)  // > for larger fonts
    {
      w3c_slidy.bigger();
      return w3c_slidy.cancel(event);
    }
    else if (key == 189 || key == 109)  // - for smaller fonts
    {
      w3c_slidy.smaller();
      return w3c_slidy.cancel(event);
    }
    else if (key == 187 || key == 191 || key == 107)  // = +  for larger fonts
    {
      w3c_slidy.bigger();
      return w3c_slidy.cancel(event);
    }
    else if (key == 83)  // S for smaller fonts
    {
      w3c_slidy.smaller();
      return w3c_slidy.cancel(event);
    }
    else if (key == 66)  // B for larger fonts
    {
      w3c_slidy.bigger();
      return w3c_slidy.cancel(event);
    }
    else if (key == 90)  // Z for last slide
    {
      w3c_slidy.last_slide();
      return w3c_slidy.cancel(event);
    }
    else if (key == 70)  // F for toggle toolbar
    {
      w3c_slidy.toggle_toolbar();
      return w3c_slidy.cancel(event);
    }
    else if (key == 65)  // A for toggle view single/all slides
    {
      w3c_slidy.toggle_view();
      return w3c_slidy.cancel(event);
    }
    else if (key == 75)  // toggle action of left click for next page
    {
      w3c_slidy.mouse_click_enabled = !w3c_slidy.mouse_click_enabled;
      var alert_msg = (w3c_slidy.mouse_click_enabled ?
                "enabled" : "disabled") +  " mouse click advance";

      alert(alert_msg.localize());
      return w3c_slidy.cancel(event);
    }
    else if (key == 84 || key == 67)  // T or C for table of contents
    {
      if (w3c_slidy.toc)
        w3c_slidy.toggle_table_of_contents();

      return w3c_slidy.cancel(event);
    }
    else if (key == 72) // H for help
    {
      window.location = w3c_slidy.help_page;
      return w3c_slidy.cancel(event);
    }
    //else alert("key code is "+ key);

    return true;
  },

  // safe for both text/html and application/xhtml+xml
  create_element: function (name) {
    if (this.xhtml && (typeof document.createElementNS != 'undefined'))
      return document.createElementNS("http://www.w3.org/1999/xhtml", name)

    return document.createElement(name);
  },

  get_element_style: function (elem, IEStyleProp, CSSStyleProp) {
    if (elem.currentStyle)
    {
      return elem.currentStyle[IEStyleProp];
    }
    else if (window.getComputedStyle)
    {
      var compStyle = window.getComputedStyle(elem, "");
      return compStyle.getPropertyValue(CSSStyleProp);
    }
    return "";
  },

  // the string str is a whitespace separated list of tokens
  // test if str contains a particular token, e.g. "slide"
  has_token: function (str, token) {
    if (str)
    {
      // define pattern as regular expression
      var pattern = /\w+/g;

      // check for matches
      // place result in array
      var result = str.match(pattern);

      // now check if desired token is present
      for (var i = 0; i < result.length; i++)
      {
        if (result[i] == token)
          return true;
      }
    }

    return false;
  },

  get_class_list: function (element) {
    if (typeof element.className != 'undefined')
      return element.className;

    return element.getAttribute("class");
  },

  has_class: function (element, name) {
    if (element.nodeType != 1)
      return false;

    var regexp = new RegExp("(^| )" + name + "\W*");

    if (typeof element.className != 'undefined')
      return regexp.test(element.className);

    return regexp.test(element.getAttribute("class"));
  },

  remove_class: function (element, name) {
    var regexp = new RegExp("(^| )" + name + "\W*");
    var clsval = "";

    if (typeof element.className != 'undefined')
    {
      clsval = element.className;

      if (clsval)
      {
        clsval = clsval.replace(regexp, "");
        element.className = clsval;
      }
    }
    else
    {
      clsval = element.getAttribute("class");

      if (clsval)
      {
        clsval = clsval.replace(regexp, "");
        element.setAttribute("class", clsval);
      }
    }
  },

  add_class: function (element, name) {
    if (!this.has_class(element, name))
    {
      if (typeof element.className != 'undefined')
        element.className += " " + name;
      else
      {
        var clsval = element.getAttribute("class");
        clsval = clsval ? clsval + " " + name : name;
        element.setAttribute("class", clsval);
      }
    }
  },

  // HTML elements that can be used with class="incremental"
  // note that you can also put the class on containers like
  // up, ol, dl, and div to make their contents appear
  // incrementally. Upper case is used since this is what
  // browsers report for HTML node names (text/html).
  incremental_elements: null,
  okay_for_incremental: function (name) {
    if (!this.incremental_elements)
    {
      var inclist = new Array();
      inclist["p"] = true;
      inclist["pre"] = true;
      inclist["li"] = true;
      inclist["blockquote"] = true;
      inclist["dt"] = true;
      inclist["dd"] = true;
      inclist["h2"] = true;
      inclist["h3"] = true;
      inclist["h4"] = true;
      inclist["h5"] = true;
      inclist["h6"] = true;
      inclist["span"] = true;
      inclist["address"] = true;
      inclist["table"] = true;
      inclist["tr"] = true;
      inclist["th"] = true;
      inclist["td"] = true;
      inclist["img"] = true;
      inclist["object"] = true;
      this.incremental_elements = inclist;
    }
    return this.incremental_elements[name.toLowerCase()];
  },

  next_incremental_item: function (node) {
    var br = this.is_xhtml ? "br" : "BR";
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];

    for (;;)
    {
      node = w3c_slidy.next_node(slide, node);

      if (node == null || node.parentNode == null)
        break;

      if (node.nodeType == 1)  // ELEMENT
      {
        if (node.nodeName == br)
          continue;

        if (w3c_slidy.has_class(node, "incremental")
             && w3c_slidy.okay_for_incremental(node.nodeName))
          return node;

        if (w3c_slidy.has_class(node.parentNode, "incremental")
             && !w3c_slidy.has_class(node, "non-incremental"))
          return node;
      }
    }

    return node;
  },

  previous_incremental_item: function (node) {
    var br = this.is_xhtml ? "br" : "BR";
    var slide = w3c_slidy.slides[w3c_slidy.slide_number];

    for (;;)
    {
      node = w3c_slidy.previous_node(slide, node);

      if (node == null || node.parentNode == null)
        break;

      if (node.nodeType == 1)
      {
        if (node.nodeName == br)
          continue;

        if (w3c_slidy.has_class(node, "incremental")
             && w3c_slidy.okay_for_incremental(node.nodeName))
          return node;

        if (w3c_slidy.has_class(node.parentNode, "incremental")
             && !w3c_slidy.has_class(node, "non-incremental"))
          return node;
      }
    }

    return node;
  },

  // set visibility for all elements on current slide with
  // a parent element with attribute class="incremental"
  set_visibility_all_incremental: function (value) {
    var node = this.next_incremental_item(null);

    if (value == "hidden")
    {
      while (node)
      {
        w3c_slidy.add_class(node, "invisible");
        node = w3c_slidy.next_incremental_item(node);
      }
    }
    else // value == "visible"
    {
      while (node)
      {
        w3c_slidy.remove_class(node, "invisible");
        node = w3c_slidy.next_incremental_item(node);
      }
    }
  },

  // reveal the next hidden item on the slide
  // node is null or the node that was last revealed
  reveal_next_item: function (node) {
    node = w3c_slidy.next_incremental_item(node);

    if (node && node.nodeType == 1)  // an element
      w3c_slidy.remove_class(node, "invisible");

    return node;
  },

  // exact inverse of revealNextItem(node)
  hide_previous_item: function (node) {
    if (node && node.nodeType == 1)  // an element
      w3c_slidy.add_class(node, "invisible");

    return this.previous_incremental_item(node);
  },

  // left to right traversal of root's content
  next_node: function (root, node) {
    if (node == null)
      return root.firstChild;

    if (node.firstChild)
      return node.firstChild;

    if (node.nextSibling)
      return node.nextSibling;

    for (;;)
    {
      node = node.parentNode;

      if (!node || node == root)
        break;

      if (node && node.nextSibling)
        return node.nextSibling;
    }

    return null;
  },

  // right to left traversal of root's content
  previous_node: function (root, node) {
    if (node == null)
    {
      node = root.lastChild;

      if (node)
      {
        while (node.lastChild)
          node = node.lastChild;
      }

      return node;
    }

    if (node.previousSibling)
    {
      node = node.previousSibling;

      while (node.lastChild)
        node = node.lastChild;

      return node;
    }

    if (node.parentNode != root)
      return node.parentNode;

    return null;
  },

  previous_sibling_element: function (el) {
    el = el.previousSibling;

    while (el && el.nodeType != 1)
      el = el.previousSibling;

    return el;
  },

  next_sibling_element: function (el) {
    el = el.nextSibling;

    while (el && el.nodeType != 1)
      el = el.nextSibling;

    return el;
  },

  first_child_element: function (el) {
    var node;

    for (node = el.firstChild; node; node = node.nextSibling)
    {
      if (node.nodeType == 1)
        break;
    }

    return node;
  },

  first_tag: function (element, tag) {
    var node;

    if (!this.is_xhtml)
      tag = tag.toUpperCase();

    for (node = element.firstChild; node; node = node.nextSibling)
    {
      if (node.nodeType == 1 && node.nodeName == tag)
        break;
    }

    return node;
  },

  hide_selection: function () {
    if (window.getSelection) // Firefox, Chromium, Safari, Opera
    {
      var selection = window.getSelection();

      if (selection.rangeCount > 0)
      {
        var range = selection.getRangeAt(0);
        range.collapse (false);
      }
    }
    else // Internet Explorer
    {
      var textRange = document.selection.createRange ();
      textRange.collapse (false);
    }
  },

  get_selected_text: function () {
    try
    {
      if (window.getSelection)
        return window.getSelection().toString();

      if (document.getSelection)
        return document.getSelection().toString();

      if (document.selection)
        return document.selection.createRange().text;
    }
    catch (e)
    {
    }

    return "";
  },

  // make note of length of selected text
  // as this evaluates to zero in click event
  mouse_button_up: function (e) {
    w3c_slidy.selected_text_len = w3c_slidy.get_selected_text().length;
  },

  // right mouse button click is reserved for context menus
  // it is more reliable to detect rightclick than leftclick
  mouse_button_click: function (e) {
    var rightclick = false;
    var leftclick = false;
    var middleclick = false;
    var target;

    if (!e)
      var e = window.event;

    if (e.target)
      target = e.target;
    else if (e.srcElement)
      target = e.srcElement;

    // work around Safari bug
    if (target.nodeType == 3)
      target = target.parentNode;

    if (e.which) // all browsers except IE
    {
      leftclick = (e.which == 1);
      middleclick = (e.which == 2);
      rightclick = (e.which == 3);
    }
    else if (e.button)
    {
      // Konqueror gives 1 for left, 4 for middle
      // IE6 gives 0 for left and not 1 as I expected

      if (e.button == 4)
        middleclick = true;

      // all browsers agree on 2 for right button
      rightclick = (e.button == 2);
    }
    else leftclick = true;
/*
    alert("you clicked over a " + target.nodeName + " element\n" +
    "w3c_slidy.mouse_click_enabled = " + w3c_slidy.mouse_click_enabled + "\n" +
    "leftclick = " + leftclick + "\n" +
    "selected text length = " + w3c_slidy.selected_text_len);
    //alert("selected text length = " + w3c_slidy.selected_text_len);
*/
    if (w3c_slidy.selected_text_len > 0)
    {
      w3c_slidy.stop_propagation(e);
      e.cancel = true;
      e.returnValue = false;
      return false;
    }

    // dismiss table of contents
    w3c_slidy.hide_table_of_contents();

    // check if target is something that probably want's clicks
    // e.g. a, embed, object, input, textarea, select, option
    var tag = target.nodeName.toLowerCase();

    if (w3c_slidy.mouse_click_enabled && leftclick &&
        tag != "a" &&
        tag != "embed" &&
        tag != "object" &&
        tag != "video" &&
        tag != "input" &&
        tag != "textarea" &&
        tag != "select" &&
        tag != "option" &&
        !target.onclick)
    {
      w3c_slidy.next_slide(true);
      w3c_slidy.stop_propagation(e);
      e.cancel = true;
      e.returnValue = false;
      return false;
    }
  },

  get_key: function (e)
  {
    var key;

    // kludge around NS/IE differences
    if (typeof window.event != "undefined")
      key = window.event.keyCode;
    else if (e.which)
      key = e.which;

    return key;
  },

  get_target: function (e) {
    var target;

    if (!e)
      e = window.event;

    if (e.target)
      target = e.target;
    else if (e.srcElement)
      target = e.srcElement;

    if (target.nodeType != 1)
      target = target.parentNode;

    return target;
  },

  // does display property provide correct defaults?
  is_block: function (elem) {
    var tag = elem.nodeName.toLowerCase();

    return tag == "ol" || tag == "ul" || tag == "p" ||
           tag == "li" || tag == "table" || tag == "pre" ||
           tag == "h1" || tag == "h2" || tag == "h3" ||
           tag == "h4" || tag == "h5" || tag == "h6" ||
           tag == "blockquote" || tag == "address";
  },

  add_listener: function (element, event, handler) {
    if (window.addEventListener)
      element.addEventListener(event, handler, false);
    else
      element.attachEvent("on"+event, handler);
  },

  // used to prevent event propagation from field controls
  stop_propagation: function (event) {
    event = event ? event : window.event;
    event.cancelBubble = true;  // for IE

    if (event.stopPropagation)
      event.stopPropagation();

    return true;
  },

  cancel: function (event) {
    if (event)
    {
       event.cancel = true;
       event.returnValue = false;

      if (event.preventDefault)
        event.preventDefault();
    }

    w3c_slidy.key_wanted = false;
    return false;
  }
};

// for each language define an associative array
// and also the help text which is longer

var w3c_slidy_i18n = {
  strings_es: {
    "slide":"pág.",
    "help?":"Ayuda",
    "contents?":"Índice",
    "table of contents":"tabla de contenidos",
    "Table of Contents":"Tabla de Contenidos",
    "restart presentation":"Reiniciar presentación",
    "restart?":"Inicio"
  },
  help_es:
    "Utilice el ratón, barra espaciadora, teclas Izda/Dcha, " +
    "o Re pág y Av pág. Use S y B para cambiar el tamaño de fuente.",

  strings_ca: {
    "slide":"pàg..",
    "help?":"Ajuda",
    "contents?":"Índex",
    "table of contents":"taula de continguts",
    "Table of Contents":"Taula de Continguts",
    "restart presentation":"Reiniciar presentació",
    "restart?":"Inici"
  },
  help_ca:
    "Utilitzi el ratolí, barra espaiadora, tecles Esq./Dta. " +
    "o Re pàg y Av pàg. Usi S i B per canviar grandària de font.",

  strings_cs: {
    "slide":"snímek",
    "help?":"nápověda",
    "contents?":"obsah",
    "table of contents":"obsah prezentace",
    "Table of Contents":"Obsah prezentace",
    "restart presentation":"znovu spustit prezentaci",
    "restart?":"restart"
  },
  help_cs:
    "Prezentaci můžete procházet pomocí kliknutí myši, mezerníku, " +
    "šipek vlevo a vpravo nebo kláves PageUp a PageDown. Písmo se " +
    "dá zvětšit a zmenšit pomocí kláves B a S.",

  strings_nl: {
    "slide":"pagina",
    "help?":"Help?",
    "contents?":"Inhoud?",
    "table of contents":"inhoudsopgave",
    "Table of Contents":"Inhoudsopgave",
    "restart presentation":"herstart presentatie",
    "restart?":"Herstart?"
  },
  help_nl:
     "Navigeer d.m.v. het muis, spatiebar, Links/Rechts toetsen, " +
     "of PgUp en PgDn. Gebruik S en B om de karaktergrootte te veranderen.",

  strings_de: {
    "slide":"Seite",
    "help?":"Hilfe",
    "contents?":"Übersicht",
    "table of contents":"Inhaltsverzeichnis",
    "Table of Contents":"Inhaltsverzeichnis",
    "restart presentation":"Präsentation neu starten",
    "restart?":"Neustart"
  },
  help_de:
    "Benutzen Sie die Maus, Leerschlag, die Cursortasten links/rechts oder " +
    "Page up/Page Down zum Wechseln der Seiten und S und B für die Schriftgrösse.",

  strings_pl: {
    "slide":"slajd",
    "help?":"pomoc?",
    "contents?":"spis treści?",
    "table of contents":"spis treści",
    "Table of Contents":"Spis Treści",
    "restart presentation":"Restartuj prezentację",
    "restart?":"restart?"
  },
  help_pl:
    "Zmieniaj slajdy klikając myszą, naciskając spację, strzałki lewo/prawo" +
    "lub PgUp / PgDn. Użyj klawiszy S i B, aby zmienić rozmiar czczionki.",

  strings_fr: {
    "slide":"page",
    "help?":"Aide",
    "contents?":"Index",
    "table of contents":"table des matières",
    "Table of Contents":"Table des matières",
    "restart presentation":"Recommencer l'exposé",
    "restart?":"Début"
  },
  help_fr:
    "Naviguez avec la souris, la barre d'espace, les flèches " +
    "gauche/droite ou les touches Pg Up, Pg Dn. Utilisez " +
    "les touches S et B pour modifier la taille de la police.",

  strings_hu: {
    "slide":"oldal",
    "help?":"segítség",
    "contents?":"tartalom",
    "table of contents":"tartalomjegyzék",
    "Table of Contents":"Tartalomjegyzék",
    "restart presentation":"bemutató újraindítása",
    "restart?":"újraindítás"
  },
  help_hu:
    "Az oldalak közti lépkedéshez kattintson az egérrel, vagy " +
    "használja a szóköz, a bal, vagy a jobb nyíl, illetve a Page Down, " +
    "Page Up billentyűket. Az S és a B billentyűkkel változtathatja " +
    "a szöveg méretét.",

  strings_it: {
    "slide":"pag.",
    "help?":"Aiuto",
    "contents?":"Indice",
    "table of contents":"indice",
    "Table of Contents":"Indice",
    "restart presentation":"Ricominciare la presentazione",
    "restart?":"Inizio"
  },
  help_it:
    "Navigare con mouse, barra spazio, frecce sinistra/destra o " +
    "PgUp e PgDn. Usare S e B per cambiare la dimensione dei caratteri.",

  strings_el: {
    "slide":"σελίδα",
    "help?":"βοήθεια;",
    "contents?":"περιεχόμενα;",
    "table of contents":"πίνακας περιεχομένων",
    "Table of Contents":"Πίνακας Περιεχομένων",
    "restart presentation":"επανεκκίνηση παρουσίασης",
    "restart?":"επανεκκίνηση;"
  },
  help_el:
    "Πλοηγηθείτε με το κλίκ του ποντικιού, το space, τα βέλη αριστερά/δεξιά, " +
    "ή Page Up και Page Down. Χρησιμοποιήστε τα πλήκτρα S και B για να αλλάξετε " +
    "το μέγεθος της γραμματοσειράς.",

  strings_ja: {
    "slide":"スライド",
    "help?":"ヘルプ",
    "contents?":"目次",
    "table of contents":"目次を表示",
    "Table of Contents":"目次",
    "restart presentation":"最初から再生",
    "restart?":"最初から"
  },
  help_ja:
     "マウス左クリック ・ スペース ・ 左右キー " +
     "または Page Up ・ Page Downで操作， S ・ Bでフォントサイズ変更",

  strings_zh: {
    "slide":"幻灯片",
    "help?":"帮助?",
    "contents?":"内容?",
    "table of contents":"目录",
    "Table of Contents":"目录",
    "restart presentation":"重新启动展示",
    "restart?":"重新启动?"
  },
  help_zh:
    "用鼠标点击, 空格条, 左右箭头, Pg Up 和 Pg Dn 导航. " +
    "用 S, B 改变字体大小.",

  strings_ru: {
    "slide":"слайд",
    "help?":"помощь?",
    "contents?":"содержание?",
    "table of contents":"оглавление",
    "Table of Contents":"Оглавление",
    "restart presentation":"перезапустить презентацию",
    "restart?":"перезапуск?"
  },
  help_ru:
    "Перемещайтесь кликая мышкой, используя клавишу пробел, стрелки" +
    "влево/вправо или Pg Up и Pg Dn. Клавиши S и B меняют размер шрифта.",

  strings_sv: {
    "slide":"sida",
    "help?":"hjälp",
    "contents?":"innehåll",
    "table of contents":"innehållsförteckning",
    "Table of Contents":"Innehållsförteckning",
    "restart presentation":"visa presentationen från början",
    "restart?":"börja om"
  },
  help_sv:
    "Bläddra med ett klick med vänstra musknappen, mellanslagstangenten, " +
    "vänster- och högerpiltangenterna eller tangenterna Pg Up, Pg Dn. " +
    "Använd tangenterna S och B för att ändra textens storlek.",

// each such language array is declared in the localize array
// which is set on string prototype and used as in "foo".localize();
  localize: {
    "es":this.strings_es,
    "ca":this.strings_ca,
    "cs":this.strings_cs,
    "nl":this.strings_nl,
    "de":this.strings_de,
    "pl":this.strings_pl,
    "fr":this.strings_fr,
    "hu":this.strings_hu,
    "it":this.strings_it,
    "el":this.strings_el,
    "jp":this.strings_ja,
    "zh":this.strings_zh,
    "ru":this.strings_ru,
    "sv":this.strings_sv
  },

  init: function () {
    var i18n = w3c_slidy_i18n;
    var help_text = w3c_slidy.help_text;
    i18n.strings_es[help_text] = i18n.help_es;
    i18n.strings_ca[help_text] = i18n.help_ca;
    i18n.strings_cs[help_text] = i18n.help_cs;
    i18n.strings_nl[help_text] = i18n.help_nl;
    i18n.strings_de[help_text] = i18n.help_de;
    i18n.strings_pl[help_text] = i18n.help_pl;
    i18n.strings_fr[help_text] = i18n.help_fr;
    i18n.strings_hu[help_text] = i18n.help_hu;
    i18n.strings_it[help_text] = i18n.help_it;
    i18n.strings_el[help_text] = i18n.help_el;
    i18n.strings_ja[help_text] = i18n.help_ja;
    i18n.strings_zh[help_text] = i18n.help_zh;
    i18n.strings_ru[help_text] = i18n.help_ru;
    i18n.strings_sv[help_text] = i18n.help_sv;

    w3c_slidy.lang = document.body.parentNode.getAttribute("lang");

    if (!w3c_slidy.lang)
      w3c_slidy.lang = document.body.parentNode.getAttribute("xml:lang");

    if (!w3c_slidy.lang)
      w3c_slidy.lang = "en";

    // add localize method to all strings
    // for use as in "contents".localize()
   String.prototype.localize = function() {
     if (this == "")
       return this;

     // try full language code, e.g. en-US
     var s, lookup = w3c_slidy_i18n.localize[w3c_slidy.lang];

     if (lookup)
     {
       s = lookup[this];

       if (s)
        return s;
     }

     // strip country code suffix, e.g.
     // try en if undefined for en-US
     var lg = w3c_slidy.lang.split("-");

     if (lg.length > 1)
     {
       lookup = w3c_slidy_i18n.localize[lg[0]];

       if (lookup)
       {
         s = lookup[this];

         if (s)
          return s;
       }
     }

     // otherwise string as is
     return this;
   };
  }
};

// hack for back button behavior
if (w3c_slidy.ie6 || w3c_slidy.ie7)
{
  document.write("<iframe id='historyFrame' " +
  "src='javascript:\"<html"+"></"+"html>\"' " +
  "height='1' width='1' " +
  "style='position:absolute;left:-800px'></iframe>");
}

// attach event listeners for initialization
w3c_slidy.set_up();

// hide the slides as soon as body element is available
// to reduce annoying screen mess before the onload event
setTimeout(w3c_slidy.hide_slides, 50);

/*]]>*/
</script>
</head>
<body class="article">
<div id="header" class="slide">
<h1>Master programming. <br> Лекция №10 (Паттерны проектирования)</h1>
<span id="author">Игорь Шаронов</span><br />
<span id="revdate">2021-11-02</span>
</div>
</div></div>
<div class="sect1 slide">
<h1 id="_история_и_классификация_паттернов_проектирования">1. История и классификация паттернов проектирования</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_что_такое_паттерн_проектирования">1.1. Что такое паттерн проектирования?</h1>

<div class="sectionbody">
<ul class="">
<li>
<span>
Часто встречающееся решение определённой проблемы при проектировании архитектуры программ
</span>
</li>
<li>
<span>
Способы организации взаимодействия данных (отличие от алгоритма)
</span>
</li>
<li>
<span>
Пример самого распространённого паттерна (идиома)&#8201;&#8212;&#8201;ООП
</span>
</li>
<li>
<span>
Идея пришла от дизайнера городов (1977г.)
</span>
</li>
<li>
<span>
1995г.&#8201;&#8212;&#8201;GOF book
</span>
</li>
<li>
<span>
Проверенные решения проектирования
</span>
</li>
<li>
<span>
Словарь для общения
</span>
</li>
</ul>
</div></div>
<div class="sect2 slide">
<h1 id="_классификация_паттернов">1.2. Классификация паттернов</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="33%" />
<col width="33%" />
<thead>
<tr>
<th align="left" valign="top"> Порождающие </th>
<th align="left" valign="top"> Структурные </th>
<th align="left" valign="top"> Поведенческие</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Factory method
</span>
</li>
<li>
<span>
Abstract factory
</span>
</li>
<li>
<span>
Builder
</span>
</li>
<li>
<span>
Prototype
</span>
</li>
<li>
<span>
Singleton
</span>
</li>
</ul></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Adapter
</span>
</li>
<li>
<span>
Bridge
</span>
</li>
<li>
<span>
Composite
</span>
</li>
<li>
<span>
Decorator
</span>
</li>
<li>
<span>
Facade
</span>
</li>
<li>
<span>
Flyweight
</span>
</li>
<li>
<span>
Proxy
</span>
</li>
</ul></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Chain of responsibility
</span>
</li>
<li>
<span>
Command
</span>
</li>
<li>
<span>
Iterator
</span>
</li>
<li>
<span>
Mediator
</span>
</li>
<li>
<span>
Memento
</span>
</li>
<li>
<span>
Observer
</span>
</li>
<li>
<span>
State
</span>
</li>
<li>
<span>
Strategy
</span>
</li>
<li>
<span>
Template method
</span>
</li>
<li>
<span>
Visitor
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>Источник: <a href="https://refactoring.guru/ru">https://refactoring.guru/ru</a></p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_обозначения_uml">1.3. Обозначения UML</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="50%" />
<col width="50%" />
<tbody>
<tr>
<td align="left" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 9.0.0 (0)
 -->
<!-- Pages: 1 -->
<svg width="761pt" height="580pt"
 viewBox="0.00 0.00 761.12 580.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 576)">
<polygon fill="white" stroke="none" points="-4,4 -4,-576 757.12,-576 757.12,4 -4,4"/>
<!-- Class -->
<g id="node1" class="node">
<title>Class</title>
<text text-anchor="start" x="36.88" y="-548" font-family="Times,serif" font-size="20.00">(C) Имя класса &lt;шаблонный_тип&gt;</text>
<text text-anchor="start" x="5" y="-518" font-family="Times,serif" font-size="20.00">+ открытая_переменная: тип</text>
<text text-anchor="start" x="5" y="-488" font-family="Times,serif" font-size="20.00">&#45; закрытая_переменная</text>
<text text-anchor="start" x="5" y="-458" font-family="Times,serif" font-size="20.00"># защищённая_переменная</text>
<text text-anchor="start" x="5" y="-428" font-family="Times,serif" font-size="20.00">$ статичная_переменная</text>
<text text-anchor="start" x="5" y="-398" font-family="Times,serif" font-size="20.00">+ открытый_метод(): возвращаемый_тип</text>
<text text-anchor="start" x="5" y="-368" font-family="Times,serif" font-size="20.00">&#45; закрытый_метод()</text>
<text text-anchor="start" x="5" y="-338" font-family="Times,serif" font-size="20.00"># защищённый_метод()</text>
<text text-anchor="start" x="5" y="-308" font-family="Times,serif" font-size="20.00">$ статичный_метод()</text>
<polygon fill="black" stroke="black" points="0,-540 0,-540 444.25,-540 444.25,-540 0,-540"/>
<polygon fill="black" stroke="black" points="0,-420 0,-420 444.25,-420 444.25,-420 0,-420"/>
<polygon fill="none" stroke="black" points="0,-298 0,-572 444.25,-572 444.25,-298 0,-298"/>
</g>
<!-- Interface -->
<g id="node2" class="node">
<title>Interface</title>
<text text-anchor="start" x="547.88" y="-488" font-family="Times,serif" font-size="20.00">(I) Интерфейс</text>
<text text-anchor="start" x="496.12" y="-458" font-family="Times,serif" font-size="20.00">+ метод1()</text>
<text text-anchor="start" x="496.12" y="-428" font-family="Times,serif" font-size="20.00">+ метод2()</text>
<text text-anchor="start" x="496.12" y="-398" font-family="Times,serif" font-size="20.00">метод3()</text>
<text text-anchor="start" x="496.12" y="-368" font-family="Times,serif" font-size="20.00">@ абстрактный_метод()</text>
<polygon fill="black" stroke="black" points="491.12,-480 491.12,-480 753.12,-480 753.12,-480 491.12,-480"/>
<polygon fill="none" stroke="black" points="491.12,-358 491.12,-512 753.12,-512 753.12,-358 491.12,-358"/>
</g>
<!-- Class&#45;&gt;Interface -->
<!-- A -->
<g id="node3" class="node">
<title>A</title>
<polygon fill="none" stroke="black" points="182.12,-261 128.12,-261 128.12,-225 182.12,-225 182.12,-261"/>
<text text-anchor="middle" x="155.12" y="-236" font-family="Times,serif" font-size="20.00">A</text>
</g>
<!-- Class&#45;&gt;A -->
<!-- B -->
<g id="node4" class="node">
<title>B</title>
<polygon fill="none" stroke="black" points="661.12,-261 607.12,-261 607.12,-225 661.12,-225 661.12,-261"/>
<text text-anchor="middle" x="634.12" y="-236" font-family="Times,serif" font-size="20.00">B</text>
</g>
<!-- Interface&#45;&gt;B -->
<!-- A&#45;&gt;B -->
<g id="edge1" class="edge">
<title>A&#45;&gt;B</title>
<path fill="none" stroke="black" d="M182.6,-243C263.54,-243 501.28,-243 595.26,-243"/>
<polygon fill="none" stroke="black" points="595.25,-246.5 605.25,-243 595.25,-239.5 595.25,-246.5"/>
<text text-anchor="middle" x="394.62" y="-275" font-family="Times,serif" font-size="20.00">Наследование A от B</text>
<text text-anchor="middle" x="394.62" y="-251" font-family="Times,serif" font-size="20.00">(стрелка указывает на базовый класс)</text>
</g>
<!-- A&#45;&gt;B -->
<!-- A&#45;&gt;B -->
<!-- C -->
<g id="node5" class="node">
<title>C</title>
<polygon fill="none" stroke="black" points="143.12,-188 89.12,-188 89.12,-152 143.12,-152 143.12,-188"/>
<text text-anchor="middle" x="116.12" y="-163" font-family="Times,serif" font-size="20.00">C</text>
</g>
<!-- A&#45;&gt;C -->
<!-- D -->
<g id="node6" class="node">
<title>D</title>
<polygon fill="none" stroke="black" points="675.12,-188 621.12,-188 621.12,-152 675.12,-152 675.12,-188"/>
<text text-anchor="middle" x="648.12" y="-163" font-family="Times,serif" font-size="20.00">D</text>
</g>
<!-- B&#45;&gt;D -->
<!-- C&#45;&gt;D -->
<g id="edge6" class="edge">
<title>C&#45;&gt;D</title>
<path fill="none" stroke="black" d="M143.61,-170C231.27,-170 504.54,-170 607.94,-170"/>
<polygon fill="none" stroke="black" points="607.91,-170 613.91,-166 619.91,-170 613.91,-174 607.91,-170"/>
<text text-anchor="middle" x="382.12" y="-202" font-family="Times,serif" font-size="20.00">Аггрегирование: C использует D</text>
<text text-anchor="middle" x="382.12" y="-178" font-family="Times,serif" font-size="20.00">(время жизни у обоих может быть разным)</text>
</g>
<!-- C&#45;&gt;D -->
<!-- C&#45;&gt;D -->
<!-- E -->
<g id="node7" class="node">
<title>E</title>
<polygon fill="none" stroke="black" points="210.12,-115 156.12,-115 156.12,-79 210.12,-79 210.12,-115"/>
<text text-anchor="middle" x="183.12" y="-90" font-family="Times,serif" font-size="20.00">E</text>
</g>
<!-- C&#45;&gt;E -->
<!-- F -->
<g id="node8" class="node">
<title>F</title>
<polygon fill="none" stroke="black" points="652.12,-115 598.12,-115 598.12,-79 652.12,-79 652.12,-115"/>
<text text-anchor="middle" x="625.12" y="-90" font-family="Times,serif" font-size="20.00">F</text>
</g>
<!-- D&#45;&gt;F -->
<!-- E&#45;&gt;F -->
<g id="edge11" class="edge">
<title>E&#45;&gt;F</title>
<path fill="none" stroke="black" d="M210.44,-97C285.64,-97 496.01,-97 584.79,-97"/>
<polygon fill="black" stroke="black" points="584.81,-97 590.81,-93 596.81,-97 590.81,-101 584.81,-97"/>
<text text-anchor="middle" x="404.12" y="-129" font-family="Times,serif" font-size="20.00">Композиция: F принадлежит E</text>
<text text-anchor="middle" x="404.12" y="-105" font-family="Times,serif" font-size="20.00">(время жизни у обоих одинаковое)</text>
</g>
<!-- E&#45;&gt;F -->
<!-- E&#45;&gt;F -->
<!-- G -->
<g id="node9" class="node">
<title>G</title>
<polygon fill="none" stroke="black" points="238.12,-42 184.12,-42 184.12,-6 238.12,-6 238.12,-42"/>
<text text-anchor="middle" x="211.12" y="-17" font-family="Times,serif" font-size="20.00">G</text>
</g>
<!-- E&#45;&gt;G -->
<!-- H -->
<g id="node10" class="node">
<title>H</title>
<polygon fill="none" stroke="black" points="642.12,-42 588.12,-42 588.12,-6 642.12,-6 642.12,-42"/>
<text text-anchor="middle" x="615.12" y="-17" font-family="Times,serif" font-size="20.00">H</text>
</g>
<!-- F&#45;&gt;H -->
<!-- G&#45;&gt;H -->
<g id="edge16" class="edge">
<title>G&#45;&gt;H</title>
<path fill="none" stroke="black" d="M238.58,-24C308.32,-24 492.6,-24 574.69,-24"/>
<polygon fill="black" stroke="black" points="574.73,-24 580.73,-20 586.73,-24 580.73,-28 574.73,-24"/>
<text text-anchor="middle" x="413.12" y="-32" font-family="Times,serif" font-size="20.00">G содержит массив объектов H</text>
<text text-anchor="middle" x="573.01" y="-5" font-family="Times,serif" font-size="20.00">1+</text>
</g>
<!-- G&#45;&gt;H -->
</g>
</svg></div>
</div></div></td>
<td align="left" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="745px" preserveAspectRatio="none" style="width:887px;height:745px;background:#FFFFFF;" version="1.1" viewBox="0 0 887 745" width="887px" zoomAndPan="magnify"><defs/><g><!--class ?????????--><g id="elem_&#1048;&#1084;&#1103;&#1050;&#1083;&#1072;&#1089;&#1089;&#1072;"><rect codeLine="1" fill="#F1F1F1" height="282.8125" id="&#1048;&#1084;&#1103;&#1050;&#1083;&#1072;&#1089;&#1089;&#1072;" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="497" x="9" y="11.2168"/><ellipse cx="107" cy="28.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M110.0625,35.2949 Q109.375,35.6543 108.625,35.8262 Q107.875,35.998 107.0469,35.998 Q104.0938,35.998 102.5313,34.0605 Q100.9844,32.1074 100.9844,28.4355 Q100.9844,24.7637 102.5313,22.8262 Q104.0938,20.873 107.0469,20.873 Q107.875,20.873 108.625,21.0449 Q109.3906,21.2168 110.0625,21.5762 L110.0625,24.7793 Q109.3125,24.0918 108.6094,23.7793 Q107.9219,23.4668 107.1719,23.4668 Q105.5938,23.4668 104.7813,24.7168 Q103.9844,25.9668 103.9844,28.4355 Q103.9844,30.9043 104.7813,32.1543 Q105.5938,33.4043 107.1719,33.4043 Q107.9219,33.4043 108.6094,33.0918 Q109.3125,32.7793 110.0625,32.0918 L110.0625,35.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="115" x="129" y="35.1406">&#1048;&#1084;&#1103;&#1050;&#1083;&#1072;&#1089;&#1089;&#1072;</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="175" x="334" y="8.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="173" x="335" y="27.7813">&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1085;&#1099;&#1081;_&#1090;&#1080;&#1087;</text><line style="stroke:#181818;stroke-width:0.5;" x1="10" x2="505" y1="45.2168" y2="45.2168"/><ellipse cx="20" cy="89.6387" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="178" x="30" y="95.0625">&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103;: &#1090;&#1080;&#1087;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="17" y="109.9199"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="236" x="30" y="118.3438">&#1079;&#1072;&#1082;&#1088;&#1099;&#1090;&#1072;&#1103;_&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103;</text><polygon fill="none" points="20,131.2012,24,135.2012,20,139.2012,16,135.2012" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="272" x="30" y="141.625">&#1079;&#1072;&#1097;&#1080;&#1097;&#1105;&#1085;&#1085;&#1072;&#1103;_&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103;</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="268" x="30" y="164.9063">&#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1072;&#1103;_&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103;</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="10" x2="151" y1="64.8574" y2="64.8574"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="213" x="151" y="71.2813">&#1057;&#1077;&#1082;&#1094;&#1080;&#1103; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093;</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="364" x2="505" y1="64.8574" y2="64.8574"/><ellipse cx="20" cy="210.0449" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="470" x="30" y="215.4688">&#1086;&#1090;&#1082;&#1088;&#1099;&#1090;&#1099;&#1081;_&#1084;&#1077;&#1090;&#1086;&#1076;(): &#1074;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1084;&#1086;&#1077;_&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077;</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="17" y="230.3262"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="30" y="238.75">&#1079;&#1072;&#1082;&#1088;&#1099;&#1090;&#1099;&#1081;_&#1084;&#1077;&#1090;&#1086;&#1076;()</text><polygon fill="#FFFF44" points="20,251.6074,24,255.6074,20,259.6074,16,255.6074" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="231" x="30" y="262.0313">&#1079;&#1072;&#1097;&#1080;&#1097;&#1105;&#1085;&#1085;&#1099;&#1081;_&#1084;&#1077;&#1090;&#1086;&#1076;()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="205" x="30" y="285.3125">&#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1085;&#1099;&#1081;_&#1084;&#1077;&#1090;&#1086;&#1076;()</text><line style="stroke:#181818;stroke-width:0.5;" x1="10" x2="171.5" y1="185.2637" y2="185.2637"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="172" x="171.5" y="191.6875">&#1057;&#1077;&#1082;&#1094;&#1080;&#1103; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;</text><line style="stroke:#181818;stroke-width:0.5;" x1="343.5" x2="505" y1="185.2637" y2="185.2637"/></g><!--class ?????????--><g id="elem_&#1048;&#1085;&#1090;&#1077;&#1088;&#1092;&#1077;&#1081;&#1089;"><rect codeLine="14" fill="#F1F1F1" height="143.125" id="&#1048;&#1085;&#1090;&#1077;&#1088;&#1092;&#1077;&#1081;&#1089;" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="241" x="639" y="81.0568"/><ellipse cx="696" cy="98.0568" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M691.1875,93.5099 L691.1875,90.9787 L699.8594,90.9787 L699.8594,93.5099 L696.9688,93.5099 L696.9688,103.0099 L699.8594,103.0099 L699.8594,105.5568 L691.1875,105.5568 L691.1875,103.0099 L694.0781,103.0099 L694.0781,93.5099 L691.1875,93.5099 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="118" x="718" y="104.9806">&#1048;&#1085;&#1090;&#1077;&#1088;&#1092;&#1077;&#1081;&#1089;</text><line style="stroke:#181818;stroke-width:0.5;" x1="640" x2="879" y1="115.0568" y2="115.0568"/><line style="stroke:#181818;stroke-width:0.5;" x1="640" x2="879" y1="123.0568" y2="123.0568"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="645" y="145.6212">&#1084;&#1077;&#1090;&#1086;&#1076;1()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="645" y="168.9025">&#1084;&#1077;&#1090;&#1086;&#1076;2()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="645" y="192.1837">&#1084;&#1077;&#1090;&#1086;&#1076;3()</text><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="229" x="645" y="215.465">&#1072;&#1073;&#1089;&#1090;&#1088;&#1072;&#1082;&#1090;&#1085;&#1099;&#1081;_&#1084;&#1077;&#1090;&#1086;&#1076;()</text></g><!--class A--><g id="elem_A"><rect fill="#F1F1F1" height="50" id="A" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="233.5" y="355.0268"/><ellipse cx="249.5" cy="372.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M252.5625,379.1049 Q251.875,379.4643 251.125,379.6362 Q250.375,379.808 249.5469,379.808 Q246.5938,379.808 245.0313,377.8705 Q243.4844,375.9174 243.4844,372.2455 Q243.4844,368.5737 245.0313,366.6362 Q246.5938,364.683 249.5469,364.683 Q250.375,364.683 251.125,364.8549 Q251.8906,365.0268 252.5625,365.3862 L252.5625,368.5893 Q251.8125,367.9018 251.1094,367.5893 Q250.4219,367.2768 249.6719,367.2768 Q248.0938,367.2768 247.2813,368.5268 Q246.4844,369.7768 246.4844,372.2455 Q246.4844,374.7143 247.2813,375.9643 Q248.0938,377.2143 249.6719,377.2143 Q250.4219,377.2143 251.1094,376.9018 Q251.8125,376.5893 252.5625,375.9018 L252.5625,379.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="14" x="264.5" y="378.9506">A</text><line style="stroke:#181818;stroke-width:0.5;" x1="234.5" x2="280.5" y1="389.0268" y2="389.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="234.5" x2="280.5" y1="397.0268" y2="397.0268"/></g><!--class B--><g id="elem_B"><rect fill="#F1F1F1" height="50" id="B" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="735.5" y="355.0268"/><ellipse cx="751.5" cy="372.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M754.5625,379.1049 Q753.875,379.4643 753.125,379.6362 Q752.375,379.808 751.5469,379.808 Q748.5938,379.808 747.0313,377.8705 Q745.4844,375.9174 745.4844,372.2455 Q745.4844,368.5737 747.0313,366.6362 Q748.5938,364.683 751.5469,364.683 Q752.375,364.683 753.125,364.8549 Q753.8906,365.0268 754.5625,365.3862 L754.5625,368.5893 Q753.8125,367.9018 753.1094,367.5893 Q752.4219,367.2768 751.6719,367.2768 Q750.0938,367.2768 749.2813,368.5268 Q748.4844,369.7768 748.4844,372.2455 Q748.4844,374.7143 749.2813,375.9643 Q750.0938,377.2143 751.6719,377.2143 Q752.4219,377.2143 753.1094,376.9018 Q753.8125,376.5893 754.5625,375.9018 L754.5625,379.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="14" x="766.5" y="378.9506">B</text><line style="stroke:#181818;stroke-width:0.5;" x1="736.5" x2="782.5" y1="389.0268" y2="389.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="736.5" x2="782.5" y1="397.0268" y2="397.0268"/></g><!--class C--><g id="elem_C"><rect fill="#F1F1F1" height="50" id="C" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="48" x="233.5" y="466.0268"/><ellipse cx="249.5" cy="483.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M252.5625,490.1049 Q251.875,490.4643 251.125,490.6362 Q250.375,490.808 249.5469,490.808 Q246.5938,490.808 245.0313,488.8705 Q243.4844,486.9174 243.4844,483.2455 Q243.4844,479.5737 245.0313,477.6362 Q246.5938,475.683 249.5469,475.683 Q250.375,475.683 251.125,475.8549 Q251.8906,476.0268 252.5625,476.3862 L252.5625,479.5893 Q251.8125,478.9018 251.1094,478.5893 Q250.4219,478.2768 249.6719,478.2768 Q248.0938,478.2768 247.2813,479.5268 Q246.4844,480.7768 246.4844,483.2455 Q246.4844,485.7143 247.2813,486.9643 Q248.0938,488.2143 249.6719,488.2143 Q250.4219,488.2143 251.1094,487.9018 Q251.8125,487.5893 252.5625,486.9018 L252.5625,490.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="14" x="264.5" y="489.9506">C</text><line style="stroke:#181818;stroke-width:0.5;" x1="234.5" x2="280.5" y1="500.0268" y2="500.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="234.5" x2="280.5" y1="508.0268" y2="508.0268"/></g><!--class D--><g id="elem_D"><rect fill="#F1F1F1" height="50" id="D" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49" x="735" y="466.0268"/><ellipse cx="751" cy="483.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M754.0625,490.1049 Q753.375,490.4643 752.625,490.6362 Q751.875,490.808 751.0469,490.808 Q748.0938,490.808 746.5313,488.8705 Q744.9844,486.9174 744.9844,483.2455 Q744.9844,479.5737 746.5313,477.6362 Q748.0938,475.683 751.0469,475.683 Q751.875,475.683 752.625,475.8549 Q753.3906,476.0268 754.0625,476.3862 L754.0625,479.5893 Q753.3125,478.9018 752.6094,478.5893 Q751.9219,478.2768 751.1719,478.2768 Q749.5938,478.2768 748.7813,479.5268 Q747.9844,480.7768 747.9844,483.2455 Q747.9844,485.7143 748.7813,486.9643 Q749.5938,488.2143 751.1719,488.2143 Q751.9219,488.2143 752.6094,487.9018 Q753.3125,487.5893 754.0625,486.9018 L754.0625,490.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="15" x="766" y="489.9506">D</text><line style="stroke:#181818;stroke-width:0.5;" x1="736" x2="783" y1="500.0268" y2="500.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="736" x2="783" y1="508.0268" y2="508.0268"/></g><!--class E--><g id="elem_E"><rect fill="#F1F1F1" height="50" id="E" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47" x="198" y="577.0268"/><ellipse cx="214" cy="594.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M217.0625,601.1049 Q216.375,601.4643 215.625,601.6362 Q214.875,601.808 214.0469,601.808 Q211.0938,601.808 209.5313,599.8705 Q207.9844,597.9174 207.9844,594.2455 Q207.9844,590.5737 209.5313,588.6362 Q211.0938,586.683 214.0469,586.683 Q214.875,586.683 215.625,586.8549 Q216.3906,587.0268 217.0625,587.3862 L217.0625,590.5893 Q216.3125,589.9018 215.6094,589.5893 Q214.9219,589.2768 214.1719,589.2768 Q212.5938,589.2768 211.7813,590.5268 Q210.9844,591.7768 210.9844,594.2455 Q210.9844,596.7143 211.7813,597.9643 Q212.5938,599.2143 214.1719,599.2143 Q214.9219,599.2143 215.6094,598.9018 Q216.3125,598.5893 217.0625,597.9018 L217.0625,601.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="229" y="600.9506">E</text><line style="stroke:#181818;stroke-width:0.5;" x1="199" x2="244" y1="611.0268" y2="611.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="199" x2="244" y1="619.0268" y2="619.0268"/></g><!--class F--><g id="elem_F"><rect fill="#F1F1F1" height="50" id="F" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="749.5" y="577.0268"/><ellipse cx="765.5" cy="594.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M768.5625,601.1049 Q767.875,601.4643 767.125,601.6362 Q766.375,601.808 765.5469,601.808 Q762.5938,601.808 761.0313,599.8705 Q759.4844,597.9174 759.4844,594.2455 Q759.4844,590.5737 761.0313,588.6362 Q762.5938,586.683 765.5469,586.683 Q766.375,586.683 767.125,586.8549 Q767.8906,587.0268 768.5625,587.3862 L768.5625,590.5893 Q767.8125,589.9018 767.1094,589.5893 Q766.4219,589.2768 765.6719,589.2768 Q764.0938,589.2768 763.2813,590.5268 Q762.4844,591.7768 762.4844,594.2455 Q762.4844,596.7143 763.2813,597.9643 Q764.0938,599.2143 765.6719,599.2143 Q766.4219,599.2143 767.1094,598.9018 Q767.8125,598.5893 768.5625,597.9018 L768.5625,601.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="12" x="780.5" y="600.9506">F</text><line style="stroke:#181818;stroke-width:0.5;" x1="750.5" x2="794.5" y1="611.0268" y2="611.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="750.5" x2="794.5" y1="619.0268" y2="619.0268"/></g><!--class G--><g id="elem_G"><rect fill="#F1F1F1" height="50" id="G" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="380.5" y="688.0268"/><ellipse cx="396.5" cy="705.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M399.5625,712.1049 Q398.875,712.4643 398.125,712.6362 Q397.375,712.808 396.5469,712.808 Q393.5938,712.808 392.0313,710.8705 Q390.4844,708.9174 390.4844,705.2455 Q390.4844,701.5737 392.0313,699.6362 Q393.5938,697.683 396.5469,697.683 Q397.375,697.683 398.125,697.8549 Q398.8906,698.0268 399.5625,698.3862 L399.5625,701.5893 Q398.8125,700.9018 398.1094,700.5893 Q397.4219,700.2768 396.6719,700.2768 Q395.0938,700.2768 394.2813,701.5268 Q393.4844,702.7768 393.4844,705.2455 Q393.4844,707.7143 394.2813,708.9643 Q395.0938,710.2143 396.6719,710.2143 Q397.4219,710.2143 398.1094,709.9018 Q398.8125,709.5893 399.5625,708.9018 L399.5625,712.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="16" x="411.5" y="711.9506">G</text><line style="stroke:#181818;stroke-width:0.5;" x1="381.5" x2="429.5" y1="722.0268" y2="722.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="381.5" x2="429.5" y1="730.0268" y2="730.0268"/></g><!--class H--><g id="elem_H"><rect fill="#F1F1F1" height="50" id="H" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49" x="717" y="688.0268"/><ellipse cx="733" cy="705.0268" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M736.0625,712.1049 Q735.375,712.4643 734.625,712.6362 Q733.875,712.808 733.0469,712.808 Q730.0938,712.808 728.5313,710.8705 Q726.9844,708.9174 726.9844,705.2455 Q726.9844,701.5737 728.5313,699.6362 Q730.0938,697.683 733.0469,697.683 Q733.875,697.683 734.625,697.8549 Q735.3906,698.0268 736.0625,698.3862 L736.0625,701.5893 Q735.3125,700.9018 734.6094,700.5893 Q733.9219,700.2768 733.1719,700.2768 Q731.5938,700.2768 730.7813,701.5268 Q729.9844,702.7768 729.9844,705.2455 Q729.9844,707.7143 730.7813,708.9643 Q731.5938,710.2143 733.1719,710.2143 Q733.9219,710.2143 734.6094,709.9018 Q735.3125,709.5893 736.0625,708.9018 L736.0625,712.1049 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="15" x="748" y="711.9506">H</text><line style="stroke:#181818;stroke-width:0.5;" x1="718" x2="765" y1="722.0268" y2="722.0268"/><line style="stroke:#181818;stroke-width:0.5;" x1="718" x2="765" y1="730.0268" y2="730.0268"/></g><!--link ????????? to A--><!--link ????????? to B--><!--link A to C--><!--link B to D--><!--link C to E--><!--link D to F--><!--link E to G--><!--link F to H--><!--link A to B--><g id="link_A_B"><path codeLine="30" d="M281.71,380.0268 C366.61,380.0268 632.26,380.0268 717.24,380.0268 " fill="none" id="A-to-B" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="735.24,380.0268,717.24,374.0268,717.24,386.0268,735.24,380.0268" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="399" y="348.5912">&#1085;&#1072;&#1089;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; A &#1086;&#1090; B</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="405" x="306" y="371.8725">(&#1089;&#1090;&#1088;&#1077;&#1083;&#1082;&#1072; &#1091;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1077;&#1090; &#1085;&#1072; &#1073;&#1072;&#1079;&#1086;&#1074;&#1099;&#1081; &#1082;&#1083;&#1072;&#1089;&#1089;)</text></g><!--link C to D--><g id="link_C_D"><path codeLine="32" d="M281.71,491.0268 C366.42,491.0268 636.95,491.0268 722.65,491.0268 " fill="none" id="C-to-D" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="734.65,491.0268,728.65,487.0268,722.65,491.0268,728.65,495.0268,734.65,491.0268" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="343" x="336.75" y="459.5912">&#1072;&#1075;&#1075;&#1088;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;: C &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090; D</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="365" x="325.75" y="482.8725">(&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1072;)</text></g><!--link E to F--><g id="link_E_F"><path codeLine="34" d="M245.18,602.0268 C335.71,602.0268 647.37,602.0268 737.22,602.0268 " fill="none" id="E-to-F" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="749.22,602.0268,743.22,598.0268,737.22,602.0268,743.22,606.0268,749.22,602.0268" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="322" x="336.25" y="570.5913">&#1082;&#1086;&#1084;&#1087;&#1086;&#1079;&#1080;&#1094;&#1080;&#1103;: F &#1087;&#1088;&#1080;&#1085;&#1072;&#1076;&#1083;&#1077;&#1078;&#1080;&#1090; E</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="456" x="269.25" y="593.8725">(&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1086;&#1081; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;)</text></g><!--link G to H--><g id="link_G_H"><path codeLine="36" d="M430.75,713.0268 C493.33,713.0268 642.95,713.0268 704.87,713.0268 " fill="none" id="G-to-H" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="716.87,713.0268,710.87,709.0268,704.87,713.0268,710.87,717.0268,716.87,713.0268" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="207" x="470.25" y="681.5913">G &#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1090; &#1084;&#1072;&#1089;&#1089;&#1080;&#1074;</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="119" x="514.25" y="704.8725">&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1074; H</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="30" x="679.0678" y="706.3549">1+</text></g><!--SRC=[bLDDRn9H5Ds_Nt5JDwsLnjRTn3JXktkNrf0Hff4K1mFJZPM4eMfJQqBS6NVkN5Beo9IMuI_SzuyyzyqqE30raOJ0k_VSUyxzwXuttNTsntxRQjUFdGOrd2FxfELLsgxteldUeRsdgjwokrtYxtodX_o3RtcaVUtpY9xpBnxn5ImHptckB_ccfWSSycAVJXNXixD3_9C3dkdF7EeXyO83tOVX3byJeZy1PB3Rgqxm32sA4nf4ZgVWc-a-mWRYhMM56EWZWUeBa5xeR_UUX-6dNS_sclKUeJB934vz3gpFity7rceh1GA0w8YlyHt3dPGMmPW8DsrQuZQtBE8n_arv30eHFJ944GSr68NhtB267AotOIrRTldPiEooCy0zfPgkvtIExBeZcp271mtH7o7iHll9j9SXkmd1qhAtPdbsBy9-tVKwTjthaMoJI94-eC310rBob7lvfjbeEEwharp6Ogh2Ac15hogc07bLIhqBgfnw5rKbzIwfQkfTLWUfTyL8xEG-x5C1mvK9-b0Nn4k1qimiAK-o5bGuT3UJeWEWi72ap-I7fwXUu2ZUP27S6goIHFf202KrRoafgPDhKycIBavuOj9DCD3-twGM5Gas7miTyQt-2eupaxy45SB12mI4fkFz9rXCCXTWRW4z74CsGaTcG6OgyW_iPM5_J1LBy15S2xFHONmM5bKeIImKrwOPl-4PKFb_UDCt6ALQO6HKOnaRkziRT61H5OjjRb42Opv4n_2GnuSkd5VwYxdVWJdOWpy0]--></g></svg></div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div></div>
<div class="sect1 slide">
<h1 id="_порождающие_паттерны">2. Порождающие паттерны</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_общие_сведения">2.1. Общие сведения</h1>

<div class="sectionbody">
<div class="paragraph"><p>Создающие классы</p></div>
<div class="paragraph"><p>Виртуальный конструктор&#8201;&#8212;&#8201;статический метод, заменяющий <code>new</code> и не зависящий от типа</p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_abstract_factory_абстрактная_фабрика">3. Abstract factory (абстрактная фабрика)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="274px" preserveAspectRatio="none" style="width:519px;height:274px;background:#FFFFFF;" version="1.1" viewBox="0 0 519 274" width="519px" zoomAndPan="magnify"><defs/><g><!--class AbstractFactory--><g id="elem_AbstractFactory"><rect codeLine="1" fill="#F1F1F1" height="111.8438" id="AbstractFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="163" y="7"/><ellipse cx="179" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M174.1875,19.4531 L174.1875,16.9219 L182.8594,16.9219 L182.8594,19.4531 L179.9688,19.4531 L179.9688,28.9531 L182.8594,28.9531 L182.8594,31.5 L174.1875,31.5 L174.1875,28.9531 L177.0781,28.9531 L177.0781,19.4531 L174.1875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="159" x="194" y="30.9238">AbstractFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="164" x2="355" y1="41" y2="41"/><ellipse cx="174" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="184" y="63.5645">createA(): A</text><ellipse cx="174" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="184" y="86.8457">createB(): B</text><ellipse cx="174" cy="104.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="184" y="110.127">createC(): C</text></g><!--class Factory1--><g id="elem_Factory1"><rect codeLine="7" fill="#F1F1F1" height="88.5625" id="Factory1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="235" x="7" y="178.85"/><ellipse cx="76.5" cy="195.85" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M79.5625,202.9281 Q78.875,203.2875 78.125,203.4594 Q77.375,203.6313 76.5469,203.6313 Q73.5938,203.6313 72.0313,201.6938 Q70.4844,199.7406 70.4844,196.0688 Q70.4844,192.3969 72.0313,190.4594 Q73.5938,188.5063 76.5469,188.5063 Q77.375,188.5063 78.125,188.6781 Q78.8906,188.85 79.5625,189.2094 L79.5625,192.4125 Q78.8125,191.725 78.1094,191.4125 Q77.4219,191.1 76.6719,191.1 Q75.0938,191.1 74.2813,192.35 Q73.4844,193.6 73.4844,196.0688 Q73.4844,198.5375 74.2813,199.7875 Q75.0938,201.0375 76.6719,201.0375 Q77.4219,201.0375 78.1094,200.725 Q78.8125,200.4125 79.5625,199.725 L79.5625,202.9281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="87" x="98.5" y="202.7738">Factory1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="241" y1="212.85" y2="212.85"/><ellipse cx="18" cy="229.9906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="208" x="28" y="235.4145">createA() override: A</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="28" y="258.6957">...</text></g><!--class Factory2--><g id="elem_Factory2"><rect codeLine="12" fill="#F1F1F1" height="88.5625" id="Factory2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="235" x="277" y="178.85"/><ellipse cx="346.5" cy="195.85" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M349.5625,202.9281 Q348.875,203.2875 348.125,203.4594 Q347.375,203.6313 346.5469,203.6313 Q343.5938,203.6313 342.0313,201.6938 Q340.4844,199.7406 340.4844,196.0688 Q340.4844,192.3969 342.0313,190.4594 Q343.5938,188.5063 346.5469,188.5063 Q347.375,188.5063 348.125,188.6781 Q348.8906,188.85 349.5625,189.2094 L349.5625,192.4125 Q348.8125,191.725 348.1094,191.4125 Q347.4219,191.1 346.6719,191.1 Q345.0938,191.1 344.2813,192.35 Q343.4844,193.6 343.4844,196.0688 Q343.4844,198.5375 344.2813,199.7875 Q345.0938,201.0375 346.6719,201.0375 Q347.4219,201.0375 348.1094,200.725 Q348.8125,200.4125 349.5625,199.725 L349.5625,202.9281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="87" x="368.5" y="202.7738">Factory2</text><line style="stroke:#181818;stroke-width:0.5;" x1="278" x2="511" y1="212.85" y2="212.85"/><ellipse cx="288" cy="229.9906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="208" x="298" y="235.4145">createA() override: A</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="298" y="258.6957">...</text></g><!--reverse link AbstractFactory to Factory1--><g id="link_AbstractFactory_Factory1"><path codeLine="17" d="M200.5966,132.953 C184.0266,152.373 177.33,160.21 161.7,178.54 " fill="none" id="AbstractFactory-backto-Factory1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="212.28,119.26,196.0322,129.0585,205.1609,136.8474,212.28,119.26" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link AbstractFactory to Factory2--><g id="link_AbstractFactory_Factory2"><path codeLine="18" d="M318.4034,132.953 C334.9734,152.373 341.67,160.21 357.3,178.54 " fill="none" id="AbstractFactory-backto-Factory2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="306.72,119.26,313.8391,136.8474,322.9678,129.0585,306.72,119.26" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[bO_12e9048Rl-nHpB48fZnq25No1dc3RdSN5rPNPCJ3ptLCeaUpIm5o-d_yR9bIsQIN9sdbLeGQDHdQE2z_mrJuGagEm3ICPgH3IMs2IYejfFVKm29Zce0WbOxhRdo5TasmcsPhaCyd5A8HoCWHuYquR4_Wx4bcD7-LG8vTUZt4SR-h9t_NbRjH5pyltNsBn_ev5EPa1wvPxC1QT3Yy0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Фабрика&#8201;&#8212;&#8201;это просто набор виртуальных конструкторов
</span>
</li>
<li>
<span>
<code>A</code>, <code>B</code>, <code>C</code>&#8201;&#8212;&#8201;это интерфейсы
</span>
</li>
<li>
<span>
Приходится писать не только сами объекты, но и фабрику
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Фабрика по созданию окон, кнопок, полей ввода в зависимости от менеджера графики
(X11, cairo, GtK, Qt, Mate, Windows, MacOS, &#8230;)</p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_factory_method_фабричный_метод">4. Factory method (фабричный метод)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="235px" preserveAspectRatio="none" style="width:380px;height:235px;background:#FFFFFF;" version="1.1" viewBox="0 0 380 235" width="380px" zoomAndPan="magnify"><defs/><g><!--class SomeObject--><g id="elem_SomeObject"><rect codeLine="1" fill="#F1F1F1" height="96.5625" id="SomeObject" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="7" y="7"/><ellipse cx="40.1" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M43.1625,31.0781 Q42.475,31.4375 41.725,31.6094 Q40.975,31.7813 40.1469,31.7813 Q37.1938,31.7813 35.6313,29.8438 Q34.0844,27.8906 34.0844,24.2188 Q34.0844,20.5469 35.6313,18.6094 Q37.1938,16.6563 40.1469,16.6563 Q40.975,16.6563 41.725,16.8281 Q42.4906,17 43.1625,17.3594 L43.1625,20.5625 Q42.4125,19.875 41.7094,19.5625 Q41.0219,19.25 40.2719,19.25 Q38.6938,19.25 37.8813,20.5 Q37.0844,21.75 37.0844,24.2188 Q37.0844,26.6875 37.8813,27.9375 Q38.6938,29.1875 40.2719,29.1875 Q41.0219,29.1875 41.7094,28.875 Q42.4125,28.5625 43.1625,27.875 L43.1625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="123" x="58.9" y="30.9238">SomeObject</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="201" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="13" y="63.5645">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="201" y1="72.2813" y2="72.2813"/><ellipse cx="18" cy="89.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="28" y="94.8457">createObj(): IObj</text></g><!--class IObj--><g id="elem_IObj"><rect codeLine="6" fill="#F1F1F1" height="34" id="IObj" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="237" y="38.28"/><ellipse cx="253" cy="55.28" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M248.1875,50.7331 L248.1875,48.2019 L256.8594,48.2019 L256.8594,50.7331 L253.9688,50.7331 L253.9688,60.2331 L256.8594,60.2331 L256.8594,62.78 L248.1875,62.78 L248.1875,60.2331 L251.0781,60.2331 L251.0781,50.7331 L248.1875,50.7331 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="41" x="268" y="62.2038">IObj</text></g><!--class Obj1--><g id="elem_Obj1"><rect codeLine="8" fill="#F1F1F1" height="65.2813" id="Obj1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="174.5" y="163.56"/><ellipse cx="190.5" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M193.5625,187.6381 Q192.875,187.9975 192.125,188.1694 Q191.375,188.3413 190.5469,188.3413 Q187.5938,188.3413 186.0313,186.4038 Q184.4844,184.4506 184.4844,180.7788 Q184.4844,177.1069 186.0313,175.1694 Q187.5938,173.2163 190.5469,173.2163 Q191.375,173.2163 192.125,173.3881 Q192.8906,173.56 193.5625,173.9194 L193.5625,177.1225 Q192.8125,176.435 192.1094,176.1225 Q191.4219,175.81 190.6719,175.81 Q189.0938,175.81 188.2813,177.06 Q187.4844,178.31 187.4844,180.7788 Q187.4844,183.2475 188.2813,184.4975 Q189.0938,185.7475 190.6719,185.7475 Q191.4219,185.7475 192.1094,185.435 Q192.8125,185.1225 193.5625,184.435 L193.5625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="48" x="205.5" y="187.4838">Obj1</text><line style="stroke:#181818;stroke-width:0.5;" x1="175.5" x2="255.5" y1="197.56" y2="197.56"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="180.5" y="220.1245">...</text></g><!--class Obj2--><g id="elem_Obj2"><rect codeLine="12" fill="#F1F1F1" height="65.2813" id="Obj2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82" x="291.5" y="163.56"/><ellipse cx="307.5" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M310.5625,187.6381 Q309.875,187.9975 309.125,188.1694 Q308.375,188.3413 307.5469,188.3413 Q304.5938,188.3413 303.0313,186.4038 Q301.4844,184.4506 301.4844,180.7788 Q301.4844,177.1069 303.0313,175.1694 Q304.5938,173.2163 307.5469,173.2163 Q308.375,173.2163 309.125,173.3881 Q309.8906,173.56 310.5625,173.9194 L310.5625,177.1225 Q309.8125,176.435 309.1094,176.1225 Q308.4219,175.81 307.6719,175.81 Q306.0938,175.81 305.2813,177.06 Q304.4844,178.31 304.4844,180.7788 Q304.4844,183.2475 305.2813,184.4975 Q306.0938,185.7475 307.6719,185.7475 Q308.4219,185.7475 309.1094,185.435 Q309.8125,185.1225 310.5625,184.435 L310.5625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="48" x="322.5" y="187.4838">Obj2</text><line style="stroke:#181818;stroke-width:0.5;" x1="292.5" x2="372.5" y1="197.56" y2="197.56"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="297.5" y="220.1245">...</text></g><!--reverse link IObj to Obj1--><g id="link_IObj_Obj1"><path codeLine="16" d="M260.4653,89.3284 C251.0353,111.5384 241.08,134.97 229.09,163.19 " fill="none" id="IObj-backto-Obj1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="267.5,72.76,254.9425,86.9835,265.9881,91.6733,267.5,72.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link IObj to Obj2--><g id="link_IObj_Obj2"><path codeLine="17" d="M288.3132,89.3712 C297.5832,111.5812 307.35,134.97 319.14,163.19 " fill="none" id="IObj-backto-Obj2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="281.38,72.76,282.7761,91.6822,293.8502,87.0601,281.38,72.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link SomeObject to IObj--><g id="link_SomeObject_IObj"><path codeLine="18" d="M208.45,55.28 C219.8,55.28 225.15,55.28 236.5,55.28 " fill="none" id="SomeObject-backto-IObj" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="202.45,55.28,211.45,59.28,207.45,55.28,211.45,51.28,202.45,55.28" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[LKwx3i8m3Dpz5Hv1g15qPEY8nCJGBt0JLuGcQPMa0u_-EsdA43puxFFToM7GRY9FrenoO8MAUvfDl8mkjlh5M1z16We1sz7ohNkmZFW6J2M4o7YGdYckjzt-ZDU4i01e5zdt97bZVY5fF1NsfU3hVpuhgxdwD5j0LXJxsb0OqHIF0TorOcGxnITQjXtxy0K0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Частный случай абстрактной фабрики
</span>
</li>
<li>
<span>
<code>IObj</code>&#8201;&#8212;&#8201;это интерфейс
</span>
</li>
<li>
<span>
<code>SomeObject</code> не является интерфейсом
</span>
</li>
<li>
<span>
Дальнейшее расширение объекта фабричными методами <code>create</code> приводит к созданию фабрики
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Диалоговое окно, у которого есть фабричный метод <code>createButton</code>, возвращающий
кнопку в зависимости от графического менеджера</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_builder_строитель">4.1. Builder (строитель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="297px" preserveAspectRatio="none" style="width:581px;height:297px;background:#FFFFFF;" version="1.1" viewBox="0 0 581 297" width="581px" zoomAndPan="magnify"><defs/><g><!--class Builder--><g id="elem_Builder"><rect codeLine="3" fill="#F1F1F1" height="111.8438" id="Builder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="206" y="7"/><ellipse cx="251.7" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M246.8875,19.4531 L246.8875,16.9219 L255.5594,16.9219 L255.5594,19.4531 L252.6688,19.4531 L252.6688,28.9531 L255.5594,28.9531 L255.5594,31.5 L246.8875,31.5 L246.8875,28.9531 L249.7781,28.9531 L249.7781,19.4531 L246.8875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="48" x="273.3" y="28.8467">Builder</text><line style="stroke:#181818;stroke-width:0.5;" x1="207" x2="353" y1="41" y2="41"/><ellipse cx="217" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="227" y="63.5645">buildPartA()</text><ellipse cx="217" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="227" y="86.8457">buildPartB()</text><ellipse cx="217" cy="104.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="227" y="110.127">buildPartC()</text></g><!--class Builder1--><g id="elem_Builder1"><rect codeLine="9" fill="#F1F1F1" height="111.8438" id="Builder1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="256" x="7" y="178.85"/><ellipse cx="102" cy="195.85" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M105.0625,202.9281 Q104.375,203.2875 103.625,203.4594 Q102.875,203.6313 102.0469,203.6313 Q99.0938,203.6313 97.5313,201.6938 Q95.9844,199.7406 95.9844,196.0688 Q95.9844,192.3969 97.5313,190.4594 Q99.0938,188.5063 102.0469,188.5063 Q102.875,188.5063 103.625,188.6781 Q104.3906,188.85 105.0625,189.2094 L105.0625,192.4125 Q104.3125,191.725 103.6094,191.4125 Q102.9219,191.1 102.1719,191.1 Q100.5938,191.1 99.7813,192.35 Q98.9844,193.6 98.9844,196.0688 Q98.9844,198.5375 99.7813,199.7875 Q100.5938,201.0375 102.1719,201.0375 Q102.9219,201.0375 103.6094,200.725 Q104.3125,200.4125 105.0625,199.725 L105.0625,202.9281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="124" y="200.6967">Builder1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="262" y1="212.85" y2="212.85"/><ellipse cx="18" cy="229.9906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209" x="28" y="235.4145">buildPartA() override</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="28" y="258.6957">...</text><ellipse cx="18" cy="276.5531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="229" x="28" y="281.977">getProduct(): Product1</text></g><!--class Builder2--><g id="elem_Builder2"><rect codeLine="15" fill="#F1F1F1" height="111.8438" id="Builder2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="256" x="298" y="178.85"/><ellipse cx="393" cy="195.85" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M396.0625,202.9281 Q395.375,203.2875 394.625,203.4594 Q393.875,203.6313 393.0469,203.6313 Q390.0938,203.6313 388.5313,201.6938 Q386.9844,199.7406 386.9844,196.0688 Q386.9844,192.3969 388.5313,190.4594 Q390.0938,188.5063 393.0469,188.5063 Q393.875,188.5063 394.625,188.6781 Q395.3906,188.85 396.0625,189.2094 L396.0625,192.4125 Q395.3125,191.725 394.6094,191.4125 Q393.9219,191.1 393.1719,191.1 Q391.5938,191.1 390.7813,192.35 Q389.9844,193.6 389.9844,196.0688 Q389.9844,198.5375 390.7813,199.7875 Q391.5938,201.0375 393.1719,201.0375 Q393.9219,201.0375 394.6094,200.725 Q395.3125,200.4125 396.0625,199.725 L396.0625,202.9281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="415" y="200.6967">Builder2</text><line style="stroke:#181818;stroke-width:0.5;" x1="299" x2="553" y1="212.85" y2="212.85"/><ellipse cx="309" cy="229.9906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209" x="319" y="235.4145">buildPartA() override</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="319" y="258.6957">...</text><ellipse cx="309" cy="276.5531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="229" x="319" y="281.977">getProduct(): Product2</text></g><!--class Director--><g id="elem_Director"><rect codeLine="21" fill="#F1F1F1" height="88.5625" id="Director" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="389.5" y="18.64"/><ellipse cx="450" cy="35.64" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M453.0625,42.7181 Q452.375,43.0775 451.625,43.2494 Q450.875,43.4212 450.0469,43.4212 Q447.0938,43.4212 445.5313,41.4837 Q443.9844,39.5306 443.9844,35.8587 Q443.9844,32.1869 445.5313,30.2494 Q447.0938,28.2962 450.0469,28.2962 Q450.875,28.2962 451.625,28.4681 Q452.3906,28.64 453.0625,28.9994 L453.0625,32.2025 Q452.3125,31.515 451.6094,31.2025 Q450.9219,30.89 450.1719,30.89 Q448.5938,30.89 447.7813,32.14 Q446.9844,33.39 446.9844,35.8587 Q446.9844,38.3275 447.7813,39.5775 Q448.5938,40.8275 450.1719,40.8275 Q450.9219,40.8275 451.6094,40.515 Q452.3125,40.2025 453.0625,39.515 L453.0625,42.7181 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="472" y="40.4867">Director</text><line style="stroke:#181818;stroke-width:0.5;" x1="390.5" x2="573.5" y1="52.64" y2="52.64"/><ellipse cx="400.5" cy="69.7806" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="158" x="410.5" y="75.2045">makeVariant1()</text><ellipse cx="400.5" cy="93.0619" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="158" x="410.5" y="98.4857">makeVariant2()</text></g><!--reverse link Builder to Builder1--><g id="link_Builder_Builder1"><path codeLine="26" d="M221.2324,132.7594 C204.9424,151.8394 198.38,159.53 182.09,178.61 " fill="none" id="Builder-backto-Builder1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="232.92,119.07,216.6692,128.8635,225.7955,136.6553,232.92,119.07" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Builder to Builder2--><g id="link_Builder_Builder2"><path codeLine="27" d="M339.1331,132.7204 C355.5331,151.8004 362.18,159.53 378.59,178.61 " fill="none" id="Builder-backto-Builder2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="327.4,119.07,334.5829,136.6315,343.6832,128.8094,327.4,119.07" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Builder to Director--><g id="link_Builder_Director"><path codeLine="29" d="M366.17,62.92 C377.82,62.92 377.47,62.92 389.12,62.92 " fill="none" id="Builder-backto-Director" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="354.17,62.92,360.17,66.92,366.17,62.92,360.17,58.92,354.17,62.92" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[hP0zZy8m38Rt_0gF8DIALamt8F4XPYGaTfEuHzIqGOwBnDT_fy0rS73ZPKeUMu_z9fIstY5ZvRmkoO2X0Xid2r_BoXu9yg4ANGjeXo74KZPIojP2NA0cc3RM6M8uAMZFO7DxBf5bqkk_aUa7cRNaejHTtucolqpWzyHi3TrBfufawyq5qZHzz7wJBDcRHakl_mK_r-p3dV-REt-wvvP9Yuy_K659QsIBjMHTuXUMFpB7j4cJdCVTWYek-XkhE2HnYN_YRRisKBMJ0nIMd0bN]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Замена конструктора с 100500+ параметрами
</span>
</li>
<li>
<span>
<code>Builder</code> похож на абстрактную фабрику и компоновщик
</span>
</li>
<li>
<span>
<code>Director</code> похож на реализации стратегий
</span>
</li>
<li>
<span>
Разделение <code>Product</code> на части
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Создание разных видов диалоговых окон в зависимости от графического менеджера</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_prototype_прототип">4.2. Prototype (прототип)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="235px" preserveAspectRatio="none" style="width:461px;height:235px;background:#FFFFFF;" version="1.1" viewBox="0 0 461 235" width="461px" zoomAndPan="magnify"><defs/><g><!--class Prototype--><g id="elem_Prototype"><rect codeLine="1" fill="#F1F1F1" height="65.2813" id="Prototype" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="127" y="7"/><ellipse cx="177" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M172.1875,19.4531 L172.1875,16.9219 L180.8594,16.9219 L180.8594,19.4531 L177.9688,19.4531 L177.9688,28.9531 L180.8594,28.9531 L180.8594,31.5 L172.1875,31.5 L172.1875,28.9531 L175.0781,28.9531 L175.0781,19.4531 L172.1875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="97" x="199" y="30.9238">Prototype</text><line style="stroke:#181818;stroke-width:0.5;" x1="128" x2="332" y1="41" y2="41"/><ellipse cx="138" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="148" y="63.5645">clone(): Prototype</text></g><!--class Object1--><g id="elem_Object1"><rect codeLine="5" fill="#F1F1F1" height="96.5625" id="Object1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="7" y="132.28"/><ellipse cx="66" cy="149.28" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M69.0625,156.3581 Q68.375,156.7175 67.625,156.8894 Q66.875,157.0613 66.0469,157.0613 Q63.0938,157.0613 61.5313,155.1238 Q59.9844,153.1706 59.9844,149.4988 Q59.9844,145.8269 61.5313,143.8894 Q63.0938,141.9363 66.0469,141.9363 Q66.875,141.9363 67.625,142.1081 Q68.3906,142.28 69.0625,142.6394 L69.0625,145.8425 Q68.3125,145.155 67.6094,144.8425 Q66.9219,144.53 66.1719,144.53 Q64.5938,144.53 63.7813,145.78 Q62.9844,147.03 62.9844,149.4988 Q62.9844,151.9675 63.7813,153.2175 Q64.5938,154.4675 66.1719,154.4675 Q66.9219,154.4675 67.6094,154.155 Q68.3125,153.8425 69.0625,153.155 L69.0625,156.3581 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="88" y="156.2038">Object1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="212" y1="166.28" y2="166.28"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="13" y="188.8445">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="212" y1="197.5613" y2="197.5613"/><ellipse cx="18" cy="214.7019" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="28" y="220.1257">clone(): Prototype</text></g><!--class Object2--><g id="elem_Object2"><rect codeLine="10" fill="#F1F1F1" height="96.5625" id="Object2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="248" y="132.28"/><ellipse cx="307" cy="149.28" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M310.0625,156.3581 Q309.375,156.7175 308.625,156.8894 Q307.875,157.0613 307.0469,157.0613 Q304.0938,157.0613 302.5313,155.1238 Q300.9844,153.1706 300.9844,149.4988 Q300.9844,145.8269 302.5313,143.8894 Q304.0938,141.9363 307.0469,141.9363 Q307.875,141.9363 308.625,142.1081 Q309.3906,142.28 310.0625,142.6394 L310.0625,145.8425 Q309.3125,145.155 308.6094,144.8425 Q307.9219,144.53 307.1719,144.53 Q305.5938,144.53 304.7813,145.78 Q303.9844,147.03 303.9844,149.4988 Q303.9844,151.9675 304.7813,153.2175 Q305.5938,154.4675 307.1719,154.4675 Q307.9219,154.4675 308.6094,154.155 Q309.3125,153.8425 310.0625,153.155 L310.0625,156.3581 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="329" y="156.2038">Object2</text><line style="stroke:#181818;stroke-width:0.5;" x1="249" x2="453" y1="166.28" y2="166.28"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="254" y="188.8445">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="249" x2="453" y1="197.5613" y2="197.5613"/><ellipse cx="259" cy="214.7019" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="269" y="220.1257">clone(): Prototype</text></g><!--reverse link Prototype to Object1--><g id="link_Prototype_Object1"><path codeLine="15" d="M190.7036,86.1318 C175.4836,103.7518 168.03,112.37 151.07,132.01 " fill="none" id="Prototype-backto-Object1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="202.47,72.51,186.163,82.2096,195.2442,90.0539,202.47,72.51" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Prototype to Object2--><g id="link_Prototype_Object2"><path codeLine="16" d="M269.5836,86.0821 C284.9336,103.7021 292.48,112.37 309.59,132.01 " fill="none" id="Prototype-backto-Object2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="257.76,72.51,265.0596,90.0233,274.1076,82.1409,257.76,72.51" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[bOqx3i8m44JxFSMM81GBKb9GqeAK4vZrMfWujcLlYX1oTn0Y0b71bFFcKreNaiwwyv5QDcZOwjxBFWPft9MnNeCBmjbgOZpcA566n3W2FhGY7mClbjitWGc0l2u53wSBasnUqT4wzcP2fTIlrVg_wlnNzTLjzu7ciMyVpiumSfTamET3kGC0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Конструктор копирования
</span>
</li>
<li>
<span>
Оператор =
</span>
</li>
<li>
<span>
"Глубокая" копия объекта
</span>
</li>
<li>
<span>
Должны наследовать интерфейс <code>Prototype</code>
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Клонирование сложного объекта в графическом редакторе</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_singleton_одиночка">4.3. Singleton (одиночка)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="140px" preserveAspectRatio="none" style="width:291px;height:140px;background:#FFFFFF;" version="1.1" viewBox="0 0 291 140" width="291px" zoomAndPan="magnify"><defs/><g><!--class Singleton--><g id="elem_Singleton"><rect codeLine="1" fill="#F1F1F1" height="119.8438" id="Singleton" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="270" x="7" y="7"/><ellipse cx="89.5" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M92.5625,31.0781 Q91.875,31.4375 91.125,31.6094 Q90.375,31.7813 89.5469,31.7813 Q86.5938,31.7813 85.0313,29.8438 Q83.4844,27.8906 83.4844,24.2188 Q83.4844,20.5469 85.0313,18.6094 Q86.5938,16.6563 89.5469,16.6563 Q90.375,16.6563 91.125,16.8281 Q91.8906,17 92.5625,17.3594 L92.5625,20.5625 Q91.8125,19.875 91.1094,19.5625 Q90.4219,19.25 89.6719,19.25 Q88.0938,19.25 87.2813,20.5 Q86.4844,21.75 86.4844,24.2188 Q86.4844,26.6875 87.2813,27.9375 Q88.0938,29.1875 89.6719,29.1875 Q90.4219,29.1875 91.1094,28.875 Q91.8125,28.5625 92.5625,27.875 L92.5625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="96" x="111.5" y="30.9238">Singleton</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="276" y1="41" y2="41"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="55.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="194" x="28" y="63.5645">instance: Singleton</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="276" y1="72.2813" y2="72.2813"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="86.4219"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="28" y="94.8457">Singleton()</text><ellipse cx="18" cy="112.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" text-decoration="underline" textLength="243" x="28" y="118.127">getInstance(): Singleton</text></g><!--SRC=[AyxEp2j8B4hCpSbFpavDKKX9JKiipIbnoyyh2SwiIbKmCk1ApaaiBbO8pinBpqajoSzJgEPI00BTwkAIn9BCv5g5p3mWAoyvrGgX1g82pjNG10jemxMafvPuGdLfQ2BhgmK0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Чтобы не писать глобальную переменную
</span>
</li>
<li>
<span>
Проблема гонок во время создания
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Системный логгер</p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_стуктурные_паттерны">5. Стуктурные паттерны</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_общие_сведения_2">5.1. Общие сведения</h1>

<div class="sectionbody">
<div class="paragraph"><p>Определящие структуру класса</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_adapter_адаптер">5.2. Adapter (адаптер)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="251px" preserveAspectRatio="none" style="width:365px;height:251px;background:#FFFFFF;" version="1.1" viewBox="0 0 365 251" width="365px" zoomAndPan="magnify"><defs/><g><!--class ClientInterface--><g id="elem_ClientInterface"><rect codeLine="1" fill="#F1F1F1" height="88.5625" id="ClientInterface" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="176" y="7"/><ellipse cx="192" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M187.1875,19.4531 L187.1875,16.9219 L195.8594,16.9219 L195.8594,19.4531 L192.9688,19.4531 L192.9688,28.9531 L195.8594,28.9531 L195.8594,31.5 L187.1875,31.5 L187.1875,28.9531 L190.0781,28.9531 L190.0781,19.4531 L187.1875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="148" x="207" y="30.9238">ClientInterface</text><line style="stroke:#181818;stroke-width:0.5;" x1="177" x2="357" y1="41" y2="41"/><ellipse cx="187" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="197" y="63.5645">method1()</text><ellipse cx="187" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="197" y="86.8457">method2()</text></g><!--class Adapter--><g id="elem_Adapter"><rect codeLine="6" fill="#F1F1F1" height="88.5625" id="Adapter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="7" y="7"/><ellipse cx="32" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M35.0625,31.0781 Q34.375,31.4375 33.625,31.6094 Q32.875,31.7813 32.0469,31.7813 Q29.0938,31.7813 27.5313,29.8438 Q25.9844,27.8906 25.9844,24.2188 Q25.9844,20.5469 27.5313,18.6094 Q29.0938,16.6563 32.0469,16.6563 Q32.875,16.6563 33.625,16.8281 Q34.3906,17 35.0625,17.3594 L35.0625,20.5625 Q34.3125,19.875 33.6094,19.5625 Q32.9219,19.25 32.1719,19.25 Q30.5938,19.25 29.7813,20.5 Q28.9844,21.75 28.9844,24.2188 Q28.9844,26.6875 29.7813,27.9375 Q30.5938,29.1875 32.1719,29.1875 Q32.9219,29.1875 33.6094,28.875 Q34.3125,28.5625 35.0625,27.875 L35.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="80" x="49" y="30.9238">Adapter</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="140" y1="41" y2="41"/><ellipse cx="18" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="63.5645">method1()</text><ellipse cx="18" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="86.8457">method2()</text></g><!--class Object--><g id="elem_Object"><rect codeLine="11" fill="#F1F1F1" height="88.5625" id="Object" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="11" y="155.57"/><ellipse cx="38.7" cy="172.57" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M41.7625,179.6481 Q41.075,180.0075 40.325,180.1794 Q39.575,180.3513 38.7469,180.3513 Q35.7938,180.3513 34.2313,178.4138 Q32.6844,176.4606 32.6844,172.7888 Q32.6844,169.1169 34.2313,167.1794 Q35.7938,165.2263 38.7469,165.2263 Q39.575,165.2263 40.325,165.3981 Q41.0906,165.57 41.7625,165.9294 L41.7625,169.1325 Q41.0125,168.445 40.3094,168.1325 Q39.6219,167.82 38.8719,167.82 Q37.2938,167.82 36.4813,169.07 Q35.6844,170.32 35.6844,172.7888 Q35.6844,175.2575 36.4813,176.5075 Q37.2938,177.7575 38.8719,177.7575 Q39.6219,177.7575 40.3094,177.445 Q41.0125,177.1325 41.7625,176.445 L41.7625,179.6481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="56.3" y="179.4938">Object</text><line style="stroke:#181818;stroke-width:0.5;" x1="12" x2="136" y1="189.57" y2="189.57"/><ellipse cx="22" cy="206.7106" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="32" y="212.1345">function()</text><ellipse cx="22" cy="229.9919" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="32" y="235.4157">another()</text></g><!--link Adapter to Object--><g id="link_Adapter_Object"><path codeLine="16" d="M74,95.86 C74,114.6 74,124.44 74,143.19 " fill="none" id="Adapter-to-Object" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="74,155.19,78,149.19,74,143.19,70,149.19,74,155.19" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Adapter to ClientInterface--><g id="link_Adapter_ClientInterface"><path codeLine="17" d="M141.47,51.29 C152.92,51.29 146.36,51.29 157.8,51.29 " fill="none" id="Adapter-to-ClientInterface" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="175.8,51.29,157.8,45.29,157.8,57.29,175.8,51.29" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ZOvD2i8m48NtESKi5Ibe3o288BXoqHECoOICJIUbcIxykxi5ZOehP_SztlUOtBBqE60Nast9WIEFOzHT4ctuGb0l3OlIuD4IR2EJwFxDLmFJBJhIaDngDl_6UiAxCJPYph1ns4_I_yBXU2AhfUz7iSf9Ye2IDD3m5CfsLQMNzebkwz-VZGdi2AZhzGoUARhy0000]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Переопределение интерфейса
</span>
</li>
<li>
<span>
Клиент должен выделить отдельно <code>ClientInterface</code>
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p><code>std::queue</code></p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_bridge_мост">5.3. Bridge (мост)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="316px" preserveAspectRatio="none" style="width:676px;height:316px;background:#FFFFFF;" version="1.1" viewBox="0 0 676 316" width="676px" zoomAndPan="magnify"><defs/><g><!--cluster Bridge--><g id="cluster_Bridge"><rect fill="none" height="169.85" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="395" x="275" y="7.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="74" x="435.5" y="27.7813">Bridge</text></g><!--class ComplexAdapter--><g id="elem_ComplexAdapter"><rect codeLine="2" fill="#F1F1F1" height="111.8438" id="ComplexAdapter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="202" x="452" y="49.2168"/><ellipse cx="468" cy="66.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M471.0625,73.2949 Q470.375,73.6543 469.625,73.8262 Q468.875,73.998 468.0469,73.998 Q465.0938,73.998 463.5313,72.0605 Q461.9844,70.1074 461.9844,66.4355 Q461.9844,62.7637 463.5313,60.8262 Q465.0938,58.873 468.0469,58.873 Q468.875,58.873 469.625,59.0449 Q470.3906,59.2168 471.0625,59.5762 L471.0625,62.7793 Q470.3125,62.0918 469.6094,61.7793 Q468.9219,61.4668 468.1719,61.4668 Q466.5938,61.4668 465.7813,62.7168 Q464.9844,63.9668 464.9844,66.4355 Q464.9844,68.9043 465.7813,70.1543 Q466.5938,71.4043 468.1719,71.4043 Q468.9219,71.4043 469.6094,71.0918 Q470.3125,70.7793 471.0625,70.0918 L471.0625,73.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="483" y="73.1406">ComplexAdapter</text><line style="stroke:#181818;stroke-width:0.5;" x1="453" x2="653" y1="83.2168" y2="83.2168"/><ellipse cx="463" cy="100.3574" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="473" y="105.7813">method1()</text><ellipse cx="463" cy="123.6387" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="473" y="129.0625">method2()</text><ellipse cx="463" cy="146.9199" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="473" y="152.3438">method3()</text></g><!--class Target--><g id="elem_Target"><rect codeLine="8" fill="#F1F1F1" height="88.5625" id="Target" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="291" y="60.8568"/><ellipse cx="319.15" cy="77.8568" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M314.3375,73.3099 L314.3375,70.7787 L323.0094,70.7787 L323.0094,73.3099 L320.1188,73.3099 L320.1188,82.8099 L323.0094,82.8099 L323.0094,85.3568 L314.3375,85.3568 L314.3375,82.8099 L317.2281,82.8099 L317.2281,73.3099 L314.3375,73.3099 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="65" x="336.85" y="84.7806">Target</text><line style="stroke:#181818;stroke-width:0.5;" x1="292" x2="416" y1="94.8568" y2="94.8568"/><ellipse cx="302" cy="111.9974" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="312" y="117.4213">function()</text><ellipse cx="302" cy="135.2787" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="312" y="140.7025">another()</text></g><!--class Implementation1--><g id="elem_Implementation1"><rect codeLine="14" fill="#F1F1F1" height="88.5625" id="Implementation1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="7" y="221.0668"/><ellipse cx="23" cy="238.0668" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M26.0625,245.1449 Q25.375,245.5043 24.625,245.6762 Q23.875,245.848 23.0469,245.848 Q20.0938,245.848 18.5313,243.9105 Q16.9844,241.9574 16.9844,238.2855 Q16.9844,234.6137 18.5313,232.6762 Q20.0938,230.723 23.0469,230.723 Q23.875,230.723 24.625,230.8949 Q25.3906,231.0668 26.0625,231.4262 L26.0625,234.6293 Q25.3125,233.9418 24.6094,233.6293 Q23.9219,233.3168 23.1719,233.3168 Q21.5938,233.3168 20.7813,234.5668 Q19.9844,235.8168 19.9844,238.2855 Q19.9844,240.7543 20.7813,242.0043 Q21.5938,243.2543 23.1719,243.2543 Q23.9219,243.2543 24.6094,242.9418 Q25.3125,242.6293 26.0625,241.9418 L26.0625,245.1449 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="38" y="244.9906">Implementation1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="214" y1="255.0668" y2="255.0668"/><ellipse cx="18" cy="272.2074" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="28" y="277.6313">function()</text><ellipse cx="18" cy="295.4887" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="28" y="300.9125">another()</text></g><!--class Implementation2--><g id="elem_Implementation2"><rect codeLine="19" fill="#F1F1F1" height="88.5625" id="Implementation2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="250" y="221.0668"/><ellipse cx="266" cy="238.0668" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M269.0625,245.1449 Q268.375,245.5043 267.625,245.6762 Q266.875,245.848 266.0469,245.848 Q263.0938,245.848 261.5313,243.9105 Q259.9844,241.9574 259.9844,238.2855 Q259.9844,234.6137 261.5313,232.6762 Q263.0938,230.723 266.0469,230.723 Q266.875,230.723 267.625,230.8949 Q268.3906,231.0668 269.0625,231.4262 L269.0625,234.6293 Q268.3125,233.9418 267.6094,233.6293 Q266.9219,233.3168 266.1719,233.3168 Q264.5938,233.3168 263.7813,234.5668 Q262.9844,235.8168 262.9844,238.2855 Q262.9844,240.7543 263.7813,242.0043 Q264.5938,243.2543 266.1719,243.2543 Q266.9219,243.2543 267.6094,242.9418 Q268.3125,242.6293 269.0625,241.9418 L269.0625,245.1449 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="281" y="244.9906">Implementation2</text><line style="stroke:#181818;stroke-width:0.5;" x1="251" x2="457" y1="255.0668" y2="255.0668"/><ellipse cx="261" cy="272.2074" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="271" y="277.6313">function()</text><ellipse cx="261" cy="295.4887" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="271" y="300.9125">another()</text></g><!--class Refinement--><g id="elem_Refinement"><rect codeLine="24" fill="#F1F1F1" height="88.5625" id="Refinement" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="492.5" y="221.0668"/><ellipse cx="508.5" cy="238.0668" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M511.5625,245.1449 Q510.875,245.5043 510.125,245.6762 Q509.375,245.848 508.5469,245.848 Q505.5938,245.848 504.0313,243.9105 Q502.4844,241.9574 502.4844,238.2855 Q502.4844,234.6137 504.0313,232.6762 Q505.5938,230.723 508.5469,230.723 Q509.375,230.723 510.125,230.8949 Q510.8906,231.0668 511.5625,231.4262 L511.5625,234.6293 Q510.8125,233.9418 510.1094,233.6293 Q509.4219,233.3168 508.6719,233.3168 Q507.0938,233.3168 506.2813,234.5668 Q505.4844,235.8168 505.4844,238.2855 Q505.4844,240.7543 506.2813,242.0043 Q507.0938,243.2543 508.6719,243.2543 Q509.4219,243.2543 510.1094,242.9418 Q510.8125,242.6293 511.5625,241.9418 L511.5625,245.1449 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="117" x="523.5" y="244.9906">Refinement</text><line style="stroke:#181818;stroke-width:0.5;" x1="493.5" x2="642.5" y1="255.0668" y2="255.0668"/><ellipse cx="503.5" cy="272.2074" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="513.5" y="277.6313">method4()</text><ellipse cx="503.5" cy="295.4887" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="513.5" y="300.9125">method5()</text></g><!--reverse link Target to ComplexAdapter--><g id="link_Target_ComplexAdapter"><path codeLine="29" d="M429.35,105.1468 C440.75,105.1468 440.14,105.1468 451.53,105.1468 " fill="none" id="Target-backto-ComplexAdapter" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="417.35,105.1468,423.35,109.1468,429.35,105.1468,423.35,101.1468,417.35,105.1468" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link ComplexAdapter to Refinement--><g id="link_ComplexAdapter_Refinement"><path codeLine="30" d="M559.9479,179.3965 C561.7879,198.8165 562.13,202.4268 563.87,220.7568 " fill="none" id="ComplexAdapter-backto-Refinement" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="558.25,161.4768,553.9746,179.9625,565.9211,178.8306,558.25,161.4768" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Target to Implementation1--><g id="link_Target_Implementation1"><path codeLine="31" d="M275.7053,157.1178 C241.1153,179.6378 213.34,197.7168 178.15,220.6268 " fill="none" id="Target-backto-Implementation1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="290.79,147.2968,272.4316,152.0895,278.979,162.146,290.79,147.2968" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Target to Implementation2--><g id="link_Target_Implementation2"><path codeLine="32" d="M354,167.7868 C354,189.8368 354,198.5068 354,220.5668 " fill="none" id="Target-backto-Implementation2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="354,149.7868,348,167.7868,360,167.7868,354,149.7868" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[bP3DIWGn383lVOeSNMN07VKgk8BWLNs1qAOpPTjqw6HW_NjtPxPT6IiUp2KqwVUHPDmx7Z1Xy57loO0XYvENXyZoxDu8sakLI0jovmbsoPcEu5t17DhZEC9z38Edmvt1GIYLrX8NWQIFPdksgKljxz9LANsgOt8ykongWXTC7SbQQoVMuYAl9SXHUahVabcJftjSXWl4WWkoBPxQiUB_8Dj_a4za7H_H4vHtl3un-NcJcUf-ZM_Eoz9g9MgcvkEskhMgbykV2bpF_wEfUcS8A0po2jQHD-CN]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Усложнённый адаптер (два адаптера)
</span>
</li>
<li>
<span>
Клиент использует <code>ComplexAdapter</code> или одно из его уточнений <code>Refinement</code>
</span>
</li>
<li>
<span>
Одновременное развитие <code>ComplexAdapter</code> и <code>Target</code>
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Приложение для отрисовки компонент использует абстракцию с примитивами, которые, в свою очередь,
рисуются благодаря интерфейсу графического менеджера. Последний может быть реализован по-разному
(OpenGL, например)</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_composite_компоновщик">5.4. Composite (компоновщик)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="309px" preserveAspectRatio="none" style="width:749px;height:309px;background:#FFFFFF;" version="1.1" viewBox="0 0 749 309" width="749px" zoomAndPan="magnify"><defs/><g><!--class SomeInterface--><g id="elem_SomeInterface"><rect codeLine="1" fill="#F1F1F1" height="88.5625" id="SomeInterface" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="562" y="22.8568"/><ellipse cx="578" cy="39.8568" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M573.1875,35.3099 L573.1875,32.7787 L581.8594,32.7787 L581.8594,35.3099 L578.9688,35.3099 L578.9688,44.8099 L581.8594,44.8099 L581.8594,47.3568 L573.1875,47.3568 L573.1875,44.8099 L576.0781,44.8099 L576.0781,35.3099 L573.1875,35.3099 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="146" x="593" y="46.7806">SomeInterface</text><line style="stroke:#181818;stroke-width:0.5;" x1="563" x2="741" y1="56.8568" y2="56.8568"/><ellipse cx="573" cy="73.9974" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="583" y="79.4212">method1()</text><ellipse cx="573" cy="97.2787" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="583" y="102.7025">method2()</text></g><!--class Object--><g id="elem_Object"><rect codeLine="6" fill="#F1F1F1" height="119.8438" id="Object" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="585" y="183.0668"/><ellipse cx="616.3" cy="200.0668" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M619.3625,207.1449 Q618.675,207.5043 617.925,207.6762 Q617.175,207.848 616.3469,207.848 Q613.3938,207.848 611.8313,205.9105 Q610.2844,203.9574 610.2844,200.2855 Q610.2844,196.6137 611.8313,194.6762 Q613.3938,192.723 616.3469,192.723 Q617.175,192.723 617.925,192.8949 Q618.6906,193.0668 619.3625,193.4262 L619.3625,196.6293 Q618.6125,195.9418 617.9094,195.6293 Q617.2219,195.3168 616.4719,195.3168 Q614.8938,195.3168 614.0813,196.5668 Q613.2844,197.8168 613.2844,200.2855 Q613.2844,202.7543 614.0813,204.0043 Q614.8938,205.2543 616.4719,205.2543 Q617.2219,205.2543 617.9094,204.9418 Q618.6125,204.6293 619.3625,203.9418 L619.3625,207.1449 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="634.7" y="206.9906">Object</text><line style="stroke:#181818;stroke-width:0.5;" x1="586" x2="718" y1="217.0668" y2="217.0668"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="591" y="239.6313">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="586" x2="718" y1="248.348" y2="248.348"/><ellipse cx="596" cy="265.4887" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="606" y="270.9125">method1()</text><ellipse cx="596" cy="288.7699" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="606" y="294.1938">method2()</text></g><!--class Composition--><g id="elem_Composition"><rect codeLine="12" fill="#F1F1F1" height="119.8438" id="Composition" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="274" x="267" y="183.0668"/><ellipse cx="336.5" cy="200.0668" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M339.5625,207.1449 Q338.875,207.5043 338.125,207.6762 Q337.375,207.848 336.5469,207.848 Q333.5938,207.848 332.0313,205.9105 Q330.4844,203.9574 330.4844,200.2855 Q330.4844,196.6137 332.0313,194.6762 Q333.5938,192.723 336.5469,192.723 Q337.375,192.723 338.125,192.8949 Q338.8906,193.0668 339.5625,193.4262 L339.5625,196.6293 Q338.8125,195.9418 338.1094,195.6293 Q337.4219,195.3168 336.6719,195.3168 Q335.0938,195.3168 334.2813,196.5668 Q333.4844,197.8168 333.4844,200.2855 Q333.4844,202.7543 334.2813,204.0043 Q335.0938,205.2543 336.6719,205.2543 Q337.4219,205.2543 338.1094,204.9418 Q338.8125,204.6293 339.5625,203.9418 L339.5625,207.1449 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="358.5" y="206.9906">Composition</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="540" y1="217.0668" y2="217.0668"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="275" y="231.2074"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="247" x="288" y="239.6313">objects: SomeInterface[]</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="540" y1="248.348" y2="248.348"/><ellipse cx="278" cy="265.4887" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="288" y="270.9125">method1()</text><ellipse cx="278" cy="288.7699" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="288" y="294.1938">method2()</text></g><!--class vector--><g id="elem_vector"><rect codeLine="18" fill="#F1F1F1" height="111.8438" id="vector" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="263" x="263.5" y="11.2168"/><ellipse cx="335" cy="28.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M338.0625,35.2949 Q337.375,35.6543 336.625,35.8262 Q335.875,35.998 335.0469,35.998 Q332.0938,35.998 330.5313,34.0605 Q328.9844,32.1074 328.9844,28.4355 Q328.9844,24.7637 330.5313,22.8262 Q332.0938,20.873 335.0469,20.873 Q335.875,20.873 336.625,21.0449 Q337.3906,21.2168 338.0625,21.5762 L338.0625,24.7793 Q337.3125,24.0918 336.6094,23.7793 Q335.9219,23.4668 335.1719,23.4668 Q333.5938,23.4668 332.7813,24.7168 Q331.9844,25.9668 331.9844,28.4355 Q331.9844,30.9043 332.7813,32.1543 Q333.5938,33.4043 335.1719,33.4043 Q335.9219,33.4043 336.6094,33.0918 Q337.3125,32.7793 338.0625,32.0918 L338.0625,35.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="62" x="357" y="35.1406">vector</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="47" x="482.5" y="8.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="45" x="483.5" y="27.7813">type</text><line style="stroke:#181818;stroke-width:0.5;" x1="264.5" x2="525.5" y1="45.2168" y2="45.2168"/><ellipse cx="274.5" cy="62.3574" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="189" x="284.5" y="67.7813">operator[](): type&amp;</text><ellipse cx="274.5" cy="85.6387" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="236" x="284.5" y="91.0625">begin(): vector::iterator</text><ellipse cx="274.5" cy="108.9199" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="232" x="284.5" y="114.3438">end(): vector::interface</text></g><path d="M6,209.7068 L6,266.2693 A0,0 0 0 0 6,266.2693 L232,266.2693 A0,0 0 0 0 232,266.2693 L232,241.988 L271,263.9887 L232,233.988 L232,219.7068 L222,209.7068 L6,209.7068 A0,0 0 0 0 6,209.7068 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M222,209.7068 L222,219.7068 L232,219.7068 L222,209.7068 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="205" x="12" y="233.2713">for object in objects:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="175" x="36" y="256.5525">object.method1()</text><!--reverse link SomeInterface to Object--><g id="link_SomeInterface_Object"><path codeLine="24" d="M652,129.5568 C652,151.0868 652,159.3968 652,182.7368 " fill="none" id="SomeInterface-backto-Object" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="652,111.5568,646,129.5568,658,129.5568,652,111.5568" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link SomeInterface to Composition--><g id="link_SomeInterface_Composition"><path codeLine="25" d="M574.999,122.1165 C544.289,143.6365 521.55,159.5868 488.31,182.8868 " fill="none" id="SomeInterface-backto-Composition" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="589.74,111.7868,571.5558,117.2029,578.4423,127.0302,589.74,111.7868" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link vector to Composition--><g id="link_vector_Composition"><path codeLine="26" d="M398.7772,141.1229 C399.7572,160.1229 399.94,163.5068 400.94,182.8268 " fill="none" id="vector-backto-Composition" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="397.85,123.1468,392.7852,141.432,404.7692,140.8138,397.85,123.1468" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ZL2xRiCm3Dpr5PoA18MDDADGP2aGe5E7Z446nQ8QDP8eM4o0zF7lbIExjJTpEnwFv5qwsn1LgxoZvemQD1frSRobm3lxYR1U2HiOMwCQX1rvVFr3Nm9oFNha4-cdnN8Crnd-2D4ubHAy7J-muNw-hkkvkXVoaP9bIw4NLtHVbUJqbVrXxifhLbCBptoBk1aSKCHMvVR-i5XAwAY7GXpntOQkLsHIMYwJXSQW9-JmJdUkzrnTgk_Dz5anjZMFBnU42CG83Wq3cN4wKawTcson90Ksm93PdUggDEf_JJO2tMuXJbOZe8zy0sFHwVGB]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Ведёт себя как один объект
</span>
</li>
<li>
<span>
Все вызовы делегирует хранящимся в нём объектам
</span>
</li>
<li>
<span>
Иногда может агрегировать объекты
</span>
</li>
<li>
<span>
Хранимые объекты должны быть того же типа <code>SomeInterface</code>, что и компоновщик
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Группировка объектов в графическом редакторе</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_decorator_декоратор">5.5. Decorator (декоратор)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="446px" preserveAspectRatio="none" style="width:545px;height:446px;background:#FFFFFF;" version="1.1" viewBox="0 0 545 446" width="545px" zoomAndPan="magnify"><defs/><g><!--class Component--><g id="elem_Component"><rect codeLine="3" fill="#F1F1F1" height="65.2813" id="Component" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="187" y="22.64"/><ellipse cx="203" cy="39.64" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M198.1875,35.0931 L198.1875,32.5619 L206.8594,32.5619 L206.8594,35.0931 L203.9688,35.0931 L203.9688,44.5931 L206.8594,44.5931 L206.8594,47.14 L198.1875,47.14 L198.1875,44.5931 L201.0781,44.5931 L201.0781,35.0931 L198.1875,35.0931 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="117" x="218" y="46.5638">Component</text><line style="stroke:#181818;stroke-width:0.5;" x1="188" x2="337" y1="56.64" y2="56.64"/><ellipse cx="198" cy="73.7806" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="208" y="79.2045">method()</text></g><!--class Decorator--><g id="elem_Decorator"><rect codeLine="7" fill="#F1F1F1" height="119.8438" id="Decorator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="246" x="236.5" y="163.56"/><ellipse cx="306" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M309.0625,187.6381 Q308.375,187.9975 307.625,188.1694 Q306.875,188.3413 306.0469,188.3413 Q303.0938,188.3413 301.5313,186.4038 Q299.9844,184.4506 299.9844,180.7788 Q299.9844,177.1069 301.5313,175.1694 Q303.0938,173.2163 306.0469,173.2163 Q306.875,173.2163 307.625,173.3881 Q308.3906,173.56 309.0625,173.9194 L309.0625,177.1225 Q308.3125,176.435 307.6094,176.1225 Q306.9219,175.81 306.1719,175.81 Q304.5938,175.81 303.7813,177.06 Q302.9844,178.31 302.9844,180.7788 Q302.9844,183.2475 303.7813,184.4975 Q304.5938,185.7475 306.1719,185.7475 Q306.9219,185.7475 307.6094,185.435 Q308.3125,185.1225 309.0625,184.435 L309.0625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="328" y="187.4838">Decorator</text><line style="stroke:#181818;stroke-width:0.5;" x1="237.5" x2="481.5" y1="197.56" y2="197.56"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="244.5" y="211.7006"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="257.5" y="220.1245">wrapee: Component&amp;</text><line style="stroke:#181818;stroke-width:0.5;" x1="237.5" x2="481.5" y1="228.8413" y2="228.8413"/><ellipse cx="247.5" cy="245.9819" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="257.5" y="251.4057">method()</text><ellipse cx="247.5" cy="269.2631" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="257.5" y="274.687">decorate()</text></g><!--class ComponentA--><g id="elem_ComponentA"><rect codeLine="13" fill="#F1F1F1" height="96.5625" id="ComponentA" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="373" y="7"/><ellipse cx="389" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M392.0625,31.0781 Q391.375,31.4375 390.625,31.6094 Q389.875,31.7813 389.0469,31.7813 Q386.0938,31.7813 384.5313,29.8438 Q382.9844,27.8906 382.9844,24.2188 Q382.9844,20.5469 384.5313,18.6094 Q386.0938,16.6563 389.0469,16.6563 Q389.875,16.6563 390.625,16.8281 Q391.3906,17 392.0625,17.3594 L392.0625,20.5625 Q391.3125,19.875 390.6094,19.5625 Q389.9219,19.25 389.1719,19.25 Q387.5938,19.25 386.7813,20.5 Q385.9844,21.75 385.9844,24.2188 Q385.9844,26.6875 386.7813,27.9375 Q387.5938,29.1875 389.1719,29.1875 Q389.9219,29.1875 390.6094,28.875 Q391.3125,28.5625 392.0625,27.875 L392.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="404" y="30.9238">ComponentA</text><line style="stroke:#181818;stroke-width:0.5;" x1="374" x2="537" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="379" y="63.5645">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="374" x2="537" y1="72.2813" y2="72.2813"/><ellipse cx="384" cy="89.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="394" y="94.8457">method()</text></g><!--class DecoratorA--><g id="elem_DecoratorA"><rect codeLine="18" fill="#F1F1F1" height="96.5625" id="DecoratorA" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="195.5" y="343.41"/><ellipse cx="211.5" cy="360.41" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M214.5625,367.4881 Q213.875,367.8475 213.125,368.0194 Q212.375,368.1913 211.5469,368.1913 Q208.5938,368.1913 207.0313,366.2538 Q205.4844,364.3006 205.4844,360.6288 Q205.4844,356.9569 207.0313,355.0194 Q208.5938,353.0663 211.5469,353.0663 Q212.375,353.0663 213.125,353.2381 Q213.8906,353.41 214.5625,353.7694 L214.5625,356.9725 Q213.8125,356.285 213.1094,355.9725 Q212.4219,355.66 211.6719,355.66 Q210.0938,355.66 209.2813,356.91 Q208.4844,358.16 208.4844,360.6288 Q208.4844,363.0975 209.2813,364.3475 Q210.0938,365.5975 211.6719,365.5975 Q212.4219,365.5975 213.1094,365.285 Q213.8125,364.9725 214.5625,364.285 L214.5625,367.4881 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="226.5" y="367.3338">DecoratorA</text><line style="stroke:#181818;stroke-width:0.5;" x1="196.5" x2="340.5" y1="377.41" y2="377.41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="201.5" y="399.9745">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="196.5" x2="340.5" y1="408.6913" y2="408.6913"/><ellipse cx="206.5" cy="425.8319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="216.5" y="431.2557">decorate()</text></g><!--class DecoratorB--><g id="elem_DecoratorB"><rect codeLine="23" fill="#F1F1F1" height="96.5625" id="DecoratorB" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="376.5" y="343.41"/><ellipse cx="392.5" cy="360.41" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M395.5625,367.4881 Q394.875,367.8475 394.125,368.0194 Q393.375,368.1913 392.5469,368.1913 Q389.5938,368.1913 388.0313,366.2538 Q386.4844,364.3006 386.4844,360.6288 Q386.4844,356.9569 388.0313,355.0194 Q389.5938,353.0663 392.5469,353.0663 Q393.375,353.0663 394.125,353.2381 Q394.8906,353.41 395.5625,353.7694 L395.5625,356.9725 Q394.8125,356.285 394.1094,355.9725 Q393.4219,355.66 392.6719,355.66 Q391.0938,355.66 390.2813,356.91 Q389.4844,358.16 389.4844,360.6288 Q389.4844,363.0975 390.2813,364.3475 Q391.0938,365.5975 392.6719,365.5975 Q393.4219,365.5975 394.1094,365.285 Q394.8125,364.9725 395.5625,364.285 L395.5625,367.4881 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="407.5" y="367.3338">DecoratorB</text><line style="stroke:#181818;stroke-width:0.5;" x1="377.5" x2="521.5" y1="377.41" y2="377.41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="382.5" y="399.9745">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="377.5" x2="521.5" y1="408.6913" y2="408.6913"/><ellipse cx="387.5" cy="425.8319" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="397.5" y="431.2557">decorate()</text></g><path d="M6,190.2 L6,246.7625 A0,0 0 0 0 6,246.7625 L201,246.7625 A0,0 0 0 0 201,246.7625 L201,222.4813 L240.5,244.4819 L201,214.4813 L201,200.2 L191,190.2 L6,190.2 A0,0 0 0 0 6,190.2 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M191,190.2 L191,200.2 L201,200.2 L191,190.2 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="12" y="213.7645">wrapee.method()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="12" y="237.0457">decorate()</text><!--reverse link Component to Decorator--><g id="link_Component_Decorator"><path codeLine="28" d="M287.25,106.11 C287.25,127.43 287.25,137.86 287.25,163.16 " fill="none" id="Component-backto-Decorator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="287.25,88.11,281.25,106.11,293.25,106.11,287.25,88.11" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Component to ComponentA--><g id="link_Component_ComponentA"><path codeLine="29" d="M356.22,55.97 C367.52,55.97 361.22,55.97 372.66,55.97 " fill="none" id="Component-backto-ComponentA" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="338.22,55.97,356.22,61.97,356.22,49.97,338.22,55.97" style="stroke:#181818;stroke-width:1.0;"/></g><!--link ComponentA to Decorator--><g id="link_ComponentA_Decorator"><path codeLine="30" d="M427.75,103.93 C427.75,122.47 427.75,131.81 427.75,151.29 " fill="none" id="ComponentA-to-Decorator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="427.75,163.29,431.75,157.29,427.75,151.29,423.75,157.29,427.75,163.29" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Decorator to DecoratorA--><g id="link_Decorator_DecoratorA"><path codeLine="32" d="M289,301.74 C289,321.15 289,324.42 289,342.91 " fill="none" id="Decorator-backto-DecoratorA" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="289,283.74,283,301.74,295,301.74,289,283.74" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Decorator to DecoratorB--><g id="link_Decorator_DecoratorB"><path codeLine="33" d="M429.5,301.74 C429.5,321.15 429.5,324.42 429.5,342.91 " fill="none" id="Decorator-backto-DecoratorB" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="429.5,283.74,423.5,301.74,435.5,301.74,429.5,283.74" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ZP11JWCn34NtFeLN28GoGYndWTHISG5E44r-rAYPE4fIeL9wTqexD6b5HREBxVU_l_FAXQYJ7hqCAnWsi7hjovk4yku-mSzFb7z7sBk0iebWIMKfH2uK9Ai7yAkCKG92uItn_ZsEs4-O-mVQ4GrUvymB399qaJIDg8-a8z1Nzku2FVpC4KChTI9cazRMEdYpuwxh_hM_olpbTABcjr4rf5ghhvUwAJKxAt-zfQHwDdApIQ_sciqkMnIaW3riOR6rtlTdbpsUlpkhDM4G3F_e42sT0MECPSE7yFaR]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Повторяет интерфейс оборачиваемого объекта
</span>
</li>
<li>
<span>
Все вызовы делегируются оборачиваемым объектам, вызывая дополнительный код до или после операций объекта
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Рисование рамки вокруг символов, умляуты на глифах</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_facade_фасад">5.6. Facade (фасад)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="282px" preserveAspectRatio="none" style="width:564px;height:282px;background:#FFFFFF;" version="1.1" viewBox="0 0 564 282" width="564px" zoomAndPan="magnify"><defs/><g><!--class Facade--><g id="elem_Facade"><rect codeLine="1" fill="#F1F1F1" height="119.8438" id="Facade" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="215" y="155.57"/><ellipse cx="243.6" cy="172.57" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M246.6625,179.6481 Q245.975,180.0075 245.225,180.1794 Q244.475,180.3513 243.6469,180.3513 Q240.6938,180.3513 239.1313,178.4138 Q237.5844,176.4606 237.5844,172.7888 Q237.5844,169.1169 239.1313,167.1794 Q240.6938,165.2263 243.6469,165.2263 Q244.475,165.2263 245.225,165.3981 Q245.9906,165.57 246.6625,165.9294 L246.6625,169.1325 Q245.9125,168.445 245.2094,168.1325 Q244.5219,167.82 243.7719,167.82 Q242.1938,167.82 241.3813,169.07 Q240.5844,170.32 240.5844,172.7888 Q240.5844,175.2575 241.3813,176.5075 Q242.1938,177.7575 243.7719,177.7575 Q244.5219,177.7575 245.2094,177.445 Q245.9125,177.1325 246.6625,176.445 L246.6625,179.6481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="261.4" y="179.4938">Facade</text><line style="stroke:#181818;stroke-width:0.5;" x1="216" x2="348" y1="189.57" y2="189.57"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="221" y="212.1345">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="216" x2="348" y1="220.8513" y2="220.8513"/><ellipse cx="226" cy="237.9919" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="236" y="243.4157">method1()</text><ellipse cx="226" cy="261.2731" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="236" y="266.697">method2()</text></g><!--class SubSystem1--><g id="elem_SubSystem1"><rect codeLine="7" fill="#F1F1F1" height="88.5625" id="SubSystem1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="7" y="7"/><ellipse cx="23" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M26.0625,31.0781 Q25.375,31.4375 24.625,31.6094 Q23.875,31.7813 23.0469,31.7813 Q20.0938,31.7813 18.5313,29.8438 Q16.9844,27.8906 16.9844,24.2188 Q16.9844,20.5469 18.5313,18.6094 Q20.0938,16.6563 23.0469,16.6563 Q23.875,16.6563 24.625,16.8281 Q25.3906,17 26.0625,17.3594 L26.0625,20.5625 Q25.3125,19.875 24.6094,19.5625 Q23.9219,19.25 23.1719,19.25 Q21.5938,19.25 20.7813,20.5 Q19.9844,21.75 19.9844,24.2188 Q19.9844,26.6875 20.7813,27.9375 Q21.5938,29.1875 23.1719,29.1875 Q23.9219,29.1875 24.6094,28.875 Q25.3125,28.5625 26.0625,27.875 L26.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="38" y="30.9238">SubSystem1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="166" y1="41" y2="41"/><ellipse cx="18" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="60" x="28" y="63.5645">func()</text><ellipse cx="18" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="28" y="86.8457">another()</text></g><!--class SubSystem2--><g id="elem_SubSystem2"><rect codeLine="12" fill="#F1F1F1" height="88.5625" id="SubSystem2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="202" y="7"/><ellipse cx="218" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M221.0625,31.0781 Q220.375,31.4375 219.625,31.6094 Q218.875,31.7813 218.0469,31.7813 Q215.0938,31.7813 213.5313,29.8438 Q211.9844,27.8906 211.9844,24.2188 Q211.9844,20.5469 213.5313,18.6094 Q215.0938,16.6563 218.0469,16.6563 Q218.875,16.6563 219.625,16.8281 Q220.3906,17 221.0625,17.3594 L221.0625,20.5625 Q220.3125,19.875 219.6094,19.5625 Q218.9219,19.25 218.1719,19.25 Q216.5938,19.25 215.7813,20.5 Q214.9844,21.75 214.9844,24.2188 Q214.9844,26.6875 215.7813,27.9375 Q216.5938,29.1875 218.1719,29.1875 Q218.9219,29.1875 219.6094,28.875 Q220.3125,28.5625 221.0625,27.875 L221.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="233" y="30.9238">SubSystem2</text><line style="stroke:#181818;stroke-width:0.5;" x1="203" x2="361" y1="41" y2="41"/><ellipse cx="213" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="223" y="63.5645">do()</text><ellipse cx="213" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="223" y="86.8457">make()</text></g><!--class SubSystem3--><g id="elem_SubSystem3"><rect codeLine="17" fill="#F1F1F1" height="65.2813" id="SubSystem3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="397" y="18.64"/><ellipse cx="413" cy="35.64" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M416.0625,42.7181 Q415.375,43.0775 414.625,43.2494 Q413.875,43.4213 413.0469,43.4213 Q410.0938,43.4213 408.5313,41.4838 Q406.9844,39.5306 406.9844,35.8588 Q406.9844,32.1869 408.5313,30.2494 Q410.0938,28.2963 413.0469,28.2963 Q413.875,28.2963 414.625,28.4681 Q415.3906,28.64 416.0625,28.9994 L416.0625,32.2025 Q415.3125,31.515 414.6094,31.2025 Q413.9219,30.89 413.1719,30.89 Q411.5938,30.89 410.7813,32.14 Q409.9844,33.39 409.9844,35.8588 Q409.9844,38.3275 410.7813,39.5775 Q411.5938,40.8275 413.1719,40.8275 Q413.9219,40.8275 414.6094,40.515 Q415.3125,40.2025 416.0625,39.515 L416.0625,42.7181 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="428" y="42.5638">SubSystem3</text><line style="stroke:#181818;stroke-width:0.5;" x1="398" x2="556" y1="52.64" y2="52.64"/><ellipse cx="408" cy="69.7806" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="418" y="75.2045">some()</text></g><!--link SubSystem1 to Facade--><g id="link_SubSystem1_Facade"><path codeLine="21" d="M139.51,95.97 C162.64,115.2 180.8658,130.3544 205.4658,150.8244 " fill="none" id="SubSystem1-to-Facade" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="214.69,158.5,212.6364,151.5875,205.4658,150.8244,207.5194,157.7369,214.69,158.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--link SubSystem2 to Facade--><g id="link_SubSystem2_Facade"><path codeLine="22" d="M282,95.75 C282,114.05 282,123.63 282,143.35 " fill="none" id="SubSystem2-to-Facade" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="282,155.35,286,149.35,282,143.35,278,149.35,282,155.35" style="stroke:#181818;stroke-width:1.0;"/></g><!--link SubSystem3 to Facade--><g id="link_SubSystem3_Facade"><path codeLine="23" d="M438.47,84.33 C413.06,105.47 388.2952,126.0657 358.4952,150.8557 " fill="none" id="SubSystem3-to-Facade" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="349.27,158.53,356.4407,157.7679,358.4952,150.8557,351.3245,151.6178,349.27,158.53" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ROzT2eCm48JVSueyjXMbwXsyW2TOiniCvaTCVB3YtHiabXJSjndccsNyfEmC2nZjn4J8aIIiEdJEXbvzY3Tl9ZHuppiGWCHtnkFjKf76ewggKnQ6mkYmVZnpsKHvi8Jtwz1lFf2fKqKXLoik0AmB8ostG7C1w7xzCD5jjhsotfcKo1wNMBxI3fRLtzhjdyr65RUJcSF6p-d-2m00]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Фасад необходим для упрощения использования несколькими системами классов или фреймворков
</span>
</li>
<li>
<span>
Реализует новый интерфейс
</span>
</li>
<li>
<span>
Содержит в себе много различных классов или подсистем
</span>
</li>
<li>
<span>
Частный случай фасада&#8201;&#8212;&#8201;адаптер
</span>
</li>
<li>
<span>
Излишняя осведомлённость обо всех объектах
</span>
</li>
<li>
<span>
Склонен становиться "божественным объектом"
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Почти все объекты вокруг</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_flyweight_легковес">5.7. Flyweight (легковес)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="462px" preserveAspectRatio="none" style="width:611px;height:462px;background:#FFFFFF;" version="1.1" viewBox="0 0 611 462" width="611px" zoomAndPan="magnify"><defs/><g><!--class Client--><g id="elem_Client"><rect codeLine="1" fill="#F1F1F1" height="88.5625" id="Client" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="312" y="7"/><ellipse cx="340.6" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M343.6625,31.0781 Q342.975,31.4375 342.225,31.6094 Q341.475,31.7813 340.6469,31.7813 Q337.6938,31.7813 336.1313,29.8438 Q334.5844,27.8906 334.5844,24.2188 Q334.5844,20.5469 336.1313,18.6094 Q337.6938,16.6563 340.6469,16.6563 Q341.475,16.6563 342.225,16.8281 Q342.9906,17 343.6625,17.3594 L343.6625,20.5625 Q342.9125,19.875 342.2094,19.5625 Q341.5219,19.25 340.7719,19.25 Q339.1938,19.25 338.3813,20.5 Q337.5844,21.75 337.5844,24.2188 Q337.5844,26.6875 338.3813,27.9375 Q339.1938,29.1875 340.7719,29.1875 Q341.5219,29.1875 342.2094,28.875 Q342.9125,28.5625 343.6625,27.875 L343.6625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="358.4" y="30.9238">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="432" y1="41" y2="41"/><ellipse cx="323" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="333" y="63.5645">some()</text><ellipse cx="323" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="333" y="86.8457">method()</text></g><!--class VeryComplexObject--><g id="elem_VeryComplexObject"><rect codeLine="6" fill="#F1F1F1" height="143.125" id="VeryComplexObject" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="233" x="256" y="155.56"/><ellipse cx="272" cy="172.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M275.0625,179.6381 Q274.375,179.9975 273.625,180.1694 Q272.875,180.3413 272.0469,180.3413 Q269.0938,180.3413 267.5313,178.4038 Q265.9844,176.4506 265.9844,172.7788 Q265.9844,169.1069 267.5313,167.1694 Q269.0938,165.2163 272.0469,165.2163 Q272.875,165.2163 273.625,165.3881 Q274.3906,165.56 275.0625,165.9194 L275.0625,169.1225 Q274.3125,168.435 273.6094,168.1225 Q272.9219,167.81 272.1719,167.81 Q270.5938,167.81 269.7813,169.06 Q268.9844,170.31 268.9844,172.7788 Q268.9844,175.2475 269.7813,176.4975 Q270.5938,177.7475 272.1719,177.7475 Q272.9219,177.7475 273.6094,177.435 Q274.3125,177.1225 275.0625,176.435 L275.0625,179.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="199" x="287" y="179.4838">VeryComplexObject</text><line style="stroke:#181818;stroke-width:0.5;" x1="257" x2="488" y1="189.56" y2="189.56"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="203.7006"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="155" x="277" y="212.1245">obj1: Flyweight</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="226.9819"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="105" x="277" y="235.4057">obj2: Obj2</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="264" y="250.2631"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="105" x="277" y="258.687">obj3: Obj3</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="277" y="281.9682">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="257" x2="488" y1="290.685" y2="290.685"/></g><!--class Flyweight--><g id="elem_Flyweight"><rect codeLine="13" fill="#F1F1F1" height="96.5625" id="Flyweight" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="457" y="358.69"/><ellipse cx="479.75" cy="375.69" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M482.8125,382.7681 Q482.125,383.1275 481.375,383.2994 Q480.625,383.4713 479.7969,383.4713 Q476.8438,383.4713 475.2813,381.5338 Q473.7344,379.5806 473.7344,375.9088 Q473.7344,372.2369 475.2813,370.2994 Q476.8438,368.3463 479.7969,368.3463 Q480.625,368.3463 481.375,368.5181 Q482.1406,368.69 482.8125,369.0494 L482.8125,372.2525 Q482.0625,371.565 481.3594,371.2525 Q480.6719,370.94 479.9219,370.94 Q478.3438,370.94 477.5313,372.19 Q476.7344,373.44 476.7344,375.9088 Q476.7344,378.3775 477.5313,379.6275 Q478.3438,380.8775 479.9219,380.8775 Q480.6719,380.8775 481.3594,380.565 Q482.0625,380.2525 482.8125,379.565 L482.8125,382.7681 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="496.25" y="382.6138">Flyweight</text><line style="stroke:#181818;stroke-width:0.5;" x1="458" x2="603" y1="392.69" y2="392.69"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="465" y="406.8306"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120" x="478" y="415.2545">cache: Obj1</text><line style="stroke:#181818;stroke-width:0.5;" x1="458" x2="603" y1="423.9713" y2="423.9713"/><ellipse cx="468" cy="441.1119" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="478" y="446.5357">operation()</text></g><!--class AbstractFactory--><g id="elem_AbstractFactory"><rect codeLine="18" fill="#F1F1F1" height="96.5625" id="AbstractFactory" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="415" x="7" y="358.69"/><ellipse cx="131" cy="375.69" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M134.0625,382.7681 Q133.375,383.1275 132.625,383.2994 Q131.875,383.4713 131.0469,383.4713 Q128.0938,383.4713 126.5313,381.5338 Q124.9844,379.5806 124.9844,375.9088 Q124.9844,372.2369 126.5313,370.2994 Q128.0938,368.3463 131.0469,368.3463 Q131.875,368.3463 132.625,368.5181 Q133.3906,368.69 134.0625,369.0494 L134.0625,372.2525 Q133.3125,371.565 132.6094,371.2525 Q131.9219,370.94 131.1719,370.94 Q129.5938,370.94 128.7813,372.19 Q127.9844,373.44 127.9844,375.9088 Q127.9844,378.3775 128.7813,379.6275 Q129.5938,380.8775 131.1719,380.8775 Q131.9219,380.8775 132.6094,380.565 Q133.3125,380.2525 134.0625,379.565 L134.0625,382.7681 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="158" x="153" y="382.6138">AbstractFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="421" y1="392.69" y2="392.69"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="406.8306"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="388" x="28" y="415.2545">objects: map&lt;some types, Flyweight&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="421" y1="423.9713" y2="423.9713"/><ellipse cx="18" cy="441.1119" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="355" x="28" y="446.5357">getObject(some types): Flyweight&amp;</text></g><!--link Client to VeryComplexObject--><g id="link_Client_VeryComplexObject"><path codeLine="23" d="M372.5,95.7 C372.5,113.7 372.5,123.06 372.5,143.22 " fill="none" id="Client-to-VeryComplexObject" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="372.5,155.22,376.5,149.22,372.5,143.22,368.5,149.22,372.5,155.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="272.9727" y="142.8486">100500+</text></g><!--link VeryComplexObject to AbstractFactory--><g id="link_VeryComplexObject_AbstractFactory"><path codeLine="24" d="M309.37,299.18 C291.75,319.01 281.0008,331.1197 264.8908,349.2497 " fill="none" id="VeryComplexObject-to-AbstractFactory" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="256.92,358.22,263.8955,356.3918,264.8908,349.2497,257.9153,351.0779,256.92,358.22" style="stroke:#181818;stroke-width:1.0;"/></g><!--link AbstractFactory to Flyweight--><g id="link_AbstractFactory_Flyweight"><path codeLine="25" d="M422.49,406.97 C433.88,406.97 433.28,406.97 444.67,406.97 " fill="none" id="AbstractFactory-to-Flyweight" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="456.67,406.97,450.67,402.97,444.67,406.97,450.67,410.97,456.67,406.97" style="stroke:#181818;stroke-width:1.0;"/></g><!--link VeryComplexObject to Flyweight--><g id="link_VeryComplexObject_Flyweight"><path codeLine="26" d="M435.63,299.18 C453.25,319.01 463.9992,331.1197 480.1092,349.2497 " fill="none" id="VeryComplexObject-to-Flyweight" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="488.08,358.22,487.0847,351.0779,480.1092,349.2497,481.1045,356.3918,488.08,358.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="56" x="423.4271" y="345.9768">~100</text></g><!--SRC=[PL11QiCm4Bph5OiF8MagOplqOaeX17pjeT2xB6zY9P8b99NM3UdRgzY9RMA1G2DcPsR7dKHZc6LAQdx22YhSio_f2ztu3_6Ba2M4I-OSxAJ0niEPG3XhfnKkL_rReQzr5T25tBYVQDkTLaRYptjvH7uVexeyfZaKilr6SQZzy9db48ZPW3STtdJul1SegqiSnwF1e70NvepNs0sbVIXjq38lT3FDjIsTjupx8bnjsqcgaD7be9XvlMu6lZNedaURjrxqWBxVPpcoLfDz5bUhMr6KFa6K9ibBagoZUIDatX6b-Z4XUKnCRP0T-vkBn76m_Gk-qOH6Qb4Xe3A-XQvDzmy0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
<code>Flyweight</code> какая-либо повторяющая сущность объектов
</span>
</li>
<li>
<span>
Экономия памяти
</span>
</li>
<li>
<span>
Разделение объекта на более маленькие куски
</span>
</li>
<li>
<span>
Не подходит для уникальных объектов
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Пвторяющиеся элементы объектов в играх</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_proxy_заместитель">5.8. Proxy (заместитель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="282px" preserveAspectRatio="none" style="width:341px;height:282px;background:#FFFFFF;" version="1.1" viewBox="0 0 341 282" width="341px" zoomAndPan="magnify"><defs/><g><!--class IObject--><g id="elem_IObject"><rect codeLine="1" fill="#F1F1F1" height="88.5625" id="IObject" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="122" y="7"/><ellipse cx="144.75" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M139.9375,19.4531 L139.9375,16.9219 L148.6094,16.9219 L148.6094,19.4531 L145.7188,19.4531 L145.7188,28.9531 L148.6094,28.9531 L148.6094,31.5 L139.9375,31.5 L139.9375,28.9531 L142.8281,28.9531 L142.8281,19.4531 L139.9375,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="72" x="161.25" y="30.9238">IObject</text><line style="stroke:#181818;stroke-width:0.5;" x1="123" x2="242" y1="41" y2="41"/><ellipse cx="133" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="143" y="63.5645">some()</text><ellipse cx="133" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="143" y="86.8457">method()</text></g><!--class Proxy--><g id="elem_Proxy"><rect codeLine="6" fill="#F1F1F1" height="119.8438" id="Proxy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="171" x="7" y="155.57"/><ellipse cx="61" cy="172.57" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M64.0625,179.6481 Q63.375,180.0075 62.625,180.1794 Q61.875,180.3513 61.0469,180.3513 Q58.0938,180.3513 56.5313,178.4138 Q54.9844,176.4606 54.9844,172.7888 Q54.9844,169.1169 56.5313,167.1794 Q58.0938,165.2263 61.0469,165.2263 Q61.875,165.2263 62.625,165.3981 Q63.3906,165.57 64.0625,165.9294 L64.0625,169.1325 Q63.3125,168.445 62.6094,168.1325 Q61.9219,167.82 61.1719,167.82 Q59.5938,167.82 58.7813,169.07 Q57.9844,170.32 57.9844,172.7888 Q57.9844,175.2575 58.7813,176.5075 Q59.5938,177.7575 61.1719,177.7575 Q61.9219,177.7575 62.6094,177.445 Q63.3125,177.1325 64.0625,176.445 L64.0625,179.6481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="83" y="179.4938">Proxy</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="177" y1="189.57" y2="189.57"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="203.7106"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="28" y="212.1345">cache: IObject</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="177" y1="220.8513" y2="220.8513"/><ellipse cx="18" cy="237.9919" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="28" y="243.4157">some()</text><ellipse cx="18" cy="261.2731" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="28" y="266.697">method()</text></g><!--class Service--><g id="elem_Service"><rect codeLine="12" fill="#F1F1F1" height="119.8438" id="Service" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121" x="213" y="155.57"/><ellipse cx="235.3" cy="172.57" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M238.3625,179.6481 Q237.675,180.0075 236.925,180.1794 Q236.175,180.3513 235.3469,180.3513 Q232.3938,180.3513 230.8313,178.4138 Q229.2844,176.4606 229.2844,172.7888 Q229.2844,169.1169 230.8313,167.1794 Q232.3938,165.2263 235.3469,165.2263 Q236.175,165.2263 236.925,165.3981 Q237.6906,165.57 238.3625,165.9294 L238.3625,169.1325 Q237.6125,168.445 236.9094,168.1325 Q236.2219,167.82 235.4719,167.82 Q233.8938,167.82 233.0813,169.07 Q232.2844,170.32 232.2844,172.7888 Q232.2844,175.2575 233.0813,176.5075 Q233.8938,177.7575 235.4719,177.7575 Q236.2219,177.7575 236.9094,177.445 Q237.6125,177.1325 238.3625,176.445 L238.3625,179.6481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="251.7" y="179.4938">Service</text><line style="stroke:#181818;stroke-width:0.5;" x1="214" x2="333" y1="189.57" y2="189.57"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="219" y="212.1345">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="214" x2="333" y1="220.8513" y2="220.8513"/><ellipse cx="224" cy="237.9919" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="70" x="234" y="243.4157">some()</text><ellipse cx="224" cy="261.2731" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="234" y="266.697">method()</text></g><!--reverse link IObject to Proxy--><g id="link_IObject_Proxy"><path codeLine="18" d="M149.6494,111.4909 C139.4994,129.7909 136.25,135.63 125.32,155.35 " fill="none" id="IObject-backto-Proxy" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="158.38,95.75,144.4024,108.5807,154.8964,114.4011,158.38,95.75" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Proxy to Service--><g id="link_Proxy_Service"><path codeLine="19" d="M178.4,215.49 C189.8,215.49 189.19,215.49 200.58,215.49 " fill="none" id="Proxy-to-Service" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="212.58,215.49,206.58,211.49,200.58,215.49,206.58,219.49,212.58,215.49" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link IObject to Service--><g id="link_IObject_Service"><path codeLine="20" d="M215.6927,111.4507 C225.9527,129.7507 229.26,135.63 240.32,155.35 " fill="none" id="IObject-backto-Service" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="206.89,95.75,210.4591,114.3849,220.9263,108.5165,206.89,95.75" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ZOtB2i8m44Nt-OfP-Y11NBfmARXIw1V4v9R69ar9Kh7M_hl5je8RSLOpmxtdnD9KjGpIMQzAQDB8PMFJmLSfCm_GTiDCbH1ogK37q-KAbQXZDCmwUeV5SjmTKk7rSFMCAIjZf7FmztQASYLLWTqC-AUU8TpCu1m1NMvWTI-4-DqTfRpXp_r7Dlq2NyrGDiE_Wwmm6WHNfvRUllW2]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Адаптер и декоратор в одном лице, а также фасад
</span>
</li>
<li>
<span>
В основном используется для кеширования результатов
</span>
</li>
<li>
<span>
В качестве кеша может использоваться сложный сервис (с запросами по сети, сохранениями файлов и т.д.)
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p><code>std::vector&lt;bool&gt;::reference</code></p></div>
</div></div>
<div class="sect1 slide">
<h1 id="_поведенческие_паттерны">6. Поведенческие паттерны</h1>

<div class="sectionbody">
</div></div>
<div class="sect2 slide">
<h1 id="_общие_сведения_3">6.1. Общие сведения</h1>

<div class="sectionbody">
<div class="paragraph"><p>Определяют взаимодействие классов</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_chain_of_responsibility_цепочка_обязанностей">6.2. Chain of responsibility (цепочка обязанностей)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="337px" preserveAspectRatio="none" style="width:713px;height:337px;background:#FFFFFF;" version="1.1" viewBox="0 0 713 337" width="713px" zoomAndPan="magnify"><defs/><g><!--class Request--><g id="elem_Request"><rect codeLine="1" fill="#F1F1F1" height="42" id="Request" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="20" y="288.84"/><ellipse cx="36" cy="305.84" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M39.0625,312.9181 Q38.375,313.2775 37.625,313.4494 Q36.875,313.6213 36.0469,313.6213 Q33.0938,313.6213 31.5313,311.6838 Q29.9844,309.7306 29.9844,306.0588 Q29.9844,302.3869 31.5313,300.4494 Q33.0938,298.4963 36.0469,298.4963 Q36.875,298.4963 37.625,298.6681 Q38.3906,298.84 39.0625,299.1994 L39.0625,302.4025 Q38.3125,301.715 37.6094,301.4025 Q36.9219,301.09 36.1719,301.09 Q34.5938,301.09 33.7813,302.34 Q32.9844,303.59 32.9844,306.0588 Q32.9844,308.5275 33.7813,309.7775 Q34.5938,311.0275 36.1719,311.0275 Q36.9219,311.0275 37.6094,310.715 Q38.3125,310.4025 39.0625,309.715 L39.0625,312.9181 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="82" x="51" y="312.7638">Request</text><line style="stroke:#181818;stroke-width:0.5;" x1="21" x2="135" y1="322.84" y2="322.84"/></g><!--class IProcessor--><g id="elem_IProcessor"><rect codeLine="3" fill="#F1F1F1" height="96.5625" id="IProcessor" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="238" x="224" y="7"/><ellipse cx="288" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M291.0625,31.0781 Q290.375,31.4375 289.625,31.6094 Q288.875,31.7813 288.0469,31.7813 Q285.0938,31.7813 283.5313,29.8438 Q281.9844,27.8906 281.9844,24.2188 Q281.9844,20.5469 283.5313,18.6094 Q285.0938,16.6563 288.0469,16.6563 Q288.875,16.6563 289.625,16.8281 Q290.3906,17 291.0625,17.3594 L291.0625,20.5625 Q290.3125,19.875 289.6094,19.5625 Q288.9219,19.25 288.1719,19.25 Q286.5938,19.25 285.7813,20.5 Q284.9844,21.75 284.9844,24.2188 Q284.9844,26.6875 285.7813,27.9375 Q286.5938,29.1875 288.1719,29.1875 Q288.9219,29.1875 289.6094,28.875 Q290.3125,28.5625 291.0625,27.875 L291.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="101" x="310" y="30.9238">IProcessor</text><line style="stroke:#181818;stroke-width:0.5;" x1="225" x2="461" y1="41" y2="41"/><polygon fill="none" points="235,53.1406,239,57.1406,235,61.1406,231,57.1406" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="211" x="245" y="63.5645">successor: IProcessor</text><line style="stroke:#181818;stroke-width:0.5;" x1="225" x2="461" y1="72.2813" y2="72.2813"/><ellipse cx="235" cy="89.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="148" x="245" y="94.8457">process(): bool</text></g><!--class Processor1--><g id="elem_Processor1"><rect codeLine="8" fill="#F1F1F1" height="65.2813" id="Processor1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="7" y="163.56"/><ellipse cx="23" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M26.0625,187.6381 Q25.375,187.9975 24.625,188.1694 Q23.875,188.3412 23.0469,188.3412 Q20.0938,188.3412 18.5313,186.4037 Q16.9844,184.4506 16.9844,180.7787 Q16.9844,177.1069 18.5313,175.1694 Q20.0938,173.2162 23.0469,173.2162 Q23.875,173.2162 24.625,173.3881 Q25.3906,173.56 26.0625,173.9194 L26.0625,177.1225 Q25.3125,176.435 24.6094,176.1225 Q23.9219,175.81 23.1719,175.81 Q21.5938,175.81 20.7813,177.06 Q19.9844,178.31 19.9844,180.7787 Q19.9844,183.2475 20.7813,184.4975 Q21.5938,185.7475 23.1719,185.7475 Q23.9219,185.7475 24.6094,185.435 Q25.3125,185.1225 26.0625,184.435 L26.0625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="38" y="187.4838">Processor1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="148" y1="197.56" y2="197.56"/><ellipse cx="18" cy="214.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="28" y="220.1245">process()</text></g><!--class Processor2--><g id="elem_Processor2"><rect codeLine="12" fill="#F1F1F1" height="65.2813" id="Processor2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="184" y="163.56"/><ellipse cx="200" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M203.0625,187.6381 Q202.375,187.9975 201.625,188.1694 Q200.875,188.3412 200.0469,188.3412 Q197.0938,188.3412 195.5313,186.4037 Q193.9844,184.4506 193.9844,180.7787 Q193.9844,177.1069 195.5313,175.1694 Q197.0938,173.2162 200.0469,173.2162 Q200.875,173.2162 201.625,173.3881 Q202.3906,173.56 203.0625,173.9194 L203.0625,177.1225 Q202.3125,176.435 201.6094,176.1225 Q200.9219,175.81 200.1719,175.81 Q198.5938,175.81 197.7813,177.06 Q196.9844,178.31 196.9844,180.7787 Q196.9844,183.2475 197.7813,184.4975 Q198.5938,185.7475 200.1719,185.7475 Q200.9219,185.7475 201.6094,185.435 Q202.3125,185.1225 203.0625,184.435 L203.0625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="215" y="187.4838">Processor2</text><line style="stroke:#181818;stroke-width:0.5;" x1="185" x2="325" y1="197.56" y2="197.56"/><ellipse cx="195" cy="214.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="205" y="220.1245">process()</text></g><!--class Processor3--><g id="elem_Processor3"><rect codeLine="16" fill="#F1F1F1" height="65.2813" id="Processor3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="361" y="163.56"/><ellipse cx="377" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M380.0625,187.6381 Q379.375,187.9975 378.625,188.1694 Q377.875,188.3412 377.0469,188.3412 Q374.0938,188.3412 372.5313,186.4037 Q370.9844,184.4506 370.9844,180.7787 Q370.9844,177.1069 372.5313,175.1694 Q374.0938,173.2162 377.0469,173.2162 Q377.875,173.2162 378.625,173.3881 Q379.3906,173.56 380.0625,173.9194 L380.0625,177.1225 Q379.3125,176.435 378.6094,176.1225 Q377.9219,175.81 377.1719,175.81 Q375.5938,175.81 374.7813,177.06 Q373.9844,178.31 373.9844,180.7787 Q373.9844,183.2475 374.7813,184.4975 Q375.5938,185.7475 377.1719,185.7475 Q377.9219,185.7475 378.6094,185.435 Q379.3125,185.1225 380.0625,184.435 L380.0625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="392" y="187.4838">Processor3</text><line style="stroke:#181818;stroke-width:0.5;" x1="362" x2="502" y1="197.56" y2="197.56"/><ellipse cx="372" cy="214.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="382" y="220.1245">process()</text></g><!--class EndProcessor--><g id="elem_EndProcessor"><rect codeLine="20" fill="#F1F1F1" height="65.2813" id="EndProcessor" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="538" y="163.56"/><ellipse cx="554" cy="180.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M557.0625,187.6381 Q556.375,187.9975 555.625,188.1694 Q554.875,188.3412 554.0469,188.3412 Q551.0938,188.3412 549.5313,186.4037 Q547.9844,184.4506 547.9844,180.7787 Q547.9844,177.1069 549.5313,175.1694 Q551.0938,173.2162 554.0469,173.2162 Q554.875,173.2162 555.625,173.3881 Q556.3906,173.56 557.0625,173.9194 L557.0625,177.1225 Q556.3125,176.435 555.6094,176.1225 Q554.9219,175.81 554.1719,175.81 Q552.5938,175.81 551.7813,177.06 Q550.9844,178.31 550.9844,180.7787 Q550.9844,183.2475 551.7813,184.4975 Q552.5938,185.7475 554.1719,185.7475 Q554.9219,185.7475 555.6094,185.435 Q556.3125,185.1225 557.0625,184.435 L557.0625,187.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="134" x="569" y="187.4838">EndProcessor</text><line style="stroke:#181818;stroke-width:0.5;" x1="539" x2="705" y1="197.56" y2="197.56"/><ellipse cx="549" cy="214.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="559" y="220.1245">process()</text></g><!--reverse link Processor1 to Request--><g id="link_Processor1_Request"><path codeLine="24" d="M78,241.19 C78,260.26 78,271.9 78,288.46 " fill="none" id="Processor1-backto-Request" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="78,229.19,74,235.19,78,241.19,82,235.19,78,229.19" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Processor1 to Processor2--><g id="link_Processor1_Processor2"><path codeLine="25" d="M149.21,196.2 C160.65,196.2 160.08,196.2 171.51,196.2 " fill="none" id="Processor1-to-Processor2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="183.51,196.2,177.51,192.2,171.51,196.2,177.51,200.2,183.51,196.2" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Processor2 to Processor3--><g id="link_Processor2_Processor3"><path codeLine="26" d="M326.21,196.2 C337.65,196.2 337.08,196.2 348.51,196.2 " fill="none" id="Processor2-to-Processor3" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="360.51,196.2,354.51,192.2,348.51,196.2,354.51,200.2,360.51,196.2" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Processor3 to EndProcessor--><g id="link_Processor3_EndProcessor"><path codeLine="27" d="M503.25,196.2 C514.69,196.2 514.13,196.2 525.58,196.2 " fill="none" id="Processor3-to-EndProcessor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="537.58,196.2,531.58,192.2,525.58,196.2,531.58,200.2,537.58,196.2" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link IProcessor to Processor1--><g id="link_IProcessor_Processor1"><path codeLine="29" d="M236.2289,112.2495 C198.9289,131.8095 172.65,145.58 139.13,163.16 " fill="none" id="IProcessor-backto-Processor1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="252.17,103.89,233.4424,106.9358,239.0154,117.5632,252.17,103.89" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link IProcessor to Processor2--><g id="link_IProcessor_Processor2"><path codeLine="30" d="M303.3263,118.905 C290.8763,138.555 286.4,145.62 275.22,163.28 " fill="none" id="IProcessor-backto-Processor2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="312.96,103.7,298.258,115.6938,308.3946,122.1162,312.96,103.7" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link IProcessor to Processor3--><g id="link_IProcessor_Processor3"><path codeLine="31" d="M383.0906,118.856 C395.6806,138.506 400.24,145.62 411.55,163.28 " fill="none" id="IProcessor-backto-Processor3" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="373.38,103.7,378.0386,122.0929,388.1426,115.6191,373.38,103.7" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link IProcessor to EndProcessor--><g id="link_IProcessor_EndProcessor"><path codeLine="32" d="M454.742,111.9152 C494.012,131.4752 522.35,145.58 557.64,163.16 " fill="none" id="IProcessor-backto-EndProcessor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="438.63,103.89,452.0669,117.2859,457.4171,106.5446,438.63,103.89" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ZP3B3e8m44NtynMJkD4O4eKT2tUQk3Fw1TWEaL0fTkZ2rxzh07KGDNOtFIUtTyfvLfI9I_R6gfmqQaeJRwg5BQfDTY8C9w1CmenhEdZY2jfnkN9M4RDrU0Qydm5xrLp40jPeN3RZS1JZrbe3rqVAqvksAI_rWnJ-8qK_f7cXtsjtjNP937nWHJaGFGCdKGYYNHT583hLI3uFdKmVN6RorsJeLnRrMMV17eLTfWbfNrP7J3Coccy0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Каждый в цепочке либо обрабатывает запрос, либо передаёт дальше
</span>
</li>
<li>
<span>
В случае обработки запроса цепочка может быть либо прервана, либо продолжена
</span>
</li>
<li>
<span>
Реализация "луковицей"
</span>
</li>
<li>
<span>
Возможна реализация через брокера и пайплайн (компоновщик)
</span>
</li>
<li>
<span>
<code>EndProcessor</code> может потерять запрос
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Общение с техподдержкой</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_command_команда">6.3. Command (команда)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="394px" preserveAspectRatio="none" style="width:517px;height:394px;background:#FFFFFF;" version="1.1" viewBox="0 0 517 394" width="517px" zoomAndPan="magnify"><defs/><g><!--class Command--><g id="elem_Command"><rect codeLine="1" fill="#F1F1F1" height="65.2813" id="Command" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="138" x="292.5" y="7"/><ellipse cx="308.5" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M303.6875,19.4531 L303.6875,16.9219 L312.3594,16.9219 L312.3594,19.4531 L309.4688,19.4531 L309.4688,28.9531 L312.3594,28.9531 L312.3594,31.5 L303.6875,31.5 L303.6875,28.9531 L306.5781,28.9531 L306.5781,19.4531 L303.6875,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="104" x="323.5" y="30.9238">Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="293.5" x2="429.5" y1="41" y2="41"/><ellipse cx="303.5" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="313.5" y="63.5645">execute()</text></g><!--class Paste--><g id="elem_Paste"><rect codeLine="5" fill="#F1F1F1" height="96.5625" id="Paste" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="195" y="133.28"/><ellipse cx="243" cy="150.28" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M246.0625,157.3581 Q245.375,157.7175 244.625,157.8894 Q243.875,158.0613 243.0469,158.0613 Q240.0938,158.0613 238.5313,156.1238 Q236.9844,154.1706 236.9844,150.4988 Q236.9844,146.8269 238.5313,144.8894 Q240.0938,142.9363 243.0469,142.9363 Q243.875,142.9363 244.625,143.1081 Q245.3906,143.28 246.0625,143.6394 L246.0625,146.8425 Q245.3125,146.155 244.6094,145.8425 Q243.9219,145.53 243.1719,145.53 Q241.5938,145.53 240.7813,146.78 Q239.9844,148.03 239.9844,150.4988 Q239.9844,152.9675 240.7813,154.2175 Q241.5938,155.4675 243.1719,155.4675 Q243.9219,155.4675 244.6094,155.155 Q245.3125,154.8425 246.0625,154.155 L246.0625,157.3581 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="265" y="157.2038">Paste</text><line style="stroke:#181818;stroke-width:0.5;" x1="196" x2="353" y1="167.28" y2="167.28"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="203" y="181.4206"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132" x="216" y="189.8445">cache: data&amp;</text><line style="stroke:#181818;stroke-width:0.5;" x1="196" x2="353" y1="198.5613" y2="198.5613"/><ellipse cx="206" cy="215.7019" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="216" y="221.1257">execute()</text></g><!--class Copy--><g id="elem_Copy"><rect codeLine="10" fill="#F1F1F1" height="96.5625" id="Copy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="388.5" y="133.28"/><ellipse cx="421.6" cy="150.28" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M424.6625,157.3581 Q423.975,157.7175 423.225,157.8894 Q422.475,158.0613 421.6469,158.0613 Q418.6938,158.0613 417.1313,156.1238 Q415.5844,154.1706 415.5844,150.4988 Q415.5844,146.8269 417.1313,144.8894 Q418.6938,142.9363 421.6469,142.9363 Q422.475,142.9363 423.225,143.1081 Q423.9906,143.28 424.6625,143.6394 L424.6625,146.8425 Q423.9125,146.155 423.2094,145.8425 Q422.5219,145.53 421.7719,145.53 Q420.1938,145.53 419.3813,146.78 Q418.5844,148.03 418.5844,150.4988 Q418.5844,152.9675 419.3813,154.2175 Q420.1938,155.4675 421.7719,155.4675 Q422.5219,155.4675 423.2094,155.155 Q423.9125,154.8425 424.6625,154.155 L424.6625,157.3581 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="50" x="440.4" y="157.2038">Copy</text><line style="stroke:#181818;stroke-width:0.5;" x1="389.5" x2="509.5" y1="167.28" y2="167.28"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="396.5" y="181.4206"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="45" x="409.5" y="189.8445">data</text><line style="stroke:#181818;stroke-width:0.5;" x1="389.5" x2="509.5" y1="198.5613" y2="198.5613"/><ellipse cx="399.5" cy="215.7019" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="409.5" y="221.1257">execute()</text></g><!--class Client--><g id="elem_Client"><rect codeLine="15" fill="#F1F1F1" height="96.5625" id="Client" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="232" x="262.5" y="290.85"/><ellipse cx="344.5" cy="307.85" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M347.5625,314.9281 Q346.875,315.2875 346.125,315.4594 Q345.375,315.6313 344.5469,315.6313 Q341.5938,315.6313 340.0313,313.6938 Q338.4844,311.7406 338.4844,308.0688 Q338.4844,304.3969 340.0313,302.4594 Q341.5938,300.5063 344.5469,300.5063 Q345.375,300.5063 346.125,300.6781 Q346.8906,300.85 347.5625,301.2094 L347.5625,304.4125 Q346.8125,303.725 346.1094,303.4125 Q345.4219,303.1 344.6719,303.1 Q343.0938,303.1 342.2813,304.35 Q341.4844,305.6 341.4844,308.0688 Q341.4844,310.5375 342.2813,311.7875 Q343.0938,313.0375 344.6719,313.0375 Q345.4219,313.0375 346.1094,312.725 Q346.8125,312.4125 347.5625,311.725 L347.5625,314.9281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="366.5" y="314.7738">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="263.5" x2="493.5" y1="324.85" y2="324.85"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="270.5" y="338.9906"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="205" x="283.5" y="347.4145">actions: Command[]</text><line style="stroke:#181818;stroke-width:0.5;" x1="263.5" x2="493.5" y1="356.1313" y2="356.1313"/><ellipse cx="273.5" cy="373.2719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="64" x="283.5" y="378.6957">send()</text></g><!--class Server--><g id="elem_Server"><rect codeLine="20" fill="#F1F1F1" height="88.5625" id="Server" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="7" y="294.85"/><ellipse cx="30.65" cy="311.85" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M33.7125,318.9281 Q33.025,319.2875 32.275,319.4594 Q31.525,319.6313 30.6969,319.6313 Q27.7438,319.6313 26.1813,317.6938 Q24.6344,315.7406 24.6344,312.0688 Q24.6344,308.3969 26.1813,306.4594 Q27.7438,304.5063 30.6969,304.5063 Q31.525,304.5063 32.275,304.6781 Q33.0406,304.85 33.7125,305.2094 L33.7125,308.4125 Q32.9625,307.725 32.2594,307.4125 Q31.5719,307.1 30.8219,307.1 Q29.2438,307.1 28.4313,308.35 Q27.6344,309.6 27.6344,312.0688 Q27.6344,314.5375 28.4313,315.7875 Q29.2438,317.0375 30.8219,317.0375 Q31.5719,317.0375 32.2594,316.725 Q32.9625,316.4125 33.7125,315.725 L33.7125,318.9281 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="64" x="47.35" y="318.7738">Server</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="121" y1="328.85" y2="328.85"/><ellipse cx="18" cy="345.9906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="88" x="28" y="351.4145">receive()</text><ellipse cx="18" cy="369.2719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="28" y="374.6957">apply()</text></g><!--link Paste to Client--><g id="link_Paste_Client"><path codeLine="25" d="M306.27,230.09 C319.05,249.21 327.0992,261.245 339.8992,280.385 " fill="none" id="Paste-to-Client" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="346.57,290.36,346.5596,283.1489,339.8992,280.385,339.9096,287.5961,346.57,290.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Copy to Client--><g id="link_Copy_Client"><path codeLine="26" d="M427.81,230.09 C419.08,249.21 414.0245,260.3042 405.2845,279.4442 " fill="none" id="Copy-to-Client" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="400.3,290.36,406.4309,286.5636,405.2845,279.4442,399.1537,283.2406,400.3,290.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Server to Client--><g id="link_Server_Client"><path codeLine="28" d="M128.46,339.13 C167.53,339.13 214.44,339.13 262.02,339.13 " fill="none" id="Server-backto-Client" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="122.46,339.13,131.46,343.13,127.46,339.13,131.46,335.13,122.46,339.13" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="140.25" y="330.6945">Command</text></g><!--reverse link Command to Copy--><g id="link_Command_Copy"><path codeLine="30" d="M391.2707,87.9885 C402.4807,105.8185 407.07,113.1 419.55,132.95 " fill="none" id="Command-backto-Copy" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="381.69,72.75,386.1912,91.182,396.3502,84.7949,381.69,72.75" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Command to Paste--><g id="link_Command_Paste"><path codeLine="31" d="M332.0332,88.0346 C320.9432,105.8646 316.45,113.1 304.11,132.95 " fill="none" id="Command-backto-Paste" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="341.54,72.75,326.9383,84.8657,337.1281,91.2036,341.54,72.75" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[TOwzQWCn48JxVOgjGa8Gc9Gkt1XI1ro658iqXuLraf3sZCy_xvxOfpDEuUrsTcRsgpiVinJfGx8xE7ReP0ZwcQ9k_17yiI0V5QKJ2rwdlfVe-4JyD-yum0wArpUw4DaWjVANL4Mx6ojsYoKxKNbvcbYdFCw1g_EvCNX4dQrYrQTObpFJzyyKh8ZkCRL1sQFCn0KMVd-jlQsISnWdzmHkd4dj4Tt07WLg12QOLUkzlwTc7ynvTTTQvp-Djjw1qMSTkVC8hlu2]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Отложенный вызов
</span>
</li>
<li>
<span>
Лямбда-функции
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Транзакции в базе данных, <code>std::bind</code></p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_iterator_итератор">6.4. Iterator (итератор)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="309px" preserveAspectRatio="none" style="width:509px;height:309px;background:#FFFFFF;" version="1.1" viewBox="0 0 509 309" width="509px" zoomAndPan="magnify"><defs/><g><!--class Iterator--><g id="elem_Iterator"><rect codeLine="1" fill="#F1F1F1" height="88.5625" id="Iterator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="11" y="26.8568"/><ellipse cx="55.8" cy="43.8568" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M50.9875,39.3099 L50.9875,36.7787 L59.6594,36.7787 L59.6594,39.3099 L56.7688,39.3099 L56.7688,48.8099 L59.6594,48.8099 L59.6594,51.3568 L50.9875,51.3568 L50.9875,48.8099 L53.8781,48.8099 L53.8781,39.3099 L50.9875,39.3099 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="74" x="77.2" y="50.7806">Iterator</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="188" y="23.8568"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="189" y="43.4212">Type</text><line style="stroke:#181818;stroke-width:0.5;" x1="12" x2="235" y1="60.8568" y2="60.8568"/><ellipse cx="22" cy="77.9974" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="198" x="32" y="83.4212">operator++(): self&amp;</text><ellipse cx="22" cy="101.2787" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="187" x="32" y="106.7025">operator*(): Type&amp;</text></g><!--class Iterable--><g id="elem_Iterable"><rect codeLine="6" fill="#F1F1F1" height="119.8438" id="Iterable" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="278" y="11.2168"/><ellipse cx="310.65" cy="28.2168" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M313.7125,35.2949 Q313.025,35.6543 312.275,35.8262 Q311.525,35.998 310.6969,35.998 Q307.7438,35.998 306.1813,34.0605 Q304.6344,32.1074 304.6344,28.4355 Q304.6344,24.7637 306.1813,22.8262 Q307.7438,20.873 310.6969,20.873 Q311.525,20.873 312.275,21.0449 Q313.0406,21.2168 313.7125,21.5762 L313.7125,24.7793 Q312.9625,24.0918 312.2594,23.7793 Q311.5719,23.4668 310.8219,23.4668 Q309.2438,23.4668 308.4313,24.7168 Q307.6344,25.9668 307.6344,28.4355 Q307.6344,30.9043 308.4313,32.1543 Q309.2438,33.4043 310.8219,33.4043 Q311.5719,33.4043 312.2594,33.0918 Q312.9625,32.7793 313.7125,32.0918 L313.7125,35.2949 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="329.35" y="35.1406">Iterable</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="431" y="8.2168"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="432" y="27.7813">Type</text><line style="stroke:#181818;stroke-width:0.5;" x1="279" x2="478" y1="45.2168" y2="45.2168"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="286" y="59.3574"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="299" y="67.7813">collection: Type[]</text><line style="stroke:#181818;stroke-width:0.5;" x1="279" x2="478" y1="76.498" y2="76.498"/><ellipse cx="289" cy="93.6387" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="299" y="99.0625">begin()</text><ellipse cx="289" cy="116.9199" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="299" y="122.3438">end()</text></g><!--class InputIterator--><g id="elem_InputIterator"><rect codeLine="12" fill="#F1F1F1" height="88.5625" id="InputIterator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="225" x="7" y="202.7068"/><ellipse cx="27.95" cy="219.7068" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M31.0125,226.7849 Q30.325,227.1443 29.575,227.3162 Q28.825,227.488 27.9969,227.488 Q25.0438,227.488 23.4813,225.5505 Q21.9344,223.5974 21.9344,219.9255 Q21.9344,216.2537 23.4813,214.3162 Q25.0438,212.363 27.9969,212.363 Q28.825,212.363 29.575,212.5349 Q30.3406,212.7068 31.0125,213.0662 L31.0125,216.2693 Q30.2625,215.5818 29.5594,215.2693 Q28.8719,214.9568 28.1219,214.9568 Q26.5438,214.9568 25.7313,216.2068 Q24.9344,217.4568 24.9344,219.9255 Q24.9344,222.3943 25.7313,223.6443 Q26.5438,224.8943 28.1219,224.8943 Q28.8719,224.8943 29.5594,224.5818 Q30.2625,224.2693 31.0125,223.5818 L31.0125,226.7849 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="127" x="44.05" y="226.6306">InputIterator</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="184" y="199.7068"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="185" y="219.2713">Type</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="231" y1="236.7068" y2="236.7068"/><ellipse cx="18" cy="253.8474" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="198" x="28" y="259.2713">operator++(): self&amp;</text><ellipse cx="18" cy="277.1287" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="187" x="28" y="282.5525">operator*(): Type&amp;</text></g><!--class OutputIterator--><g id="elem_OutputIterator"><rect codeLine="17" fill="#F1F1F1" height="111.8438" id="OutputIterator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="232" x="266.5" y="191.0668"/><ellipse cx="282.5" cy="208.0668" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M285.5625,215.1449 Q284.875,215.5043 284.125,215.6762 Q283.375,215.848 282.5469,215.848 Q279.5938,215.848 278.0313,213.9105 Q276.4844,211.9574 276.4844,208.2855 Q276.4844,204.6137 278.0313,202.6762 Q279.5938,200.723 282.5469,200.723 Q283.375,200.723 284.125,200.8949 Q284.8906,201.0668 285.5625,201.4262 L285.5625,204.6293 Q284.8125,203.9418 284.1094,203.6293 Q283.4219,203.3168 282.6719,203.3168 Q281.0938,203.3168 280.2813,204.5668 Q279.4844,205.8168 279.4844,208.2855 Q279.4844,210.7543 280.2813,212.0043 Q281.0938,213.2543 282.6719,213.2543 Q283.4219,213.2543 284.1094,212.9418 Q284.8125,212.6293 285.5625,211.9418 L285.5625,215.1449 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="145" x="297.5" y="214.9906">OutputIterator</text><rect fill="#FFFFFF" height="25.2813" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="51" x="450.5" y="188.0668"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="49" x="451.5" y="207.6313">Type</text><line style="stroke:#181818;stroke-width:0.5;" x1="267.5" x2="497.5" y1="225.0668" y2="225.0668"/><ellipse cx="277.5" cy="242.2074" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="186" x="287.5" y="247.6313">operator++(): null</text><ellipse cx="277.5" cy="265.4887" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="174" x="287.5" y="270.9125">operator*(): self&amp;</text><ellipse cx="277.5" cy="288.7699" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="287.5" y="294.1938">operator=(): self&amp;</text></g><!--reverse link Iterator to InputIterator--><g id="link_Iterator_InputIterator"><path codeLine="23" d="M122.085,133.552 C121.475,160.002 121.12,175.6968 120.51,202.2168 " fill="none" id="Iterator-backto-InputIterator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="122.5,115.5568,116.0866,133.4137,128.0834,133.6903,122.5,115.5568" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Iterator to OutputIterator--><g id="link_Iterator_OutputIterator"><path codeLine="24" d="M203.4663,125.8172 C237.3363,148.5472 264.15,166.5468 300.24,190.7668 " fill="none" id="Iterator-backto-OutputIterator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="188.52,115.7868,200.1228,130.7993,206.8097,120.8351,188.52,115.7868" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Iterable to InputIterator--><g id="link_Iterable_InputIterator"><path codeLine="25" d="M290.09,131.4868 C255.51,154.6968 226.5234,174.1488 194.5834,195.5888 " fill="none" id="Iterable-to-InputIterator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="184.62,202.2768,191.8311,202.2539,194.5834,195.5888,187.3724,195.6116,184.62,202.2768" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Iterable to OutputIterator--><g id="link_Iterable_OutputIterator"><path codeLine="26" d="M379.87,131.4868 C380.31,150.6668 380.5103,159.8501 380.9503,178.7201 " fill="none" id="Iterable-to-OutputIterator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="381.23,190.7168,385.089,184.6252,380.9503,178.7201,377.0912,184.8117,381.23,190.7168" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[hP0_2y8m4CNtV8gRfBO4n57KKN1oq4qSOdBLu3K9JJBKFz_TIa29T70mq-KzxlVkpb-qSQ8L3LbvGGKAQn4fhAm9Mtr5c4wODW7RMaY4TL-8O5kOxpg7IxWnw5zbNPAhgXZFm2FLezmeN_ghPSGUZ4aItYVMaJ1dSMc9K0PjJUhO7nBgY2TjYd7we55z-K4P5yC_Pzl4y2lHHA81u43GugFtGVdCFFBxydrUzfN_vRulntcPxvvREOMnirO8sBZGGQsHb7y2]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Придаёт объекту свойства контейнера
</span>
</li>
<li>
<span>
Похож на композицию, может использоваться в цепочке обязанностей
</span>
</li>
<li>
<span>
Могущество спрятано в операторах <code>++</code>, <code>*</code> и <code>=</code>
</span>
</li>
<li>
<span>
Разные способы обхода одного и того же множества
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p><code>std::vector::iterator</code>, обход графа в ширину и глубину&#8201;&#8212;&#8201;два типа итератора</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_mediator_посредник">6.5. Mediator (посредник)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="274px" preserveAspectRatio="none" style="width:579px;height:274px;background:#FFFFFF;" version="1.1" viewBox="0 0 579 274" width="579px" zoomAndPan="magnify"><defs/><g><!--class Mediator--><g id="elem_Mediator"><rect codeLine="1" fill="#F1F1F1" height="65.2813" id="Mediator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="103.5" y="41.93"/><ellipse cx="140.2" cy="58.93" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M135.3875,54.3831 L135.3875,51.8519 L144.0594,51.8519 L144.0594,54.3831 L141.1688,54.3831 L141.1688,63.8831 L144.0594,63.8831 L144.0594,66.43 L135.3875,66.43 L135.3875,63.8831 L138.2781,63.8831 L138.2781,54.3831 L135.3875,54.3831 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="88" x="159.8" y="65.8538">Mediator</text><line style="stroke:#181818;stroke-width:0.5;" x1="104.5" x2="270.5" y1="75.93" y2="75.93"/><ellipse cx="114.5" cy="93.0706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="141" x="124.5" y="98.4945">notify(sender)</text></g><!--class Main--><g id="elem_Main"><rect codeLine="5" fill="#F1F1F1" height="135.125" id="Main" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="306.5" y="7"/><ellipse cx="362" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M365.0625,31.0781 Q364.375,31.4375 363.625,31.6094 Q362.875,31.7813 362.0469,31.7813 Q359.0938,31.7813 357.5313,29.8438 Q355.9844,27.8906 355.9844,24.2188 Q355.9844,20.5469 357.5313,18.6094 Q359.0938,16.6563 362.0469,16.6563 Q362.875,16.6563 363.625,16.8281 Q364.3906,17 365.0625,17.3594 L365.0625,20.5625 Q364.3125,19.875 363.6094,19.5625 Q362.9219,19.25 362.1719,19.25 Q360.5938,19.25 359.7813,20.5 Q358.9844,21.75 358.9844,24.2188 Q358.9844,26.6875 359.7813,27.9375 Q360.5938,29.1875 362.1719,29.1875 Q362.9219,29.1875 363.6094,28.875 Q364.3125,28.5625 365.0625,27.875 L365.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="48" x="384" y="30.9238">Main</text><line style="stroke:#181818;stroke-width:0.5;" x1="307.5" x2="473.5" y1="41" y2="41"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="55.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="327.5" y="63.5645">onEventA()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="78.4219"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="327.5" y="86.8457">onEventB()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="314.5" y="101.7031"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="112" x="327.5" y="110.127">onEventC()</text><ellipse cx="317.5" cy="127.9844" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="141" x="327.5" y="133.4082">notify(sender)</text></g><!--class ComponentA--><g id="elem_ComponentA"><rect codeLine="12" fill="#F1F1F1" height="65.2813" id="ComponentA" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="7" y="202.13"/><ellipse cx="23" cy="219.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M26.0625,226.2081 Q25.375,226.5675 24.625,226.7394 Q23.875,226.9113 23.0469,226.9113 Q20.0938,226.9113 18.5313,224.9738 Q16.9844,223.0206 16.9844,219.3488 Q16.9844,215.6769 18.5313,213.7394 Q20.0938,211.7863 23.0469,211.7863 Q23.875,211.7863 24.625,211.9581 Q25.3906,212.13 26.0625,212.4894 L26.0625,215.6925 Q25.3125,215.005 24.6094,214.6925 Q23.9219,214.38 23.1719,214.38 Q21.5938,214.38 20.7813,215.63 Q19.9844,216.88 19.9844,219.3488 Q19.9844,221.8175 20.7813,223.0675 Q21.5938,224.3175 23.1719,224.3175 Q23.9219,224.3175 24.6094,224.005 Q25.3125,223.6925 26.0625,223.005 L26.0625,226.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="38" y="226.0538">ComponentA</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="171" y1="236.13" y2="236.13"/><ellipse cx="18" cy="253.2706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="28" y="258.6945">operationA()</text></g><!--class ComponentB--><g id="elem_ComponentB"><rect codeLine="16" fill="#F1F1F1" height="65.2813" id="ComponentB" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="207" y="202.13"/><ellipse cx="223" cy="219.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M226.0625,226.2081 Q225.375,226.5675 224.625,226.7394 Q223.875,226.9113 223.0469,226.9113 Q220.0938,226.9113 218.5313,224.9738 Q216.9844,223.0206 216.9844,219.3488 Q216.9844,215.6769 218.5313,213.7394 Q220.0938,211.7863 223.0469,211.7863 Q223.875,211.7863 224.625,211.9581 Q225.3906,212.13 226.0625,212.4894 L226.0625,215.6925 Q225.3125,215.005 224.6094,214.6925 Q223.9219,214.38 223.1719,214.38 Q221.5938,214.38 220.7813,215.63 Q219.9844,216.88 219.9844,219.3488 Q219.9844,221.8175 220.7813,223.0675 Q221.5938,224.3175 223.1719,224.3175 Q223.9219,224.3175 224.6094,224.005 Q225.3125,223.6925 226.0625,223.005 L226.0625,226.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="238" y="226.0538">ComponentB</text><line style="stroke:#181818;stroke-width:0.5;" x1="208" x2="371" y1="236.13" y2="236.13"/><ellipse cx="218" cy="253.2706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="228" y="258.6945">operationB()</text></g><!--class ComponentC--><g id="elem_ComponentC"><rect codeLine="20" fill="#F1F1F1" height="65.2813" id="ComponentC" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="407" y="202.13"/><ellipse cx="423" cy="219.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M426.0625,226.2081 Q425.375,226.5675 424.625,226.7394 Q423.875,226.9113 423.0469,226.9113 Q420.0938,226.9113 418.5313,224.9738 Q416.9844,223.0206 416.9844,219.3488 Q416.9844,215.6769 418.5313,213.7394 Q420.0938,211.7863 423.0469,211.7863 Q423.875,211.7863 424.625,211.9581 Q425.3906,212.13 426.0625,212.4894 L426.0625,215.6925 Q425.3125,215.005 424.6094,214.6925 Q423.9219,214.38 423.1719,214.38 Q421.5938,214.38 420.7813,215.63 Q419.9844,216.88 419.9844,219.3488 Q419.9844,221.8175 420.7813,223.0675 Q421.5938,224.3175 423.1719,224.3175 Q423.9219,224.3175 424.6094,224.005 Q425.3125,223.6925 426.0625,223.005 L426.0625,226.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="131" x="438" y="226.0538">ComponentC</text><line style="stroke:#181818;stroke-width:0.5;" x1="408" x2="571" y1="236.13" y2="236.13"/><ellipse cx="418" cy="253.2706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="126" x="428" y="258.6945">operationC()</text></g><!--reverse link Mediator to ComponentA--><g id="link_Mediator_ComponentA"><path codeLine="24" d="M161.3518,117.782 C144.3518,145.232 126.3,174.37 109.3,201.8 " fill="none" id="Mediator-backto-ComponentA" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="167.67,107.58,161.1102,110.5749,161.3518,117.782,167.9116,114.7871,167.67,107.58" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Main to ComponentA--><g id="link_Main_ComponentA"><path codeLine="25" d="M306.2,131.92 C300.27,135.47 294.33,138.91 288.5,142.13 C249.05,163.93 214.4612,180.3414 176.9012,196.8914 " fill="none" id="Main-to-ComponentA" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="165.92,201.73,173.0235,202.9711,176.9012,196.8914,169.7977,195.6503,165.92,201.73" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Mediator to ComponentB--><g id="link_Mediator_ComponentB"><path codeLine="27" d="M214.643,117.6652 C232.343,145.1152 251.2,174.37 268.89,201.8 " fill="none" id="Mediator-backto-ComponentB" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="208.14,107.58,208.0298,114.7903,214.643,117.6652,214.7532,110.4549,208.14,107.58" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Main to ComponentB--><g id="link_Main_ComponentB"><path codeLine="28" d="M347.96,142.2 C334.81,162.8 327.3689,174.4565 316.4289,191.5865 " fill="none" id="Main-to-ComponentB" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="309.97,201.7,316.5706,198.7962,316.4289,191.5865,309.8283,194.4903,309.97,201.7" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Mediator to ComponentC--><g id="link_Mediator_ComponentC"><path codeLine="30" d="M243.3091,114.1897 C260.5691,125.6797 270.61,131.71 289.5,142.13 C329.13,163.98 374.93,185.24 412.69,201.77 " fill="none" id="Mediator-backto-ComponentC" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="233.32,107.54,236.098,114.1945,243.3091,114.1897,240.5311,107.5352,233.32,107.54" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Main to ComponentC--><g id="link_Main_ComponentC"><path codeLine="31" d="M432.2,142.2 C445.09,162.8 452.3441,174.3977 463.0641,191.5277 " fill="none" id="Main-to-ComponentC" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="469.43,201.7,469.6378,194.4919,463.0641,191.5277,462.8563,198.7358,469.43,201.7" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Mediator to Main--><g id="link_Mediator_Main"><path codeLine="33" d="M289.95,74.57 C301.37,74.57 294.8,74.57 306.22,74.57 " fill="none" id="Mediator-backto-Main" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="271.95,74.57,289.95,80.57,289.95,68.57,271.95,74.57" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[XSzB2i8m40RWVKwHPLK2uW444tJNbIS8pHG7qvcIf8Alk_kgMgtIxFxmySzCt2BLDjZASx459nsKjl5fnPJMU00vcmga1A6q1SWS7Dh4GHw5lBu9SS9odqKW1s4apa8KtiOeSulK6iMqt06bHJRwoFehcpR_xJHSrKotfkTqhY7OX4otxhxJFQT_EjDpvk4w4rMZ-7Mzk9-drBYpKqVhGQqxsWng8zfFhqxpDnGRT22XgjDUbWZUnGi0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
<code>Main</code> содержит всю бизнес-логику
</span>
</li>
<li>
<span>
Компоненты общаются между собой только через посредника
</span>
</li>
<li>
<span>
Все компоненты могут использоваться повторно в других программах, но сам посредник не может
</span>
</li>
<li>
<span>
Проблема "божественного объекта"
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Диспетчерская, диалоговое окно с компонентами</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_memento_снимок">6.6. Memento (снимок)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="407px" preserveAspectRatio="none" style="width:493px;height:407px;background:#FFFFFF;" version="1.1" viewBox="0 0 493 407" width="493px" zoomAndPan="magnify"><defs/><g><!--class Object1--><g id="elem_Object1"><rect codeLine="1" fill="#F1F1F1" height="143.125" id="Object1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="7" y="7"/><ellipse cx="74" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M77.0625,31.0781 Q76.375,31.4375 75.625,31.6094 Q74.875,31.7813 74.0469,31.7813 Q71.0938,31.7813 69.5313,29.8438 Q67.9844,27.8906 67.9844,24.2188 Q67.9844,20.5469 69.5313,18.6094 Q71.0938,16.6563 74.0469,16.6563 Q74.875,16.6563 75.625,16.8281 Q76.3906,17 77.0625,17.3594 L77.0625,20.5625 Q76.3125,19.875 75.6094,19.5625 Q74.9219,19.25 74.1719,19.25 Q72.5938,19.25 71.7813,20.5 Q70.9844,21.75 70.9844,24.2188 Q70.9844,26.6875 71.7813,27.9375 Q72.5938,29.1875 74.1719,29.1875 Q74.9219,29.1875 75.6094,28.875 Q76.3125,28.5625 77.0625,27.875 L77.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="96" y="30.9238">Object1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="228" y1="41" y2="41"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="55.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="28" y="63.5645">some</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="78.4219"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="28" y="86.8457">fields</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="228" y1="95.5625" y2="95.5625"/><ellipse cx="18" cy="112.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="28" y="118.127">save(): Memento</text><ellipse cx="18" cy="135.9844" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="28" y="141.4082">restore(Memento&amp;)</text></g><!--class Object2--><g id="elem_Object2"><rect codeLine="8" fill="#F1F1F1" height="119.8438" id="Object2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="264" y="18.64"/><ellipse cx="331" cy="35.64" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M334.0625,42.7181 Q333.375,43.0775 332.625,43.2494 Q331.875,43.4212 331.0469,43.4212 Q328.0938,43.4212 326.5313,41.4837 Q324.9844,39.5306 324.9844,35.8587 Q324.9844,32.1869 326.5313,30.2494 Q328.0938,28.2962 331.0469,28.2962 Q331.875,28.2962 332.625,28.4681 Q333.3906,28.64 334.0625,28.9994 L334.0625,32.2025 Q333.3125,31.515 332.6094,31.2025 Q331.9219,30.89 331.1719,30.89 Q329.5938,30.89 328.7813,32.14 Q327.9844,33.39 327.9844,35.8587 Q327.9844,38.3275 328.7813,39.5775 Q329.5938,40.8275 331.1719,40.8275 Q331.9219,40.8275 332.6094,40.515 Q333.3125,40.2025 334.0625,39.515 L334.0625,42.7181 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="353" y="42.5638">Object2</text><line style="stroke:#181818;stroke-width:0.5;" x1="265" x2="485" y1="52.64" y2="52.64"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="272" y="66.7806"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="285" y="75.2045">another</text><line style="stroke:#181818;stroke-width:0.5;" x1="265" x2="485" y1="83.9212" y2="83.9212"/><ellipse cx="275" cy="101.0619" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="285" y="106.4857">save(): Memento</text><ellipse cx="275" cy="124.3431" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="285" y="129.767">restore(Memento&amp;)</text></g><!--class Memento--><g id="elem_Memento"><rect codeLine="14" fill="#F1F1F1" height="42" id="Memento" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="182" y="210.13"/><ellipse cx="198" cy="227.13" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M193.1875,222.5831 L193.1875,220.0519 L201.8594,220.0519 L201.8594,222.5831 L198.9688,222.5831 L198.9688,232.0831 L201.8594,232.0831 L201.8594,234.63 L193.1875,234.63 L193.1875,232.0831 L196.0781,232.0831 L196.0781,222.5831 L193.1875,222.5831 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="94" x="213" y="234.0538">Memento</text><line style="stroke:#181818;stroke-width:0.5;" x1="183" x2="309" y1="244.13" y2="244.13"/></g><!--class Memento1--><g id="elem_Memento1"><rect codeLine="16" fill="#F1F1F1" height="88.5625" id="Memento1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="87.5" y="312.13"/><ellipse cx="103.5" cy="329.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M106.5625,336.2081 Q105.875,336.5675 105.125,336.7394 Q104.375,336.9113 103.5469,336.9113 Q100.5938,336.9113 99.0313,334.9738 Q97.4844,333.0206 97.4844,329.3488 Q97.4844,325.6769 99.0313,323.7394 Q100.5938,321.7863 103.5469,321.7863 Q104.375,321.7863 105.125,321.9581 Q105.8906,322.13 106.5625,322.4894 L106.5625,325.6925 Q105.8125,325.005 105.1094,324.6925 Q104.4219,324.38 103.6719,324.38 Q102.0938,324.38 101.2813,325.63 Q100.4844,326.88 100.4844,329.3488 Q100.4844,331.8175 101.2813,333.0675 Q102.0938,334.3175 103.6719,334.3175 Q104.4219,334.3175 105.1094,334.005 Q105.8125,333.6925 106.5625,333.005 L106.5625,336.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="118.5" y="336.0538">Memento1</text><line style="stroke:#181818;stroke-width:0.5;" x1="88.5" x2="227.5" y1="346.13" y2="346.13"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="95.5" y="360.2706"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="108.5" y="368.6945">some</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="95.5" y="383.5519"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="54" x="108.5" y="391.9757">fields</text></g><!--class Memento2--><g id="elem_Memento2"><rect codeLine="21" fill="#F1F1F1" height="65.2813" id="Memento2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="263.5" y="323.77"/><ellipse cx="279.5" cy="340.77" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M282.5625,347.8481 Q281.875,348.2075 281.125,348.3794 Q280.375,348.5513 279.5469,348.5513 Q276.5938,348.5513 275.0313,346.6138 Q273.4844,344.6606 273.4844,340.9888 Q273.4844,337.3169 275.0313,335.3794 Q276.5938,333.4263 279.5469,333.4263 Q280.375,333.4263 281.125,333.5981 Q281.8906,333.77 282.5625,334.1294 L282.5625,337.3325 Q281.8125,336.645 281.1094,336.3325 Q280.4219,336.02 279.6719,336.02 Q278.0938,336.02 277.2813,337.27 Q276.4844,338.52 276.4844,340.9888 Q276.4844,343.4575 277.2813,344.7075 Q278.0938,345.9575 279.6719,345.9575 Q280.4219,345.9575 281.1094,345.645 Q281.8125,345.3325 282.5625,344.645 L282.5625,347.8481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="294.5" y="347.6938">Memento2</text><line style="stroke:#181818;stroke-width:0.5;" x1="264.5" x2="403.5" y1="357.77" y2="357.77"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="271.5" y="371.9106"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="284.5" y="380.3345">another</text></g><!--link Object1 to Memento--><g id="link_Object1_Memento"><path codeLine="25" d="M178.25,150.44 C196.67,172.1 207.7267,185.108 220.8467,200.538 " fill="none" id="Object1-to-Memento" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="228.62,209.68,227.7807,202.5179,220.8467,200.538,221.686,207.7001,228.62,209.68" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Object2 to Memento--><g id="link_Object2_Memento"><path codeLine="26" d="M324.39,138.64 C302.79,163.85 286.8162,182.4861 271.1762,200.7461 " fill="none" id="Object2-to-Memento" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="263.37,209.86,270.3111,207.9051,271.1762,200.7461,264.2351,202.701,263.37,209.86" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Memento to Memento1--><g id="link_Memento_Memento1"><path codeLine="28" d="M221.0172,267.134 C209.5472,283.214 203.58,291.56 189.17,311.74 " fill="none" id="Memento-backto-Memento1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="231.47,252.48,216.1325,263.6497,225.9019,270.6182,231.47,252.48" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Memento to Memento2--><g id="link_Memento_Memento2"><path codeLine="29" d="M270.988,267.1303 C284.758,286.4203 295.19,301.03 311.18,323.44 " fill="none" id="Memento-backto-Memento2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="260.53,252.48,266.1045,270.6163,275.8714,263.6443,260.53,252.48" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[bO-z3e8m58NtFaKd0p5DbD71qSqu-0IL7aA5jgIzcFZ3kqi46j4usEdsoybtpmsLjetqqjGkhw2uGY7RcdREqb7VmBCLosiP0Z-SpiXfpU-Czqy4Pp1CXKQjmcjU1db1acxu7WQMt00z0ZcFP8IBb7Li9iqcgRIEIlX_NTeIV25pnEoe7x-_ItSVoQycVM0wN0WN_LFlTyRYDj6AnpRog9vZLce53jFGbHjGwLHu0W00]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Схож с прототипом
</span>
</li>
<li>
<span>
Не нарушает инкапсуляцию
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Сериализация</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_observer_наблюдатель">6.7. Observer (наблюдатель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="313px" preserveAspectRatio="none" style="width:620px;height:313px;background:#FFFFFF;" version="1.1" viewBox="0 0 620 313" width="620px" zoomAndPan="magnify"><defs/><g><!--class Publisher--><g id="elem_Publisher"><rect codeLine="1" fill="#F1F1F1" height="143.125" id="Publisher" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="242" x="371" y="7"/><ellipse cx="441" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M444.0625,31.0781 Q443.375,31.4375 442.625,31.6094 Q441.875,31.7813 441.0469,31.7813 Q438.0938,31.7813 436.5313,29.8438 Q434.9844,27.8906 434.9844,24.2188 Q434.9844,20.5469 436.5313,18.6094 Q438.0938,16.6563 441.0469,16.6563 Q441.875,16.6563 442.625,16.8281 Q443.3906,17 444.0625,17.3594 L444.0625,20.5625 Q443.3125,19.875 442.6094,19.5625 Q441.9219,19.25 441.1719,19.25 Q439.5938,19.25 438.7813,20.5 Q437.9844,21.75 437.9844,24.2188 Q437.9844,26.6875 438.7813,27.9375 Q439.5938,29.1875 441.1719,29.1875 Q441.9219,29.1875 442.6094,28.875 Q443.3125,28.5625 444.0625,27.875 L444.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="93" x="463" y="30.9238">Publisher</text><line style="stroke:#181818;stroke-width:0.5;" x1="372" x2="612" y1="41" y2="41"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="379" y="55.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="215" x="392" y="63.5645">observers: Observer[]</text><line style="stroke:#181818;stroke-width:0.5;" x1="372" x2="612" y1="72.2813" y2="72.2813"/><ellipse cx="382" cy="89.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="392" y="94.8457">add(Observer)</text><ellipse cx="382" cy="112.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="392" y="118.127">remove(Observer)</text><ellipse cx="382" cy="135.9844" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="392" y="141.4082">notify()</text></g><!--class Observer--><g id="elem_Observer"><rect codeLine="8" fill="#F1F1F1" height="65.2813" id="Observer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="128" y="45.92"/><ellipse cx="182" cy="62.92" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M177.1875,58.3731 L177.1875,55.8419 L185.8594,55.8419 L185.8594,58.3731 L182.9688,58.3731 L182.9688,67.8731 L185.8594,67.8731 L185.8594,70.42 L177.1875,70.42 L177.1875,67.8731 L180.0781,67.8731 L180.0781,58.3731 L177.1875,58.3731 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="91" x="204" y="69.8438">Observer</text><line style="stroke:#181818;stroke-width:0.5;" x1="129" x2="335" y1="79.92" y2="79.92"/><ellipse cx="139" cy="97.0606" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="149" y="102.4845">update(publisher)</text></g><!--class Observer1--><g id="elem_Observer1"><rect codeLine="12" fill="#F1F1F1" height="96.5625" id="Observer1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="7" y="210.13"/><ellipse cx="55" cy="227.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M58.0625,234.2081 Q57.375,234.5675 56.625,234.7394 Q55.875,234.9113 55.0469,234.9113 Q52.0938,234.9113 50.5313,232.9738 Q48.9844,231.0206 48.9844,227.3488 Q48.9844,223.6769 50.5313,221.7394 Q52.0938,219.7863 55.0469,219.7863 Q55.875,219.7863 56.625,219.9581 Q57.3906,220.13 58.0625,220.4894 L58.0625,223.6925 Q57.3125,223.005 56.6094,222.6925 Q55.9219,222.38 55.1719,222.38 Q53.5938,222.38 52.7813,223.63 Q51.9844,224.88 51.9844,227.3488 Q51.9844,229.8175 52.7813,231.0675 Q53.5938,232.3175 55.1719,232.3175 Q55.9219,232.3175 56.6094,232.005 Q57.3125,231.6925 58.0625,231.005 L58.0625,234.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="103" x="77" y="234.0538">Observer1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="214" y1="244.13" y2="244.13"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="13" y="266.6945">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="214" y1="275.4113" y2="275.4113"/><ellipse cx="18" cy="292.5519" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="28" y="297.9757">update(publisher)</text></g><!--class Observer2--><g id="elem_Observer2"><rect codeLine="17" fill="#F1F1F1" height="96.5625" id="Observer2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="250" y="210.13"/><ellipse cx="298" cy="227.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M301.0625,234.2081 Q300.375,234.5675 299.625,234.7394 Q298.875,234.9113 298.0469,234.9113 Q295.0938,234.9113 293.5313,232.9738 Q291.9844,231.0206 291.9844,227.3488 Q291.9844,223.6769 293.5313,221.7394 Q295.0938,219.7863 298.0469,219.7863 Q298.875,219.7863 299.625,219.9581 Q300.3906,220.13 301.0625,220.4894 L301.0625,223.6925 Q300.3125,223.005 299.6094,222.6925 Q298.9219,222.38 298.1719,222.38 Q296.5938,222.38 295.7813,223.63 Q294.9844,224.88 294.9844,227.3488 Q294.9844,229.8175 295.7813,231.0675 Q296.5938,232.3175 298.1719,232.3175 Q298.9219,232.3175 299.6094,232.005 Q300.3125,231.6925 301.0625,231.005 L301.0625,234.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="103" x="320" y="234.0538">Observer2</text><line style="stroke:#181818;stroke-width:0.5;" x1="251" x2="457" y1="244.13" y2="244.13"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="256" y="266.6945">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="251" x2="457" y1="275.4113" y2="275.4113"/><ellipse cx="261" cy="292.5519" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="271" y="297.9757">update(publisher)</text></g><!--reverse link Observer to Publisher--><g id="link_Observer_Publisher"><path codeLine="22" d="M348.36,78.56 C359.81,78.56 359.26,78.56 370.71,78.56 " fill="none" id="Observer-backto-Publisher" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="336.36,78.56,342.36,82.56,348.36,78.56,342.36,74.56,336.36,78.56" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="10" x="344.0494" y="73.3257">*</text></g><!--reverse link Observer to Observer1--><g id="link_Observer_Observer1"><path codeLine="23" d="M200.2441,126.2417 C181.6141,153.6217 164.59,178.64 143.38,209.82 " fill="none" id="Observer-backto-Observer1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="210.37,111.36,195.2835,122.8664,205.2047,129.617,210.37,111.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Observer to Observer2--><g id="link_Observer_Observer2"><path codeLine="24" d="M263.9914,126.2038 C282.7714,153.5838 299.96,178.64 321.35,209.82 " fill="none" id="Observer-backto-Observer2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="253.81,111.36,259.0435,129.5976,268.9393,122.81,253.81,111.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[ZK-v3eCm3Dtp5HOJ50MrZ1qwTcsbZbM7G1mH4GZAWKIFVs_5AT45JzOx_9vjAUk66LOfdPV8WQDWNhcphjrDFX7IFSaLinQkFbFI5cZWHU0tL6SMJOl67k4ohlT7JyMCyt32eW4oMEaMrsYjdHHT694F8R9sQ0JBSJut9iM-uSnXs4mDUldGQf8UHcsI99izwIRFyZTLL4Em2-O3P4cddhvF_qIw9aWXEG9MZUj0I5JSVW40]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Наблюдатели подписываются на события, генерируемые <code>Publisher</code>
</span>
</li>
<li>
<span>
Оповещения происходят в случайном порядке, в отличие от цепочки обязанностей
</span>
</li>
<li>
<span>
Похож на посредника, но <code>Publisher</code> ничего не знает о подписчиках
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Почтовая рассылка</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_state_состояние">6.8. State (состояние)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="422px" preserveAspectRatio="none" style="width:915px;height:422px;background:#FFFFFF;" version="1.1" viewBox="0 0 915 422" width="915px" zoomAndPan="magnify"><defs/><g><!--class Context--><g id="elem_Context"><rect codeLine="1" fill="#F1F1F1" height="111.8438" id="Context" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="223" x="608.5" y="304.13"/><ellipse cx="676.5" cy="321.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M679.5625,328.2081 Q678.875,328.5675 678.125,328.7394 Q677.375,328.9113 676.5469,328.9113 Q673.5938,328.9113 672.0313,326.9738 Q670.4844,325.0206 670.4844,321.3488 Q670.4844,317.6769 672.0313,315.7394 Q673.5938,313.7863 676.5469,313.7863 Q677.375,313.7863 678.125,313.9581 Q678.8906,314.13 679.5625,314.4894 L679.5625,317.6925 Q678.8125,317.005 678.1094,316.6925 Q677.4219,316.38 676.6719,316.38 Q675.0938,316.38 674.2813,317.63 Q673.4844,318.88 673.4844,321.3488 Q673.4844,323.8175 674.2813,325.0675 Q675.0938,326.3175 676.6719,326.3175 Q677.4219,326.3175 678.1094,326.005 Q678.8125,325.6925 679.5625,325.005 L679.5625,328.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="698.5" y="328.0538">Context</text><line style="stroke:#181818;stroke-width:0.5;" x1="609.5" x2="830.5" y1="338.13" y2="338.13"/><polygon fill="#FFFF44" points="619.5,350.2706,623.5,354.2706,619.5,358.2706,615.5,354.2706" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="196" x="629.5" y="360.6945">changeState(State)</text><ellipse cx="619.5" cy="378.5519" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="629.5" y="383.9757">method1()</text><ellipse cx="619.5" cy="401.8331" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="629.5" y="407.257">method2()</text></g><!--class State--><g id="elem_State"><rect codeLine="7" fill="#F1F1F1" height="88.5625" id="State" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="653" y="7"/><ellipse cx="690.15" cy="24" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M685.3375,19.4531 L685.3375,16.9219 L694.0094,16.9219 L694.0094,19.4531 L691.1188,19.4531 L691.1188,28.9531 L694.0094,28.9531 L694.0094,31.5 L685.3375,31.5 L685.3375,28.9531 L688.2281,28.9531 L688.2281,19.4531 L685.3375,19.4531 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="53" x="709.85" y="30.9238">State</text><line style="stroke:#181818;stroke-width:0.5;" x1="654" x2="786" y1="41" y2="41"/><ellipse cx="664" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="674" y="63.5645">method1()</text><ellipse cx="664" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="674" y="86.8457">method2()</text></g><!--class State1--><g id="elem_State1"><rect codeLine="12" fill="#F1F1F1" height="88.5625" id="State1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="569" y="155.56"/><ellipse cx="600.3" cy="172.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M603.3625,179.6381 Q602.675,179.9975 601.925,180.1694 Q601.175,180.3413 600.3469,180.3413 Q597.3938,180.3413 595.8313,178.4038 Q594.2844,176.4506 594.2844,172.7788 Q594.2844,169.1069 595.8313,167.1694 Q597.3938,165.2163 600.3469,165.2163 Q601.175,165.2163 601.925,165.3881 Q602.6906,165.56 603.3625,165.9194 L603.3625,169.1225 Q602.6125,168.435 601.9094,168.1225 Q601.2219,167.81 600.4719,167.81 Q598.8938,167.81 598.0813,169.06 Q597.2844,170.31 597.2844,172.7788 Q597.2844,175.2475 598.0813,176.4975 Q598.8938,177.7475 600.4719,177.7475 Q601.2219,177.7475 601.9094,177.435 Q602.6125,177.1225 603.3625,176.435 L603.3625,179.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="618.7" y="179.4838">State1</text><line style="stroke:#181818;stroke-width:0.5;" x1="570" x2="702" y1="189.56" y2="189.56"/><ellipse cx="580" cy="206.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="590" y="212.1245">method1()</text><ellipse cx="580" cy="229.9819" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="590" y="235.4057">method2()</text></g><!--class State2--><g id="elem_State2"><rect codeLine="17" fill="#F1F1F1" height="88.5625" id="State2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="7" y="155.56"/><ellipse cx="38.3" cy="172.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M41.3625,179.6381 Q40.675,179.9975 39.925,180.1694 Q39.175,180.3413 38.3469,180.3413 Q35.3938,180.3413 33.8313,178.4038 Q32.2844,176.4506 32.2844,172.7788 Q32.2844,169.1069 33.8313,167.1694 Q35.3938,165.2163 38.3469,165.2163 Q39.175,165.2163 39.925,165.3881 Q40.6906,165.56 41.3625,165.9194 L41.3625,169.1225 Q40.6125,168.435 39.9094,168.1225 Q39.2219,167.81 38.4719,167.81 Q36.8938,167.81 36.0813,169.06 Q35.2844,170.31 35.2844,172.7788 Q35.2844,175.2475 36.0813,176.4975 Q36.8938,177.7475 38.4719,177.7475 Q39.2219,177.7475 39.9094,177.435 Q40.6125,177.1225 41.3625,176.435 L41.3625,179.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="56.7" y="179.4838">State2</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="140" y1="189.56" y2="189.56"/><ellipse cx="18" cy="206.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="212.1245">method1()</text><ellipse cx="18" cy="229.9819" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="28" y="235.4057">method2()</text></g><!--class State3--><g id="elem_State3"><rect codeLine="22" fill="#F1F1F1" height="88.5625" id="State3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="738" y="155.56"/><ellipse cx="769.3" cy="172.56" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M772.3625,179.6381 Q771.675,179.9975 770.925,180.1694 Q770.175,180.3413 769.3469,180.3413 Q766.3938,180.3413 764.8313,178.4038 Q763.2844,176.4506 763.2844,172.7788 Q763.2844,169.1069 764.8313,167.1694 Q766.3938,165.2163 769.3469,165.2163 Q770.175,165.2163 770.925,165.3881 Q771.6906,165.56 772.3625,165.9194 L772.3625,169.1225 Q771.6125,168.435 770.9094,168.1225 Q770.2219,167.81 769.4719,167.81 Q767.8938,167.81 767.0813,169.06 Q766.2844,170.31 766.2844,172.7788 Q766.2844,175.2475 767.0813,176.4975 Q767.8938,177.7475 769.4719,177.7475 Q770.2219,177.7475 770.9094,177.435 Q771.6125,177.1225 772.3625,176.435 L772.3625,179.6381 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="787.7" y="179.4838">State3</text><line style="stroke:#181818;stroke-width:0.5;" x1="739" x2="871" y1="189.56" y2="189.56"/><ellipse cx="749" cy="206.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="759" y="212.1245">method1()</text><ellipse cx="749" cy="229.9819" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="107" x="759" y="235.4057">method2()</text></g><path d="M175.5,166.56 L175.5,190.8413 L135,205.2006 L175.5,198.8413 L175.5,223.1225 A0,0 0 0 0 175.5,223.1225 L534.5,223.1225 A0,0 0 0 0 534.5,223.1225 L534.5,176.56 L524.5,166.56 L175.5,166.56 A0,0 0 0 0 175.5,166.56 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M524.5,166.56 L524.5,176.56 L534.5,176.56 L524.5,166.56 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="151" x="181.5" y="190.1245">doSomething()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="338" x="181.5" y="213.4057">context.changeState(new State3)</text><!--link Context to State--><g id="link_Context_State"><path codeLine="27" d="M831.85,305.73 C854.77,289.33 875.89,268.9 889,244.13 C907.41,209.34 908.25,189.89 889,155.56 C867.3,116.88 835.5559,95.7553 798.4859,79.5553 " fill="none" id="Context-to-State" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="787.49,74.75,791.3862,80.8179,798.4859,79.5553,794.5897,73.4874,787.49,74.75" style="stroke:#181818;stroke-width:1.0;"/></g><!--link State1 to Context--><g id="link_State1_Context"><path codeLine="28" d="M659.18,244.49 C668.89,262.79 674.6583,273.6736 684.9583,293.0536 " fill="none" id="State1-to-Context" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="690.59,303.65,691.3063,296.4746,684.9583,293.0536,684.242,300.229,690.59,303.65" style="stroke:#181818;stroke-width:1.0;"/></g><!--link State2 to Context--><g id="link_State2_Context"><path codeLine="29" d="M141.14,237.45 C146.76,239.9 152.43,242.16 158,244.13 C309.34,297.45 480.9269,327.4988 596.1169,343.6988 " fill="none" id="State2-to-Context" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="608,345.37,602.6155,340.5734,596.1169,343.6988,601.5014,348.4954,608,345.37" style="stroke:#181818;stroke-width:1.0;"/></g><!--link State3 to Context--><g id="link_State3_Context"><path codeLine="30" d="M781.55,244.49 C771.72,262.79 765.8627,273.7008 755.4427,293.0808 " fill="none" id="State3-to-Context" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="749.76,303.65,756.1244,300.2597,755.4427,293.0808,749.0783,296.4712,749.76,303.65" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link State to State1--><g id="link_State_State1"><path codeLine="32" d="M686.0724,111.4786 C675.3424,130.2086 671.77,136.44 661.02,155.18 " fill="none" id="State-backto-State1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="695.02,95.86,680.8662,108.4961,691.2786,114.4611,695.02,95.86" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link State to State2--><g id="link_State_State2"><path codeLine="33" d="M634.7316,60.0237 C527.6016,70.8737 330.76,96.63 158,155.56 C152.41,157.47 146.73,159.7 141.1,162.12 " fill="none" id="State-backto-State2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="652.64,58.21,634.127,54.0543,635.3362,65.9932,652.64,58.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link State to State3--><g id="link_State_State3"><path codeLine="34" d="M754.305,111.4282 C765.175,130.1582 768.81,136.44 779.68,155.18 " fill="none" id="State-backto-State3" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="745.27,95.86,749.1156,114.4399,759.4944,108.4165,745.27,95.86" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[bP5D2eCm48NtSug1Rlf3IjMTYsuAlO0d2CceGKr4K_f_zqPDYoAKDel0VBmtCtbf2wLhtl2gDA8WYP9IVYhjqMYRg1jXk0DHyhR5WoDqiNW7T6SXSgupIYotjEplLSyt5TdSo60vAKDNFW6Kwz2aN13s3j_ggsMOtSk3F_NXd_he5_qx1TQmzM03lnoJpBn30h_0d4LJzZ6Vs6C_xXVEKJH1e8rBi55PRj6a_iLnFDrTciHqHEdC4p4Ctew_JzFP9x02qXAxpW2vaeHKrVQAgQ9IjYy0]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Замена большого switch-case
</span>
</li>
<li>
<span>
<code>Context</code> агрегирует объекты <code>State</code>
</span>
</li>
<li>
<span>
Каждый <code>State</code> может переключать состояние в <code>Context</code>
</span>
</li>
<li>
<span>
<code>State</code>-ы кое-что знают друг о друге
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>TCP-соединение, переключение окон на экране смартфона</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_strategy_стратегия">6.9. Strategy (стратегия)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="259px" preserveAspectRatio="none" style="width:501px;height:259px;background:#FFFFFF;" version="1.1" viewBox="0 0 501 259" width="501px" zoomAndPan="magnify"><defs/><g><!--class Strategy--><g id="elem_Strategy"><rect codeLine="1" fill="#F1F1F1" height="65.2813" id="Strategy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="285.5" y="18.65"/><ellipse cx="301.5" cy="35.65" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M296.6875,31.1031 L296.6875,28.5719 L305.3594,28.5719 L305.3594,31.1031 L302.4688,31.1031 L302.4688,40.6031 L305.3594,40.6031 L305.3594,43.15 L296.6875,43.15 L296.6875,40.6031 L299.5781,40.6031 L299.5781,31.1031 L296.6875,31.1031 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="86" x="316.5" y="42.5738">Strategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="286.5" x2="404.5" y1="52.65" y2="52.65"/><ellipse cx="296.5" cy="69.7906" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="306.5" y="75.2145">do()</text></g><!--class Strategy1--><g id="elem_Strategy1"><rect codeLine="5" fill="#F1F1F1" height="96.5625" id="Strategy1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="195.5" y="155.57"/><ellipse cx="211.5" cy="172.57" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M214.5625,179.6481 Q213.875,180.0075 213.125,180.1794 Q212.375,180.3513 211.5469,180.3513 Q208.5938,180.3513 207.0313,178.4138 Q205.4844,176.4606 205.4844,172.7888 Q205.4844,169.1169 207.0313,167.1794 Q208.5938,165.2263 211.5469,165.2263 Q212.375,165.2263 213.125,165.3981 Q213.8906,165.57 214.5625,165.9294 L214.5625,169.1325 Q213.8125,168.445 213.1094,168.1325 Q212.4219,167.82 211.6719,167.82 Q210.0938,167.82 209.2813,169.07 Q208.4844,170.32 208.4844,172.7888 Q208.4844,175.2575 209.2813,176.5075 Q210.0938,177.7575 211.6719,177.7575 Q212.4219,177.7575 213.1094,177.445 Q213.8125,177.1325 214.5625,176.445 L214.5625,179.6481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="226.5" y="179.4938">Strategy1</text><line style="stroke:#181818;stroke-width:0.5;" x1="196.5" x2="326.5" y1="189.57" y2="189.57"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="201.5" y="212.1345">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="196.5" x2="326.5" y1="220.8513" y2="220.8513"/><ellipse cx="206.5" cy="237.9919" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="216.5" y="243.4157">do()</text></g><!--class Strategy2--><g id="elem_Strategy2"><rect codeLine="10" fill="#F1F1F1" height="96.5625" id="Strategy2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="362.5" y="155.57"/><ellipse cx="378.5" cy="172.57" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M381.5625,179.6481 Q380.875,180.0075 380.125,180.1794 Q379.375,180.3513 378.5469,180.3513 Q375.5938,180.3513 374.0313,178.4138 Q372.4844,176.4606 372.4844,172.7888 Q372.4844,169.1169 374.0313,167.1794 Q375.5938,165.2263 378.5469,165.2263 Q379.375,165.2263 380.125,165.3981 Q380.8906,165.57 381.5625,165.9294 L381.5625,169.1325 Q380.8125,168.445 380.1094,168.1325 Q379.4219,167.82 378.6719,167.82 Q377.0938,167.82 376.2813,169.07 Q375.4844,170.32 375.4844,172.7888 Q375.4844,175.2575 376.2813,176.5075 Q377.0938,177.7575 378.6719,177.7575 Q379.4219,177.7575 380.1094,177.445 Q380.8125,177.1325 381.5625,176.445 L381.5625,179.6481 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="98" x="393.5" y="179.4938">Strategy2</text><line style="stroke:#181818;stroke-width:0.5;" x1="363.5" x2="493.5" y1="189.57" y2="189.57"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="368.5" y="212.1345">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="363.5" x2="493.5" y1="220.8513" y2="220.8513"/><ellipse cx="373.5" cy="237.9919" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="41" x="383.5" y="243.4157">do()</text></g><!--class Context--><g id="elem_Context"><rect codeLine="15" fill="#F1F1F1" height="88.5625" id="Context" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="243" x="7" y="7"/><ellipse cx="85" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M88.0625,31.0781 Q87.375,31.4375 86.625,31.6094 Q85.875,31.7813 85.0469,31.7813 Q82.0938,31.7813 80.5313,29.8438 Q78.9844,27.8906 78.9844,24.2188 Q78.9844,20.5469 80.5313,18.6094 Q82.0938,16.6563 85.0469,16.6563 Q85.875,16.6563 86.625,16.8281 Q87.3906,17 88.0625,17.3594 L88.0625,20.5625 Q87.3125,19.875 86.6094,19.5625 Q85.9219,19.25 85.1719,19.25 Q83.5938,19.25 82.7813,20.5 Q81.9844,21.75 81.9844,24.2188 Q81.9844,26.6875 82.7813,27.9375 Q83.5938,29.1875 85.1719,29.1875 Q85.9219,29.1875 86.6094,28.875 Q87.3125,28.5625 88.0625,27.875 L88.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="78" x="107" y="30.9238">Context</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="249" y1="41" y2="41"/><ellipse cx="18" cy="58.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="216" x="28" y="63.5645">setStrategy(Strategy)</text><ellipse cx="18" cy="81.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="28" y="86.8457">make()</text></g><!--reverse link Strategy to Strategy1--><g id="link_Strategy_Strategy1"><path codeLine="20" d="M318.92,99.939 C307.41,120.569 300.99,132.07 288.07,155.23 " fill="none" id="Strategy-backto-Strategy1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="327.69,84.22,313.6803,97.0156,324.1596,102.8623,327.69,84.22" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Strategy to Strategy2--><g id="link_Strategy_Strategy2"><path codeLine="21" d="M371.7942,99.9811 C383.1742,120.6111 389.48,132.07 402.25,155.23 " fill="none" id="Strategy-backto-Strategy2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="363.1,84.22,366.5405,102.8791,377.0479,97.083,363.1,84.22" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Context to Strategy--><g id="link_Context_Strategy"><path codeLine="22" d="M250.14,51.29 C261.81,51.29 261.48,51.29 273.15,51.29 " fill="none" id="Context-to-Strategy" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="285.15,51.29,279.15,47.29,273.15,51.29,279.15,55.29,285.15,51.29" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[VOvD2eCm44RtSufPAYNIUe1k2hs09nZCs0OJ8ya8jJzths1Ze0jdDSpxXlV5tWmZ1NBMjprhrDpHPENg1sdCax4-WXc4GqSjOoE1X6yplW2NEMXVbF01Q2t5kD7J3rTLjHUhzsENfG4_9AaYIteiqbAko57FwsTke2RrFcygoCu_a2mgA9-lS3UQaTqeCtQ6hOvV]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Все стратегии делают одно и то же разными способами
</span>
</li>
<li>
<span>
<code>Context</code> схож с мостом и немного адаптером
</span>
</li>
<li>
<span>
Пользователь выбирает стратегии, <code>Context</code> их только использует
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Построение маршрута из точки A в точку B для разных средств передвижения</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_template_method_шаблонный_метод">6.10. Template method (шаблонный метод)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="251px" preserveAspectRatio="none" style="width:512px;height:251px;background:#FFFFFF;" version="1.1" viewBox="0 0 512 251" width="512px" zoomAndPan="magnify"><defs/><g><!--class Algorithm--><g id="elem_Algorithm"><rect codeLine="1" fill="#F1F1F1" height="135.125" id="Algorithm" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="209" x="162" y="109"/><ellipse cx="212" cy="126" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M215.0625,133.0781 Q214.375,133.4375 213.625,133.6094 Q212.875,133.7813 212.0469,133.7813 Q209.0938,133.7813 207.5313,131.8438 Q205.9844,129.8906 205.9844,126.2188 Q205.9844,122.5469 207.5313,120.6094 Q209.0938,118.6563 212.0469,118.6563 Q212.875,118.6563 213.625,118.8281 Q214.3906,119 215.0625,119.3594 L215.0625,122.5625 Q214.3125,121.875 213.6094,121.5625 Q212.9219,121.25 212.1719,121.25 Q210.5938,121.25 209.7813,122.5 Q208.9844,123.75 208.9844,126.2188 Q208.9844,128.6875 209.7813,129.9375 Q210.5938,131.1875 212.1719,131.1875 Q212.9219,131.1875 213.6094,130.875 Q214.3125,130.5625 215.0625,129.875 L215.0625,133.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="100" x="234" y="132.9238">Algorithm</text><line style="stroke:#181818;stroke-width:0.5;" x1="163" x2="370" y1="143" y2="143"/><ellipse cx="173" cy="160.1406" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="183" y="165.5645">templateMethod()</text><ellipse cx="173" cy="183.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="183" y="188.8457">step1()</text><ellipse cx="173" cy="206.7031" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="183" y="212.127">step2()</text><ellipse cx="173" cy="229.9844" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="183" y="235.4082">step3()</text></g><!--class Step1--><g id="elem_Step1"><rect codeLine="8" fill="#F1F1F1" height="88.5625" id="Step1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="28" y="132.28"/><ellipse cx="46.7" cy="149.28" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M49.7625,156.3581 Q49.075,156.7175 48.325,156.8894 Q47.575,157.0613 46.7469,157.0613 Q43.7938,157.0613 42.2313,155.1238 Q40.6844,153.1706 40.6844,149.4988 Q40.6844,145.8269 42.2313,143.8894 Q43.7938,141.9363 46.7469,141.9363 Q47.575,141.9363 48.325,142.1081 Q49.0906,142.28 49.7625,142.6394 L49.7625,145.8425 Q49.0125,145.155 48.3094,144.8425 Q47.6219,144.53 46.8719,144.53 Q45.2938,144.53 44.4813,145.78 Q43.6844,147.03 43.6844,149.4988 Q43.6844,151.9675 44.4813,153.2175 Q45.2938,154.4675 46.8719,154.4675 Q47.6219,154.4675 48.3094,154.155 Q49.0125,153.8425 49.7625,153.155 L49.7625,156.3581 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="62.3" y="156.2038">Step1</text><line style="stroke:#181818;stroke-width:0.5;" x1="29" x2="126" y1="166.28" y2="166.28"/><ellipse cx="39" cy="183.4206" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="49" y="188.8445">step1()</text><ellipse cx="39" cy="206.7019" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="49" y="212.1257">step2()</text></g><!--class Step2--><g id="elem_Step2"><rect codeLine="13" fill="#F1F1F1" height="88.5625" id="Step2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="99" x="406" y="132.28"/><ellipse cx="424.7" cy="149.28" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M427.7625,156.3581 Q427.075,156.7175 426.325,156.8894 Q425.575,157.0613 424.7469,157.0613 Q421.7938,157.0613 420.2313,155.1238 Q418.6844,153.1706 418.6844,149.4988 Q418.6844,145.8269 420.2313,143.8894 Q421.7938,141.9363 424.7469,141.9363 Q425.575,141.9363 426.325,142.1081 Q427.0906,142.28 427.7625,142.6394 L427.7625,145.8425 Q427.0125,145.155 426.3094,144.8425 Q425.6219,144.53 424.8719,144.53 Q423.2938,144.53 422.4813,145.78 Q421.6844,147.03 421.6844,149.4988 Q421.6844,151.9675 422.4813,153.2175 Q423.2938,154.4675 424.8719,154.4675 Q425.6219,154.4675 426.3094,154.155 Q427.0125,153.8425 427.7625,153.155 L427.7625,156.3581 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="59" x="440.3" y="156.2038">Step2</text><line style="stroke:#181818;stroke-width:0.5;" x1="407" x2="504" y1="166.28" y2="166.28"/><ellipse cx="417" cy="183.4206" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="427" y="188.8445">step1()</text><ellipse cx="417" cy="206.7019" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="72" x="427" y="212.1257">step3()</text></g><!--class Algorithm1--><g id="elem_Algorithm1"><rect fill="#F1F1F1" height="42" id="Algorithm1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="7" y="7"/><ellipse cx="23" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M26.0625,31.0781 Q25.375,31.4375 24.625,31.6094 Q23.875,31.7813 23.0469,31.7813 Q20.0938,31.7813 18.5313,29.8438 Q16.9844,27.8906 16.9844,24.2188 Q16.9844,20.5469 18.5313,18.6094 Q20.0938,16.6563 23.0469,16.6563 Q23.875,16.6563 24.625,16.8281 Q25.3906,17 26.0625,17.3594 L26.0625,20.5625 Q25.3125,19.875 24.6094,19.5625 Q23.9219,19.25 23.1719,19.25 Q21.5938,19.25 20.7813,20.5 Q19.9844,21.75 19.9844,24.2188 Q19.9844,26.6875 20.7813,27.9375 Q21.5938,29.1875 23.1719,29.1875 Q23.9219,29.1875 24.6094,28.875 Q25.3125,28.5625 26.0625,27.875 L26.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="113" x="38" y="30.9238">Algorithm1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="153" y1="41" y2="41"/></g><!--class Algorithm2--><g id="elem_Algorithm2"><rect fill="#F1F1F1" height="42" id="Algorithm2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147" x="287" y="7"/><ellipse cx="303" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M306.0625,31.0781 Q305.375,31.4375 304.625,31.6094 Q303.875,31.7813 303.0469,31.7813 Q300.0938,31.7813 298.5313,29.8438 Q296.9844,27.8906 296.9844,24.2188 Q296.9844,20.5469 298.5313,18.6094 Q300.0938,16.6563 303.0469,16.6563 Q303.875,16.6563 304.625,16.8281 Q305.3906,17 306.0625,17.3594 L306.0625,20.5625 Q305.3125,19.875 304.6094,19.5625 Q303.9219,19.25 303.1719,19.25 Q301.5938,19.25 300.7813,20.5 Q299.9844,21.75 299.9844,24.2188 Q299.9844,26.6875 300.7813,27.9375 Q301.5938,29.1875 303.1719,29.1875 Q303.9219,29.1875 304.6094,28.875 Q305.3125,28.5625 306.0625,27.875 L306.0625,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="113" x="318" y="30.9238">Algorithm2</text><line style="stroke:#181818;stroke-width:0.5;" x1="288" x2="433" y1="41" y2="41"/></g><!--link Algorithm1 to Algorithm--><g id="link_Algorithm1_Algorithm"><path codeLine="18" d="M106.36,49.37 C126.03,64.87 140.1339,75.9768 167.4339,97.4968 " fill="none" id="Algorithm1-to-Algorithm" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="181.57,108.64,171.1483,92.7848,163.7195,102.2088,181.57,108.64" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Algorithm1 to Step1--><g id="link_Algorithm1_Step1"><path codeLine="19" d="M80.08,49.37 C79.65,70.61 79.3187,86.5438 78.7587,113.8738 " fill="none" id="Algorithm1-to-Step1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="78.39,131.87,84.7575,113.9967,72.76,113.7509,78.39,131.87" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Algorithm2 to Algorithm--><g id="link_Algorithm2_Algorithm"><path codeLine="21" d="M347.43,49.37 C337.49,64.87 332.9365,71.9678 319.1365,93.4878 " fill="none" id="Algorithm2-to-Algorithm" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="309.42,108.64,324.1873,96.7267,314.0858,90.249,309.42,108.64" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Algorithm2 to Step2--><g id="link_Algorithm2_Step2"><path codeLine="22" d="M373.71,49.37 C387.47,70.61 399.6814,89.4343 417.3914,116.7643 " fill="none" id="Algorithm2-to-Step2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="427.18,131.87,422.4266,113.5014,412.3562,120.0271,427.18,131.87" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[TOyz3i8m38NtdC8Z25MYOKTYOMFg2QB69L6T9chSWR-x4w3G8AYtPx_lsOwjxOBgbIDVjwX1OwC6uhtlkB9d1BaMDQaOOKT7tris3Yu2KgqONI35U40sNY-Mhsva36KkP2usITp4c5WzhE-qlzoNLSvQnzJFXIKKnNKxNVmpUMxE03aBo0cGGXYh4TBRV8B68kbu1m00]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Множественное наследование
</span>
</li>
<li>
<span>
Алгоритм разбивается на шаги, которые реализованы отдельно
</span>
</li>
<li>
<span>
Все шаги комбинируются и жёстко прописаны в <code>templateMethod</code>
</span>
</li>
<li>
<span>
<code>templateMethod</code> не переопределяется
</span>
</li>
<li>
<span>
Схож со стратегиями, где композиция заменена наследованием
</span>
</li>
<li>
<span>
Невозможно переопределять шаги во время исполнения
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Общий ИИ для разных персонажей игры</p></div>
</div></div>
<div class="sect2 slide">
<h1 id="_visitor_посетитель">6.11. Visitor (посетитель)</h1>

<div class="sectionbody">
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="33%" />
<col width="66%" />
<tbody>
<tr>
<td align="center" valign="top"><div><div class="imageblock">
<div class="content"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="497px" preserveAspectRatio="none" style="width:604px;height:497px;background:#FFFFFF;" version="1.1" viewBox="0 0 604 497" width="604px" zoomAndPan="magnify"><defs/><g><!--class Visitor--><g id="elem_Visitor"><rect codeLine="1" fill="#F1F1F1" height="88.5625" id="Visitor" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="205" y="252.56"/><ellipse cx="250.25" cy="269.56" fill="#B4A7E5" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M245.4375,265.0131 L245.4375,262.4819 L254.1094,262.4819 L254.1094,265.0131 L251.2188,265.0131 L251.2188,274.5131 L254.1094,274.5131 L254.1094,277.06 L245.4375,277.06 L245.4375,274.5131 L248.3281,274.5131 L248.3281,265.0131 L245.4375,265.0131 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" font-style="italic" lengthAdjust="spacing" textLength="64" x="271.75" y="276.4838">Visitor</text><line style="stroke:#181818;stroke-width:0.5;" x1="206" x2="367" y1="286.56" y2="286.56"/><ellipse cx="216" cy="303.7006" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="309.1245">visit(Object1)</text><ellipse cx="216" cy="326.9819" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="332.4057">visit(Object2)</text></g><!--class Visitor1--><g id="elem_Visitor1"><rect codeLine="6" fill="#F1F1F1" height="88.5625" id="Visitor1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="7" y="402.13"/><ellipse cx="46.4" cy="419.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M49.4625,426.2081 Q48.775,426.5675 48.025,426.7394 Q47.275,426.9113 46.4469,426.9113 Q43.4938,426.9113 41.9313,424.9738 Q40.3844,423.0206 40.3844,419.3488 Q40.3844,415.6769 41.9313,413.7394 Q43.4938,411.7863 46.4469,411.7863 Q47.275,411.7863 48.025,411.9581 Q48.7906,412.13 49.4625,412.4894 L49.4625,415.6925 Q48.7125,415.005 48.0094,414.6925 Q47.3219,414.38 46.5719,414.38 Q44.9938,414.38 44.1813,415.63 Q43.3844,416.88 43.3844,419.3488 Q43.3844,421.8175 44.1813,423.0675 Q44.9938,424.3175 46.5719,424.3175 Q47.3219,424.3175 48.0094,424.005 Q48.7125,423.6925 49.4625,423.005 L49.4625,426.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="66.6" y="426.0538">Visitor1</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="169" y1="436.13" y2="436.13"/><ellipse cx="18" cy="453.2706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="28" y="458.6945">visit(Object1)</text><ellipse cx="18" cy="476.5519" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="28" y="481.9757">visit(Object2)</text></g><!--class Visitor2--><g id="elem_Visitor2"><rect codeLine="11" fill="#F1F1F1" height="88.5625" id="Visitor2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="205" y="402.13"/><ellipse cx="244.4" cy="419.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M247.4625,426.2081 Q246.775,426.5675 246.025,426.7394 Q245.275,426.9113 244.4469,426.9113 Q241.4938,426.9113 239.9313,424.9738 Q238.3844,423.0206 238.3844,419.3488 Q238.3844,415.6769 239.9313,413.7394 Q241.4938,411.7863 244.4469,411.7863 Q245.275,411.7863 246.025,411.9581 Q246.7906,412.13 247.4625,412.4894 L247.4625,415.6925 Q246.7125,415.005 246.0094,414.6925 Q245.3219,414.38 244.5719,414.38 Q242.9938,414.38 242.1813,415.63 Q241.3844,416.88 241.3844,419.3488 Q241.3844,421.8175 242.1813,423.0675 Q242.9938,424.3175 244.5719,424.3175 Q245.3219,424.3175 246.0094,424.005 Q246.7125,423.6925 247.4625,423.005 L247.4625,426.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="264.6" y="426.0538">Visitor2</text><line style="stroke:#181818;stroke-width:0.5;" x1="206" x2="367" y1="436.13" y2="436.13"/><ellipse cx="216" cy="453.2706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="458.6945">visit(Object1)</text><ellipse cx="216" cy="476.5519" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="226" y="481.9757">visit(Object2)</text></g><!--class Visitor3--><g id="elem_Visitor3"><rect codeLine="16" fill="#F1F1F1" height="88.5625" id="Visitor3" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="403" y="402.13"/><ellipse cx="442.4" cy="419.13" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M445.4625,426.2081 Q444.775,426.5675 444.025,426.7394 Q443.275,426.9113 442.4469,426.9113 Q439.4938,426.9113 437.9313,424.9738 Q436.3844,423.0206 436.3844,419.3488 Q436.3844,415.6769 437.9313,413.7394 Q439.4938,411.7863 442.4469,411.7863 Q443.275,411.7863 444.025,411.9581 Q444.7906,412.13 445.4625,412.4894 L445.4625,415.6925 Q444.7125,415.005 444.0094,414.6925 Q443.3219,414.38 442.5719,414.38 Q440.9938,414.38 440.1813,415.63 Q439.3844,416.88 439.3844,419.3488 Q439.3844,421.8175 440.1813,423.0675 Q440.9938,424.3175 442.5719,424.3175 Q443.3219,424.3175 444.0094,424.005 Q444.7125,423.6925 445.4625,423.005 L445.4625,426.2081 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="77" x="462.6" y="426.0538">Visitor3</text><line style="stroke:#181818;stroke-width:0.5;" x1="404" x2="565" y1="436.13" y2="436.13"/><ellipse cx="414" cy="453.2706" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="424" y="458.6945">visit(Object1)</text><ellipse cx="414" cy="476.5519" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="136" x="424" y="481.9757">visit(Object2)</text></g><!--class Object1--><g id="elem_Object1"><rect codeLine="25" fill="#F1F1F1" height="96.5625" id="Object1" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="109.5" y="7"/><ellipse cx="146.65" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M149.7125,31.0781 Q149.025,31.4375 148.275,31.6094 Q147.525,31.7813 146.6969,31.7813 Q143.7438,31.7813 142.1813,29.8438 Q140.6344,27.8906 140.6344,24.2188 Q140.6344,20.5469 142.1813,18.6094 Q143.7438,16.6563 146.6969,16.6563 Q147.525,16.6563 148.275,16.8281 Q149.0406,17 149.7125,17.3594 L149.7125,20.5625 Q148.9625,19.875 148.2594,19.5625 Q147.5719,19.25 146.8219,19.25 Q145.2438,19.25 144.4313,20.5 Q143.6344,21.75 143.6344,24.2188 Q143.6344,26.6875 144.4313,27.9375 Q145.2438,29.1875 146.8219,29.1875 Q147.5719,29.1875 148.2594,28.875 Q148.9625,28.5625 149.7125,27.875 L149.7125,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="166.35" y="30.9238">Object1</text><line style="stroke:#181818;stroke-width:0.5;" x1="110.5" x2="268.5" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="115.5" y="63.5645">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="110.5" x2="268.5" y1="72.2813" y2="72.2813"/><ellipse cx="120.5" cy="89.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="133" x="130.5" y="94.8457">accept(self&amp;)</text></g><!--class Object2--><g id="elem_Object2"><rect codeLine="30" fill="#F1F1F1" height="96.5625" id="Object2" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="304.5" y="7"/><ellipse cx="341.65" cy="24" fill="#ADD1B2" rx="12" ry="12" style="stroke:#181818;stroke-width:1.0;"/><path d="M344.7125,31.0781 Q344.025,31.4375 343.275,31.6094 Q342.525,31.7813 341.6969,31.7813 Q338.7438,31.7813 337.1813,29.8438 Q335.6344,27.8906 335.6344,24.2188 Q335.6344,20.5469 337.1813,18.6094 Q338.7438,16.6563 341.6969,16.6563 Q342.525,16.6563 343.275,16.8281 Q344.0406,17 344.7125,17.3594 L344.7125,20.5625 Q343.9625,19.875 343.2594,19.5625 Q342.5719,19.25 341.8219,19.25 Q340.2438,19.25 339.4313,20.5 Q338.6344,21.75 338.6344,24.2188 Q338.6344,26.6875 339.4313,27.9375 Q340.2438,29.1875 341.8219,29.1875 Q342.5719,29.1875 343.2594,28.875 Q343.9625,28.5625 344.7125,27.875 L344.7125,31.0781 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="79" x="361.35" y="30.9238">Object2</text><line style="stroke:#181818;stroke-width:0.5;" x1="305.5" x2="463.5" y1="41" y2="41"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="310.5" y="63.5645">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="305.5" x2="463.5" y1="72.2813" y2="72.2813"/><ellipse cx="315.5" cy="89.4219" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="133" x="325.5" y="94.8457">accept(self&amp;)</text></g><!--reverse link Visitor to Visitor1--><g id="link_Visitor_Visitor1"><path codeLine="21" d="M213.4669,352.2757 C187.9169,371.3157 172.48,382.82 146.95,401.85 " fill="none" id="Visitor-backto-Visitor1" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="227.9,341.52,209.8816,347.4646,217.0521,357.0867,227.9,341.52" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Visitor to Visitor2--><g id="link_Visitor_Visitor2"><path codeLine="22" d="M286.5,359.32 C286.5,378.36 286.5,382.67 286.5,401.73 " fill="none" id="Visitor-backto-Visitor2" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="286.5,341.32,280.5,359.32,292.5,359.32,286.5,341.32" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link Visitor to Visitor3--><g id="link_Visitor_Visitor3"><path codeLine="23" d="M359.5331,352.2757 C385.0831,371.3157 400.52,382.82 426.05,401.85 " fill="none" id="Visitor-backto-Visitor3" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="345.1,341.52,355.9479,357.0867,363.1184,347.4646,345.1,341.52" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Object1 to Visitor--><g id="link_Object1_Visitor"><path codeLine="35" d="M208.78,103.9 C226.29,147.16 247.4049,199.3078 264.3849,241.2278 " fill="none" id="Object1-to-Visitor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="268.89,252.35,270.3448,245.2872,264.3849,241.2278,262.93,248.2906,268.89,252.35" style="stroke:#181818;stroke-width:1.0;"/></g><!--link Object2 to Visitor--><g id="link_Object2_Visitor"><path codeLine="36" d="M365.02,103.9 C347.33,147.16 325.9838,199.3235 308.8338,241.2435 " fill="none" id="Object2-to-Visitor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="304.29,252.35,310.2641,248.3114,308.8338,241.2435,302.8597,245.2822,304.29,252.35" style="stroke:#181818;stroke-width:1.0;"/><path d="M357.5,138.56 L357.5,217.56 L597.5,217.56 L597.5,148.56 L587.5,138.56 L357.5,138.56 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M587.5,138.56 L587.5,148.56 L597.5,148.56 L587.5,138.56 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="215" x="363.5" y="162.1245">visitor = new Visitor1</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="363.5" y="185.4057">foreach obj in Objects</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="155" x="387.5" y="208.687">obj.visit(visitor)</text></g><!--SRC=[fP4nRy8m48Nt-nKtLKGeKGap7Rio8B4R-ooEc7CK6weM-E-Gu4G8a535RNxdzzudErGijMhKrdbTaK53LkrS_FOI5_n7M7u2IwJ6AasuvC3HDtW0lCnutnv7yzM6T9naZrgPmGb0EnL2RvsyuItVy4x_vnreyrr-_Ef3O01vAa_lv4IGkX90KHJNKgKrrN4KoDcF6zv4yV9sdvhdVYZilRSQY8-4Nj2nL5tMFdtY38L-Xd_fLjOtfFGQ_Mg3B8abTAjsBd9nVQkKaG69mRO1OCs6aBPr_4NBv4mu0m00]--></g></svg></div>
</div></div></td>
<td align="left" valign="top"><div><ul class="">
<li>
<span>
Обход всех компонентов рекурсивно
</span>
</li>
<li>
<span>
Совмещает работу компоновщика и итератор
</span>
</li>
<li>
<span>
Сколько объектов <code>Objects</code>, столько должно быть функций <code>visit</code> в интерфейсе <code>Visitor</code>
</span>
</li>
<li>
<span>
Каждый <code>Visitor</code> нужен для реализации какой-то части логики
</span>
</li>
</ul></div></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><div class="title">Пример</div><p>Рекурсивная сериализация в разные форматы (каждый формат&#8201;&#8212;&#8201;это новый объект <code>Visitor</code>)</p></div>
</div></div>
</body>
</html>
