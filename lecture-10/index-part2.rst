Порождающие паттерны
====================

Общие сведения
---------------

Создающие классы

Виртуальный конструктор --- статический метод, заменяющий ``new`` и не зависит от типа

Abstract factory (абстрактная фабрика)
--------------------------------------

.. class:: column50

    .. image:: abstract_factory.uml.svg

.. class:: column50

    * Фабрика --- это просто набор виртуальных конструкторов
    * ``A``, ``B``, ``C`` --- это интерфейсы
    - Приходится писать не только сами объекты, но и фабрику

Пример: фабрика по созданию окон, кнопок, полей ввода в зависимости от менеджера графики
(X11, cairo, GtK, Qt, Mate, Windows, MacOS, ...)

Factory method (фабричный метод)
--------------------------------

.. class:: column50

    .. image:: factory_method.uml.svg

.. class:: column50

    * Частный случай абстрактной фабрики
    * ``IObj`` --- это интерфейс
    * ``SomeObject`` не является интерфейсом
    * Дальнейшее расширение объекта фабричными методами ``create`` приводит к созданию фабрики

Пример: диалоговое окно, у которого есть фабричный метод ``createButton``, возвращающий
кнопку в зависимости от графического менеджера

Builder (строитель)
-------------------

.. class:: column50

    .. image:: builder.uml.svg

.. class:: column50

    * Замена конструктора с 100500+ параметрами
    * ``Builder`` похож на абстрактную фабрику и компоновщик
    * ``Director`` похож на реализации стратегий
    * Разделение ``Product`` на части

Пример: создание разных видов диалоговых окон в зависимости от графического менеджера

Prototype (прототип)
--------------------

.. class:: column50

    .. image:: prototype.uml.svg

.. class:: column50

    * Конструктор копирования
    * Оператор =
    * "Глубокая" копия объекта
    * Должны наследовать интерфейс ``Prototype``

Пример: клонирование сложного объекта в графическом редакторе

Singleton (одиночка)
--------------------

.. class:: column50

    .. image:: singleton.uml.svg

.. class:: column50

    * Чтобы не писать глобальную переменную
    * Проблема гонок во время создания

Пример: системный логгер
